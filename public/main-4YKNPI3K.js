import{A as gc,B as Rl,C as St,D as Mg,E as Rg,F as Ng,G as $n,a as $,b as ye,c as bg,d as N,e as KI,f as Sl,g as QI,h as YI,i as ZI,j as JI,k as Tg,l as XI,m as fc,n as Ag,o as xl,p as eC,q as tC,r as Sg,s as ze,t as $i,u as Bn,v as Ml,w as pc,x as xg,y as nC,z as rC}from"./chunk-LUQVFFXE.js";function iC(t,e){return Object.is(t,e)}var lt=null,Nl=!1,Pl=1,yr=Symbol("SIGNAL");function Ce(t){let e=lt;return lt=t,e}function oC(){return lt}var yc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function kg(t){if(Nl)throw new Error("");if(lt===null)return;lt.consumerOnSignalRead(t);let e=lt.nextProducerIndex++;if(Vl(lt),e<lt.producerNode.length&&lt.producerNode[e]!==t&&mc(lt)){let n=lt.producerNode[e];Fl(n,lt.producerIndexOfThis[e])}lt.producerNode[e]!==t&&(lt.producerNode[e]=t,lt.producerIndexOfThis[e]=mc(lt)?uC(t,lt,e):0),lt.producerLastReadVersion[e]=t.version}function BR(){Pl++}function sC(t){if(!(mc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Pl)){if(!t.producerMustRecompute(t)&&!Vg(t)){t.dirty=!1,t.lastCleanEpoch=Pl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Pl}}function aC(t){if(t.liveConsumerNode===void 0)return;let e=Nl;Nl=!0;try{for(let n of t.liveConsumerNode)n.dirty||$R(n)}finally{Nl=e}}function cC(){return lt?.consumerAllowSignalWrites!==!1}function $R(t){t.dirty=!0,aC(t),t.consumerMarkedDirty?.(t)}function kl(t){return t&&(t.nextProducerIndex=0),Ce(t)}function Fg(t,e){if(Ce(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(mc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Fl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Vg(t){Vl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(sC(n),r!==n.version))return!0}return!1}function Lg(t){if(Vl(t),mc(t))for(let e=0;e<t.producerNode.length;e++)Fl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function uC(t,e,n){if(lC(t),t.liveConsumerNode.length===0&&dC(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=uC(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Fl(t,e){if(lC(t),t.liveConsumerNode.length===1&&dC(t))for(let r=0;r<t.producerNode.length;r++)Fl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Vl(i),i.producerIndexOfThis[r]=e}}function mc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Vl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function lC(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function dC(t){return t.producerNode!==void 0}function hC(t){let e=Object.create(HR);e.computation=t;let n=()=>{if(sC(e),kg(e),e.value===Ol)throw e.error;return e.value};return n[yr]=e,n}var Pg=Symbol("UNSET"),Og=Symbol("COMPUTING"),Ol=Symbol("ERRORED"),HR=ye($({},yc),{value:Pg,dirty:!0,error:null,equal:iC,producerMustRecompute(t){return t.value===Pg||t.value===Og},producerRecomputeValue(t){if(t.value===Og)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Og;let n=kl(t),r;try{r=t.computation()}catch(i){r=Ol,t.error=i}finally{Fg(t,n)}if(e!==Pg&&e!==Ol&&r!==Ol&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function qR(){throw new Error}var fC=qR;function pC(){fC()}function gC(t){fC=t}var zR=null;function mC(t){let e=Object.create(vC);e.value=t;let n=()=>(kg(e),e.value);return n[yr]=e,n}function jg(t,e){cC()||pC(),t.equal(t.value,e)||(t.value=e,GR(t))}function yC(t,e){cC()||pC(),jg(t,e(t.value))}var vC=ye($({},yc),{equal:iC,value:void 0});function GR(t){t.version++,BR(),aC(t),zR?.()}function se(t){return typeof t=="function"}function is(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ll=is(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Hi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ke=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(se(r))try{r()}catch(o){e=o instanceof Ll?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{_C(o)}catch(s){e=e??[],s instanceof Ll?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ll(e)}}add(e){var n;if(e&&e!==this)if(this.closed)_C(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Hi(n,e)}remove(e){let{_finalizers:n}=this;n&&Hi(n,e),e instanceof t&&e._removeParent(this)}};Ke.EMPTY=(()=>{let t=new Ke;return t.closed=!0,t})();var Ug=Ke.EMPTY;function jl(t){return t instanceof Ke||t&&"closed"in t&&se(t.remove)&&se(t.add)&&se(t.unsubscribe)}function _C(t){se(t)?t():t.unsubscribe()}var Sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var os={setTimeout(t,e,...n){let{delegate:r}=os;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=os;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ul(t){os.setTimeout(()=>{let{onUnhandledError:e}=Sn;if(e)e(t);else throw t})}function vc(){}var wC=Bg("C",void 0,void 0);function EC(t){return Bg("E",void 0,t)}function IC(t){return Bg("N",t,void 0)}function Bg(t,e,n){return{kind:t,value:e,error:n}}var qi=null;function ss(t){if(Sn.useDeprecatedSynchronousErrorHandling){let e=!qi;if(e&&(qi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=qi;if(qi=null,n)throw r}}else t()}function CC(t){Sn.useDeprecatedSynchronousErrorHandling&&qi&&(qi.errorThrown=!0,qi.error=t)}var zi=class extends Ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,jl(e)&&e.add(this)):this.destination=QR}static create(e,n,r){return new vr(e,n,r)}next(e){this.isStopped?Hg(IC(e),this):this._next(e)}error(e){this.isStopped?Hg(EC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hg(wC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},WR=Function.prototype.bind;function $g(t,e){return WR.call(t,e)}var qg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Bl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Bl(r)}else Bl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Bl(n)}}},vr=class extends zi{constructor(e,n,r){super();let i;if(se(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Sn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$g(e.next,o),error:e.error&&$g(e.error,o),complete:e.complete&&$g(e.complete,o)}):i=e}this.destination=new qg(i)}};function Bl(t){Sn.useDeprecatedSynchronousErrorHandling?CC(t):Ul(t)}function KR(t){throw t}function Hg(t,e){let{onStoppedNotification:n}=Sn;n&&os.setTimeout(()=>n(t,e))}var QR={closed:!0,next:vc,error:KR,complete:vc};var as=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ft(t){return t}function zg(...t){return Gg(t)}function Gg(t){return t.length===0?Ft:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var pe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=ZR(n)?n:new vr(n,r,i);return ss(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=DC(r),new r((i,o)=>{let s=new vr({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[as](){return this}pipe(...n){return Gg(n)(this)}toPromise(n){return n=DC(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function DC(t){var e;return(e=t??Sn.Promise)!==null&&e!==void 0?e:Promise}function YR(t){return t&&se(t.next)&&se(t.error)&&se(t.complete)}function ZR(t){return t&&t instanceof zi||YR(t)&&jl(t)}function Wg(t){return se(t?.lift)}function de(t){return e=>{if(Wg(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(t,e,n,r,i){return new Kg(t,e,n,r,i)}var Kg=class extends zi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function cs(){return de((t,e)=>{let n=null;t._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var us=class extends pe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Wg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ke;let n=this.getSubject();e.add(this.source.subscribe(he(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ke.EMPTY)}return e}refCount(){return cs()(this)}};var bC=is(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=(()=>{class t extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new $l(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new bC}next(n){ss(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ss(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ss(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Ug:(this.currentObservers=null,o.push(n),new Ke(()=>{this.currentObservers=null,Hi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new pe;return n.source=this,n}}return t.create=(e,n)=>new $l(e,n),t})(),$l=class extends $e{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Ug}};var wt=class extends $e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var _c={now(){return(_c.delegate||Date).now()},delegate:void 0};var Hl=class extends $e{constructor(e=1/0,n=1/0,r=_c){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var ql=class extends Ke{constructor(e,n){super()}schedule(e,n=0){return this}};var wc={setInterval(t,e,...n){let{delegate:r}=wc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=wc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ls=class extends ql{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return wc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&wc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Hi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ds=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ds.now=_c.now;var hs=class extends ds{constructor(e,n=ds.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Ec=new hs(ls);var zl=class extends ls{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Gl=class extends hs{};var Qg=new Gl(zl);var Vt=new pe(t=>t.complete());function TC(t){return t&&se(t.schedule)}function Yg(t){return t[t.length-1]}function Wl(t){return se(Yg(t))?t.pop():void 0}function Hn(t){return TC(Yg(t))?t.pop():void 0}function AC(t,e){return typeof Yg(t)=="number"?t.pop():e}var Kl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ql(t){return se(t?.then)}function Yl(t){return se(t[as])}function Zl(t){return Symbol.asyncIterator&&se(t?.[Symbol.asyncIterator])}function Jl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function JR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Xl=JR();function ed(t){return se(t?.[Xl])}function td(t){return QI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Sl(n.read());if(i)return yield Sl(void 0);yield yield Sl(r)}}finally{n.releaseLock()}})}function nd(t){return se(t?.getReader)}function Ue(t){if(t instanceof pe)return t;if(t!=null){if(Yl(t))return XR(t);if(Kl(t))return eN(t);if(Ql(t))return tN(t);if(Zl(t))return SC(t);if(ed(t))return nN(t);if(nd(t))return rN(t)}throw Jl(t)}function XR(t){return new pe(e=>{let n=t[as]();if(se(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function eN(t){return new pe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function tN(t){return new pe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ul)})}function nN(t){return new pe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function SC(t){return new pe(e=>{iN(t,e).catch(n=>e.error(n))})}function rN(t){return SC(td(t))}function iN(t,e){var n,r,i,o;return KI(this,void 0,void 0,function*(){try{for(n=YI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Kt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function en(t,e=0){return de((n,r)=>{n.subscribe(he(r,i=>Kt(r,t,()=>r.next(i),e),()=>Kt(r,t,()=>r.complete(),e),i=>Kt(r,t,()=>r.error(i),e)))})}function dn(t,e=0){return de((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function xC(t,e){return Ue(t).pipe(dn(e),en(e))}function MC(t,e){return Ue(t).pipe(dn(e),en(e))}function RC(t,e){return new pe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function NC(t,e){return new pe(n=>{let r;return Kt(n,e,()=>{r=t[Xl](),Kt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>se(r?.return)&&r.return()})}function rd(t,e){if(!t)throw new Error("Iterable cannot be null");return new pe(n=>{Kt(n,e,()=>{let r=t[Symbol.asyncIterator]();Kt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function PC(t,e){return rd(td(t),e)}function OC(t,e){if(t!=null){if(Yl(t))return xC(t,e);if(Kl(t))return RC(t,e);if(Ql(t))return MC(t,e);if(Zl(t))return rd(t,e);if(ed(t))return NC(t,e);if(nd(t))return PC(t,e)}throw Jl(t)}function Ae(t,e){return e?OC(t,e):Ue(t)}function ie(...t){let e=Hn(t);return Ae(t,e)}function fs(t,e){let n=se(t)?t:()=>t,r=i=>i.error(n());return new pe(e?i=>e.schedule(r,0,i):r)}function Zg(t){return!!t&&(t instanceof pe||se(t.lift)&&se(t.subscribe))}var _r=is(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function te(t,e){return de((n,r)=>{let i=0;n.subscribe(he(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:oN}=Array;function sN(t,e){return oN(e)?t(...e):t(e)}function id(t){return te(e=>sN(t,e))}var{isArray:aN}=Array,{getPrototypeOf:cN,prototype:uN,keys:lN}=Object;function od(t){if(t.length===1){let e=t[0];if(aN(e))return{args:e,keys:null};if(dN(e)){let n=lN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function dN(t){return t&&typeof t=="object"&&cN(t)===uN}function sd(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ad(...t){let e=Hn(t),n=Wl(t),{args:r,keys:i}=od(t);if(r.length===0)return Ae([],e);let o=new pe(hN(r,e,i?s=>sd(i,s):Ft));return n?o.pipe(id(n)):o}function hN(t,e,n=Ft){return r=>{kC(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)kC(e,()=>{let l=Ae(t[u],e),h=!1;l.subscribe(he(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function kC(t,e,n){t?Kt(n,t,e):e()}function FC(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=S=>l<r?C(S):u.push(S),C=S=>{o&&e.next(S),l++;let x=!1;Ue(n(S,h++)).subscribe(he(e,L=>{i?.(L),o?y(L):e.next(L)},()=>{x=!0},void 0,()=>{if(x)try{for(l--;u.length&&l<r;){let L=u.shift();s?Kt(e,s,()=>C(L)):C(L)}g()}catch(L){e.error(L)}}))};return t.subscribe(he(e,y,()=>{p=!0,g()})),()=>{a?.()}}function dt(t,e,n=1/0){return se(e)?dt((r,i)=>te((o,s)=>e(r,o,i,s))(Ue(t(r,i))),n):(typeof e=="number"&&(n=e),de((r,i)=>FC(r,i,t,n)))}function Ic(t=1/0){return dt(Ft,t)}function VC(){return Ic(1)}function ps(...t){return VC()(Ae(t,Hn(t)))}function cd(t){return new pe(e=>{Ue(t()).subscribe(e)})}function Jg(...t){let e=Wl(t),{args:n,keys:r}=od(t),i=new pe(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Ue(n[h]).subscribe(he(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?sd(r,a):a),o.complete())}))}});return e?i.pipe(id(e)):i}function Xg(...t){let e=Hn(t),n=AC(t,1/0),r=t;return r.length?r.length===1?Ue(r[0]):Ic(n)(Ae(r,e)):Vt}function xt(t,e){return de((n,r)=>{let i=0;n.subscribe(he(r,o=>t.call(e,o,i++)&&r.next(o)))})}function ei(t){return de((e,n)=>{let r=null,i=!1,o;r=e.subscribe(he(n,void 0,void 0,s=>{o=Ue(t(s,ei(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function LC(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(he(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function gs(t,e){return se(e)?dt(t,e,1):dt(t,1)}function ti(t){return de((e,n)=>{let r=!1;e.subscribe(he(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function wr(t){return t<=0?()=>Vt:de((e,n)=>{let r=0;e.subscribe(he(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function em(t){return te(()=>t)}function tm(t,e=Ft){return t=t??fN,de((n,r)=>{let i,o=!0;n.subscribe(he(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function fN(t,e){return t===e}function ud(t=pN){return de((e,n)=>{let r=!1;e.subscribe(he(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function pN(){return new _r}function Cc(t){return de((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function hn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?xt((i,o)=>t(i,o,r)):Ft,wr(1),n?ti(e):ud(()=>new _r))}function ms(t){return t<=0?()=>Vt:de((e,n)=>{let r=[];e.subscribe(he(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function nm(t,e){let n=arguments.length>=2;return r=>r.pipe(t?xt((i,o)=>t(i,o,r)):Ft,ms(1),n?ti(e):ud(()=>new _r))}function Dc(){return de((t,e)=>{let n,r=!1;t.subscribe(he(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function Gi(t,e){return de(LC(t,e,arguments.length>=2,!0))}function jC(t={}){let{connector:e=()=>new $e,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,l=0,h=!1,p=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,h=p=!1},C=()=>{let S=s;y(),S?.unsubscribe()};return de((S,x)=>{l++,!p&&!h&&g();let L=u=u??e();x.add(()=>{l--,l===0&&!p&&!h&&(a=rm(C,i))}),L.subscribe(x),!s&&l>0&&(s=new vr({next:H=>L.next(H),error:H=>{p=!0,g(),a=rm(y,n,H),L.error(H)},complete:()=>{h=!0,g(),a=rm(y,r),L.complete()}}),Ue(S).subscribe(s))})(o)}}function rm(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new vr({next:()=>{r.unsubscribe(),t()}});return Ue(e(...n)).subscribe(r)}function ld(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,jC({connector:()=>new Hl(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Wi(...t){let e=Hn(t);return de((n,r)=>{(e?ps(t,n,e):ps(t,n)).subscribe(r)})}function Ye(t,e){return de((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(he(r,u=>{i?.unsubscribe();let l=0,h=o++;Ue(t(u,h)).subscribe(i=he(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function dd(t,e){return se(e)?Ye(()=>t,e):Ye(()=>t)}function im(t){return de((e,n)=>{Ue(t).subscribe(he(n,()=>n.complete(),vc)),!n.closed&&e.subscribe(n)})}function ht(t,e,n){let r=se(t)||e||n?{next:t,error:e,complete:n}:t;return r?de((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(he(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ft}var TD="https://g.co/ng/security#xss",J=class extends Error{constructor(e,n){super(sy(e,n)),this.code=e}};function sy(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function kc(t){return{toString:t}.toString()}var hd="__parameters__";function gN(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function AD(t,e,n){return kc(()=>{let r=gN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(hd)?u[hd]:Object.defineProperty(u,hd,{value:[]})[hd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Zi=globalThis;function Oe(t){for(let e in t)if(t[e]===Oe)return e;throw Error("Could not find renamed property on target object.")}function mN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function jt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(jt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function UC(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var yN=Oe({__forward_ref__:Oe});function Ps(t){return t.__forward_ref__=Ps,t.toString=function(){return jt(this())},t}function Lt(t){return SD(t)?t():t}function SD(t){return typeof t=="function"&&t.hasOwnProperty(yN)&&t.__forward_ref__===Ps}function X(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Dr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Wd(t){return BC(t,MD)||BC(t,RD)}function xD(t){return Wd(t)!==null}function BC(t,e){return t.hasOwnProperty(e)?t[e]:null}function vN(t){let e=t&&(t[MD]||t[RD]);return e||null}function $C(t){return t&&(t.hasOwnProperty(HC)||t.hasOwnProperty(_N))?t[HC]:null}var MD=Oe({\u0275prov:Oe}),HC=Oe({\u0275inj:Oe}),RD=Oe({ngInjectableDef:Oe}),_N=Oe({ngInjectorDef:Oe}),W=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=X({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ND(t){return t&&!!t.\u0275providers}var wN=Oe({\u0275cmp:Oe}),EN=Oe({\u0275dir:Oe}),IN=Oe({\u0275pipe:Oe}),CN=Oe({\u0275mod:Oe}),Id=Oe({\u0275fac:Oe}),Ac=Oe({__NG_ELEMENT_ID__:Oe}),qC=Oe({__NG_ENV_ID__:Oe});function Kd(t){return typeof t=="string"?t:t==null?"":String(t)}function DN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Kd(t)}function bN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new J(-200,t)}function ay(t,e){throw new J(-201,!1)}var ge=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ge||{}),_m;function PD(){return _m}function Qt(t){let e=_m;return _m=t,e}function OD(t,e,n){let r=Wd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ge.Optional)return null;if(e!==void 0)return e;ay(t,"Injector")}var TN={},Sc=TN,wm="__NG_DI_FLAG__",Cd="ngTempTokenPath",AN="ngTokenPath",SN=/\n/gm,xN="\u0275",zC="__source",ws;function MN(){return ws}function ni(t){let e=ws;return ws=t,e}function RN(t,e=ge.Default){if(ws===void 0)throw new J(-203,!1);return ws===null?OD(t,void 0,e):ws.get(t,e&ge.Optional?null:void 0,e)}function q(t,e=ge.Default){return(PD()||RN)(Lt(t),e)}function G(t,e=ge.Default){return q(t,Qd(e))}function Qd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Em(t){let e=[];for(let n=0;n<t.length;n++){let r=Lt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,o=ge.Default;for(let s=0;s<r.length;s++){let a=r[s],u=NN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(q(i,o))}else e.push(q(r))}return e}function kD(t,e){return t[wm]=e,t.prototype[wm]=e,t}function NN(t){return t[wm]}function PN(t,e,n,r){let i=t[Cd];throw e[zC]&&i.unshift(e[zC]),t.message=ON(`
`+t.message,i,n,r),t[AN]=i,t[Cd]=null,t}function ON(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==xN?t.slice(2):t;let i=jt(e);if(Array.isArray(e))i=e.map(jt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):jt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(SN,`
  `)}`}var Mt=kD(AD("Optional"),8);var FD=kD(AD("SkipSelf"),4);function Xi(t,e){let n=t.hasOwnProperty(Id);return n?t[Id]:null}function cy(t,e){t.forEach(n=>Array.isArray(n)?cy(n,e):e(n))}function VD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Dd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function kN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function FN(t,e,n){let r=Fc(t,e);return r>=0?t[r|1]=n:(r=~r,kN(t,r,e,n)),r}function om(t,e){let n=Fc(t,e);if(n>=0)return t[n|1]}function Fc(t,e){return VN(t,e,1)}function VN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Is={},fn=[],Cs=new W(""),LD=new W("",-1),jD=new W(""),bd=class{get(e,n=Sc){if(n===Sc){let r=new Error(`NullInjectorError: No provider for ${jt(e)}!`);throw r.name="NullInjectorError",r}return n}},UD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(UD||{}),Gn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Gn||{}),oi=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(oi||{});function LN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Im(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];jN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function BD(t){return t===3||t===4||t===6}function jN(t){return t.charCodeAt(0)===64}function xc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?GC(t,n,i,null,e[++r]):GC(t,n,i,null,null))}}return t}function GC(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var $D="ng-template";function UN(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&LN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(uy(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function uy(t){return t.type===4&&t.value!==$D}function BN(t,e,n){let r=t.type===4&&!n?$D:t.value;return e===r}function $N(t,e,n){let r=4,i=t.attrs,o=i!==null?zN(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!xn(r)&&!xn(u))return!1;if(s&&xn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!BN(t,u,n)||u===""&&e.length===1){if(xn(r))return!1;s=!0}}else if(r&8){if(i===null||!UN(t,i,u,n)){if(xn(r))return!1;s=!0}}else{let l=e[++a],h=HN(u,i,uy(t),n);if(h===-1){if(xn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(xn(r))return!1;s=!0}}}}return xn(r)||s}function xn(t){return(t&1)===0}function HN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return GN(e,t)}function qN(t,e,n=!1){for(let r=0;r<e.length;r++)if($N(t,e[r],n))return!0;return!1}function zN(t){for(let e=0;e<t.length;e++){let n=t[e];if(BD(n))return e}return t.length}function GN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function WC(t,e){return t?":not("+e.trim()+")":e}function WN(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!xn(s)&&(e+=WC(o,i),i=""),r=s,o=o||!xn(r);n++}return i!==""&&(e+=WC(o,i)),e}function KN(t){return t.map(WN).join(",")}function QN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!xn(i))break;i=o}r++}return{attrs:e,classes:n}}function yt(t){return kc(()=>{let e=KD(t),n=ye($({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===UD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Gn.Emulated,styles:t.styles||fn,_:null,schemas:t.schemas||null,tView:null,id:""});QD(n);let r=t.dependencies;return n.directiveDefs=QC(r,!1),n.pipeDefs=QC(r,!0),n.id=JN(n),n})}function YN(t){return eo(t)||qD(t)}function ZN(t){return t!==null}function br(t){return kc(()=>({type:t.type,bootstrap:t.bootstrap||fn,declarations:t.declarations||fn,imports:t.imports||fn,exports:t.exports||fn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function KC(t,e){if(t==null)return Is;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=oi.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==oi.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Rt(t){return kc(()=>{let e=KD(t);return QD(e),e})}function HD(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function eo(t){return t[wN]||null}function qD(t){return t[EN]||null}function zD(t){return t[IN]||null}function GD(t){let e=eo(t)||qD(t)||zD(t);return e!==null?e.standalone:!1}function WD(t,e){let n=t[CN]||null;if(!n&&e===!0)throw new Error(`Type ${jt(t)} does not have '\u0275mod' property.`);return n}function KD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Is,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||fn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:KC(t.inputs,e),outputs:KC(t.outputs),debugInfo:null}}function QD(t){t.features?.forEach(e=>e(t))}function QC(t,e){if(!t)return null;let n=e?zD:YN;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(ZN)}function JN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Zn(t){return{\u0275providers:t}}function XN(...t){return{\u0275providers:YD(!0,t),\u0275fromNgModule:!0}}function YD(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return cy(e,s=>{let a=s;Cm(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ZD(i,o),n}function ZD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ly(i,o=>{e(o,r)})}}function Cm(t,e,n,r){if(t=Lt(t),!t)return!1;let i=null,o=$C(t),s=!o&&eo(t);if(!o&&!s){let u=t.ngModule;if(o=$C(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Cm(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{cy(o.imports,h=>{Cm(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&ZD(l,e)}if(!a){let l=Xi(i)||(()=>new i);e({provide:i,useFactory:l,deps:fn},i),e({provide:jD,useValue:i,multi:!0},i),e({provide:Cs,useValue:()=>q(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;ly(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function ly(t,e){for(let n of t)ND(n)&&(n=n.\u0275providers),Array.isArray(n)?ly(n,e):e(n)}var eP=Oe({provide:String,useValue:Oe});function JD(t){return t!==null&&typeof t=="object"&&eP in t}function tP(t){return!!(t&&t.useExisting)}function nP(t){return!!(t&&t.useFactory)}function Ds(t){return typeof t=="function"}function rP(t){return!!t.useClass}var Yd=new W(""),yd={},iP={},sm;function dy(){return sm===void 0&&(sm=new bd),sm}var mn=class{},Mc=class extends mn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bm(e,s=>this.processProvider(s)),this.records.set(LD,ys(void 0,this)),i.has("environment")&&this.records.set(mn,ys(void 0,this));let o=this.records.get(Yd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(jD,fn,ge.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ce(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=ni(this),r=Qt(void 0),i;try{return e()}finally{ni(n),Qt(r)}}get(e,n=Sc,r=ge.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(qC))return e[qC](this);r=Qd(r);let i,o=ni(this),s=Qt(void 0);try{if(!(r&ge.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=uP(e)&&Wd(e);l&&this.injectableDefInScope(l)?u=ys(Dm(e),yd):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ge.Self?dy():this.parent;return n=r&ge.Optional&&n===Sc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Cd]=a[Cd]||[]).unshift(jt(e)),o)throw a;return PN(a,e,"R3InjectorError",this.source)}else throw a}finally{Qt(s),ni(o)}}resolveInjectorInitializers(){let e=Ce(null),n=ni(this),r=Qt(void 0),i;try{let o=this.get(Cs,fn,ge.Self);for(let s of o)s()}finally{ni(n),Qt(r),Ce(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(jt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new J(205,!1)}processProvider(e){e=Lt(e);let n=Ds(e)?e:Lt(e&&e.provide),r=sP(e);if(!Ds(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ys(void 0,yd,!0),i.factory=()=>Em(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Ce(null);try{return n.value===yd&&(n.value=iP,n.value=n.factory()),typeof n.value=="object"&&n.value&&cP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Lt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Dm(t){let e=Wd(t),n=e!==null?e.factory:Xi(t);if(n!==null)return n;if(t instanceof W)throw new J(204,!1);if(t instanceof Function)return oP(t);throw new J(204,!1)}function oP(t){if(t.length>0)throw new J(204,!1);let n=vN(t);return n!==null?()=>n.factory(t):()=>new t}function sP(t){if(JD(t))return ys(void 0,t.useValue);{let e=XD(t);return ys(e,yd)}}function XD(t,e,n){let r;if(Ds(t)){let i=Lt(t);return Xi(i)||Dm(i)}else if(JD(t))r=()=>Lt(t.useValue);else if(nP(t))r=()=>t.useFactory(...Em(t.deps||[]));else if(tP(t))r=()=>q(Lt(t.useExisting));else{let i=Lt(t&&(t.useClass||t.provide));if(aP(t))r=()=>new i(...Em(t.deps));else return Xi(i)||Dm(i)}return r}function ys(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function aP(t){return!!t.deps}function cP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function uP(t){return typeof t=="function"||typeof t=="object"&&t instanceof W}function bm(t,e){for(let n of t)Array.isArray(n)?bm(n,e):n&&ND(n)?bm(n.\u0275providers,e):e(n)}function Tr(t,e){t instanceof Mc&&t.assertNotDestroyed();let n,r=ni(t),i=Qt(void 0);try{return e()}finally{ni(r),Qt(i)}}function lP(){return PD()!==void 0||MN()!=null}function dP(t){return typeof t=="function"}var Ar=0,ve=1,ae=2,Ut=3,Mn=4,Nn=5,Td=6,Ad=7,Rn=8,bs=9,Wn=10,ft=11,Rc=12,YC=13,Os=14,Kn=15,Ts=16,vs=17,As=18,Zd=19,eb=20,ri=21,am=22,pn=23,Qn=25,tb=1;var to=7,Sd=8,xd=9,gn=10,Md=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Md||{});function ii(t){return Array.isArray(t)&&typeof t[tb]=="object"}function Sr(t){return Array.isArray(t)&&t[tb]===!0}function nb(t){return(t.flags&4)!==0}function Jd(t){return t.componentOffset>-1}function hy(t){return(t.flags&1)===1}function si(t){return!!t.template}function Tm(t){return(t[ae]&512)!==0}var Am=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function rb(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function uo(){return ib}function ib(t){return t.type.prototype.ngOnChanges&&(t.setInput=fP),hP}uo.ngInherit=!0;function hP(){let t=sb(this),e=t?.current;if(e){let n=t.previous;if(n===Is)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function fP(t,e,n,r,i){let o=this.declaredInputs[r],s=sb(t)||pP(t,{previous:Is,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Am(l&&l.currentValue,n,u===Is),rb(t,e,i,n)}var ob="__ngSimpleChanges__";function sb(t){return t[ob]||null}function pP(t,e){return t[ob]=e}var ZC=null;var qn=function(t,e,n){ZC?.(t,e,n)},ab="svg",gP="math";function Yn(t){for(;Array.isArray(t);)t=t[Ar];return t}function cb(t,e){return Yn(e[t])}function yn(t,e){return Yn(e[t.index])}function ub(t,e){return t.data[e]}function mP(t,e){return t[e]}function ci(t,e){let n=e[t];return ii(n)?n:n[Ar]}function fy(t){return(t[ae]&128)===128}function yP(t){return Sr(t[Ut])}function Rd(t,e){return e==null?null:t[e]}function lb(t){t[vs]=0}function db(t){t[ae]&1024||(t[ae]|=1024,fy(t)&&eh(t))}function vP(t,e){for(;t>0;)e=e[Os],t--;return e}function Xd(t){return!!(t[ae]&9216||t[pn]?.dirty)}function Sm(t){t[Wn].changeDetectionScheduler?.notify(8),t[ae]&64&&(t[ae]|=1024),Xd(t)&&eh(t)}function eh(t){t[Wn].changeDetectionScheduler?.notify(0);let e=no(t);for(;e!==null&&!(e[ae]&8192||(e[ae]|=8192,!fy(e)));)e=no(e)}function hb(t,e){if((t[ae]&256)===256)throw new J(911,!1);t[ri]===null&&(t[ri]=[]),t[ri].push(e)}function _P(t,e){if(t[ri]===null)return;let n=t[ri].indexOf(e);n!==-1&&t[ri].splice(n,1)}function no(t){let e=t[Ut];return Sr(e)?e[Ut]:e}var me={lFrame:Ib(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var fb=!1;function wP(){return me.lFrame.elementDepthCount}function EP(){me.lFrame.elementDepthCount++}function IP(){me.lFrame.elementDepthCount--}function pb(){return me.bindingsEnabled}function CP(){return me.skipHydrationRootTNode!==null}function DP(t){return me.skipHydrationRootTNode===t}function bP(){me.skipHydrationRootTNode=null}function Ne(){return me.lFrame.lView}function Zt(){return me.lFrame.tView}function ks(t){return me.lFrame.contextLView=t,t[Rn]}function Fs(t){return me.lFrame.contextLView=null,t}function Bt(){let t=gb();for(;t!==null&&t.type===64;)t=t.parent;return t}function gb(){return me.lFrame.currentTNode}function TP(){let t=me.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Vc(t,e){let n=me.lFrame;n.currentTNode=t,n.isParent=e}function mb(){return me.lFrame.isParent}function AP(){me.lFrame.isParent=!1}function yb(){return fb}function JC(t){fb=t}function vb(){let t=me.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function SP(t){return me.lFrame.bindingIndex=t}function th(){return me.lFrame.bindingIndex++}function xP(t){let e=me.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function MP(){return me.lFrame.inI18n}function RP(t,e){let n=me.lFrame;n.bindingIndex=n.bindingRootIndex=t,xm(e)}function NP(){return me.lFrame.currentDirectiveIndex}function xm(t){me.lFrame.currentDirectiveIndex=t}function PP(t){let e=me.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function _b(t){me.lFrame.currentQueryIndex=t}function OP(t){let e=t[ve];return e.type===2?e.declTNode:e.type===1?t[Nn]:null}function wb(t,e,n){if(n&ge.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&ge.Host);)if(i=OP(o),i===null||(o=o[Os],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=me.lFrame=Eb();return r.currentTNode=e,r.lView=t,!0}function py(t){let e=Eb(),n=t[ve];me.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Eb(){let t=me.lFrame,e=t===null?null:t.child;return e===null?Ib(t):e}function Ib(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Cb(){let t=me.lFrame;return me.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Db=Cb;function gy(){let t=Cb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function kP(t){return(me.lFrame.contextLView=vP(t,me.lFrame.contextLView))[Rn]}function Vs(){return me.lFrame.selectedIndex}function ro(t){me.lFrame.selectedIndex=t}function my(){let t=me.lFrame;return ub(t.tView,t.selectedIndex)}function ui(){me.lFrame.currentNamespace=ab}function bb(){FP()}function FP(){me.lFrame.currentNamespace=null}function VP(){return me.lFrame.currentNamespace}var Tb=!0;function yy(){return Tb}function vy(t){Tb=t}function LP(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=ib(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function _y(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function vd(t,e,n){Ab(t,e,3,n)}function _d(t,e,n,r){(t[ae]&3)===n&&Ab(t,e,n,r)}function cm(t,e){let n=t[ae];(n&3)===e&&(n&=16383,n+=1,t[ae]=n)}function Ab(t,e,n,r){let i=r!==void 0?t[vs]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[vs]+=65536),(a<o||o==-1)&&(jP(t,n,e,u),t[vs]=(t[vs]&4294901760)+u+2),u++}function XC(t,e){qn(4,t,e);let n=Ce(null);try{e.call(t)}finally{Ce(n),qn(5,t,e)}}function jP(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[ae]>>14<t[vs]>>16&&(t[ae]&3)===e&&(t[ae]+=16384,XC(a,o)):XC(a,o)}var Es=-1,io=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function UP(t){return t instanceof io}function BP(t){return(t.flags&8)!==0}function $P(t){return(t.flags&16)!==0}var um={},Mm=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Qd(r);let i=this.injector.get(e,um,r);return i!==um||n===um?i:this.parentInjector.get(e,n,r)}};function Sb(t){return t!==Es}function Nd(t){return t&32767}function HP(t){return t>>16}function Pd(t,e){let n=HP(t),r=e;for(;n>0;)r=r[Os],n--;return r}var Rm=!0;function Od(t){let e=Rm;return Rm=t,e}var qP=256,xb=qP-1,Mb=5,zP=0,zn={};function GP(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ac)&&(r=n[Ac]),r==null&&(r=n[Ac]=zP++);let i=r&xb,o=1<<i;e.data[t+(i>>Mb)]|=o}function kd(t,e){let n=Rb(t,e);if(n!==-1)return n;let r=e[ve];r.firstCreatePass&&(t.injectorIndex=e.length,lm(r.data,t),lm(e,null),lm(r.blueprint,null));let i=wy(t,e),o=t.injectorIndex;if(Sb(i)){let s=Nd(i),a=Pd(i,e),u=a[ve].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function lm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Rb(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function wy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Fb(i),r===null)return Es;if(n++,i=i[Os],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Es}function Nm(t,e,n){GP(t,e,n)}function WP(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(BD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function Nb(t,e,n){if(n&ge.Optional||t!==void 0)return t;ay(e,"NodeInjector")}function Pb(t,e,n,r){if(n&ge.Optional&&r===void 0&&(r=null),!(n&(ge.Self|ge.Host))){let i=t[bs],o=Qt(void 0);try{return i?i.get(e,r,n&ge.Optional):OD(e,r,n&ge.Optional)}finally{Qt(o)}}return Nb(r,e,n)}function Ob(t,e,n,r=ge.Default,i){if(t!==null){if(e[ae]&2048&&!(r&ge.Self)){let s=JP(t,e,n,r,zn);if(s!==zn)return s}let o=kb(t,e,n,r,zn);if(o!==zn)return o}return Pb(e,n,r,i)}function kb(t,e,n,r,i){let o=YP(n);if(typeof o=="function"){if(!wb(e,t,r))return r&ge.Host?Nb(i,n,r):Pb(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&ge.Optional))ay(n);else return s}finally{Db()}}else if(typeof o=="number"){let s=null,a=Rb(t,e),u=Es,l=r&ge.Host?e[Kn][Nn]:null;for((a===-1||r&ge.SkipSelf)&&(u=a===-1?wy(t,e):e[a+8],u===Es||!tD(r,!1)?a=-1:(s=e[ve],a=Nd(u),e=Pd(u,e)));a!==-1;){let h=e[ve];if(eD(o,a,h.data)){let p=KP(a,e,n,s,r,l);if(p!==zn)return p}u=e[a+8],u!==Es&&tD(r,e[ve].data[a+8]===l)&&eD(o,a,e)?(s=h,a=Nd(u),e=Pd(u,e)):a=-1}}return i}function KP(t,e,n,r,i,o){let s=e[ve],a=s.data[t+8],u=r==null?Jd(a)&&Rm:r!=s&&(a.type&3)!==0,l=i&ge.Host&&o===a,h=QP(a,s,n,u,l);return h!==null?Ss(e,s,h,a):zn}function QP(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let C=s[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){let y=s[u];if(y&&si(y)&&y.type===n)return u}return null}function Ss(t,e,n,r){let i=t[n],o=e.data;if(UP(i)){let s=i;s.resolving&&bN(DN(o[n]));let a=Od(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Qt(s.injectImpl):null,h=wb(t,r,ge.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&LP(n,o[n],e)}finally{l!==null&&Qt(l),Od(a),s.resolving=!1,Db()}}return i}function YP(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ac)?t[Ac]:void 0;return typeof e=="number"?e>=0?e&xb:ZP:e}function eD(t,e,n){let r=1<<t;return!!(n[e+(t>>Mb)]&r)}function tD(t,e){return!(t&ge.Self)&&!(t&ge.Host&&e)}var Ji=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Ob(this._tNode,this._lView,e,Qd(r),n)}};function ZP(){return new Ji(Bt(),Ne())}function Lc(t){return kc(()=>{let e=t.prototype.constructor,n=e[Id]||Pm(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Id]||Pm(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Pm(t){return SD(t)?()=>{let e=Pm(Lt(t));return e&&e()}:Xi(t)}function JP(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ae]&2048&&!(s[ae]&512);){let a=kb(o,s,n,r|ge.Self,zn);if(a!==zn)return a;let u=o.parent;if(!u){let l=s[eb];if(l){let h=l.get(n,zn,r);if(h!==zn)return h}u=Fb(s),s=s[Os]}o=u}return i}function Fb(t){let e=t[ve],n=e.type;return n===2?e.declTNode:n===1?t[Nn]:null}function Ey(t){return WP(Bt(),t)}function nD(t,e=null,n=null,r){let i=Vb(t,e,n,r);return i.resolveInjectorInitializers(),i}function Vb(t,e=null,n=null,r,i=new Set){let o=[n||fn,XN(t)];return r=r||(typeof t=="object"?void 0:jt(t)),new Mc(o,e||dy(),r||null,i)}var Qi=class Qi{static create(e,n){if(Array.isArray(e))return nD({name:""},n,e,"");{let r=e.name??"";return nD({name:r},e.parent,e.providers,r)}}};Qi.THROW_IF_NOT_FOUND=Sc,Qi.NULL=new bd,Qi.\u0275prov=X({token:Qi,providedIn:"any",factory:()=>q(LD)}),Qi.__NG_ELEMENT_ID__=-1;var Yt=Qi;var XP=new W("");XP.__NG_ELEMENT_ID__=t=>{let e=Bt();if(e===null)throw new J(204,!1);if(e.type&2)return e.value;if(t&ge.Optional)return null;throw new J(204,!1)};var eO="ngOriginalError";function dm(t){return t[eO]}var Lb=!0,jb=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=tO,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Om=class extends jb{constructor(e){super(),this._lView=e}onDestroy(e){return hb(this._lView,e),()=>_P(this._lView,e)}};function tO(){return new Om(Ne())}var Ls=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new wt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=X({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var km=class extends $e{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,lP()&&(this.destroyRef=G(jb,{optional:!0})??void 0,this.pendingTasks=G(Ls,{optional:!0})??void 0)}emit(e){let n=Ce(null);try{super.next(e)}finally{Ce(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ke&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},rt=km;function Fd(...t){}function Ub(t){let e,n;function r(){t=Fd;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function rD(t){return queueMicrotask(()=>t()),()=>{t=Fd}}var Iy="isAngularZone",Vd=Iy+"_ID",nO=0,De=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rt(!1),this.onMicrotaskEmpty=new rt(!1),this.onStable=new rt(!1),this.onError=new rt(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Lb}=e;if(typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,oO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Iy)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new J(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,rO,Fd,Fd);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},rO={};function Cy(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function iO(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Ub(()=>{t.callbackScheduled=!1,Fm(t),t.isCheckStableRunning=!0,Cy(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Fm(t)}function oO(t){let e=()=>{iO(t)},n=nO++;t._inner=t._inner.fork({name:"angular",properties:{[Iy]:!0,[Vd]:n,[Vd+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(sO(u))return r.invokeTask(o,s,a,u);try{return iD(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),oD(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return iD(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!aO(u)&&e(),oD(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Fm(t),Cy(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Fm(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function iD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function oD(t){t._nesting--,Cy(t)}var Vm=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rt,this.onMicrotaskEmpty=new rt,this.onStable=new rt,this.onError=new rt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function sO(t){return Bb(t,"__ignore_ng_zone__")}function aO(t){return Bb(t,"__scheduler_tick__")}function Bb(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Er=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&dm(e);for(;n&&dm(n);)n=dm(n);return n||null}},cO=new W("",{providedIn:"root",factory:()=>{let t=G(De),e=G(Er);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function uO(){return nh(Bt(),Ne())}function nh(t,e){return new xr(yn(t,e))}var xr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=uO;let t=e;return t})();function $b(t){return(t.flags&128)===128}var Hb=new Map,lO=0;function dO(){return lO++}function hO(t){Hb.set(t[Zd],t)}function Lm(t){Hb.delete(t[Zd])}var sD="__ngContext__";function oo(t,e){ii(e)?(t[sD]=e[Zd],hO(e)):t[sD]=e}function qb(t){return Gb(t[Rc])}function zb(t){return Gb(t[Mn])}function Gb(t){for(;t!==null&&!Sr(t);)t=t[Mn];return t}var jm;function Wb(t){jm=t}function fO(){if(jm!==void 0)return jm;if(typeof document<"u")return document;throw new J(210,!1)}var Dy=new W("",{providedIn:"root",factory:()=>pO}),pO="ng",by=new W(""),tn=new W("",{providedIn:"platform",factory:()=>"unknown"});var Ty=new W("",{providedIn:"root",factory:()=>fO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var gO="h",mO="b";var yO=()=>null;function Ay(t,e,n=!1){return yO(t,e,n)}var Kb=!1,vO=new W("",{providedIn:"root",factory:()=>Kb});var fd;function _O(){if(fd===void 0&&(fd=null,Zi.trustedTypes))try{fd=Zi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return fd}function aD(t){return _O()?.createScriptURL(t)||t}var Ld=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${TD})`}};function jc(t){return t instanceof Ld?t.changingThisBreaksApplicationSecurity:t}function Sy(t,e){let n=wO(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${TD})`)}return n===e}function wO(t){return t instanceof Ld&&t.getTypeName()||null}var EO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Qb(t){return t=String(t),t.match(EO)?t:"unsafe:"+t}var rh=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(rh||{});function IO(t){let e=Zb();return e?e.sanitize(rh.URL,t)||"":Sy(t,"URL")?jc(t):Qb(Kd(t))}function CO(t){let e=Zb();if(e)return aD(e.sanitize(rh.RESOURCE_URL,t)||"");if(Sy(t,"ResourceURL"))return aD(jc(t));throw new J(904,!1)}function DO(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?CO:IO}function Yb(t,e,n){return DO(e,n)(t)}function Zb(){let t=Ne();return t&&t[Wn].sanitizer}function Jb(t){return t.ownerDocument.defaultView}function Xb(t){return t instanceof Function?t():t}var Ir=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ir||{}),bO;function xy(t,e){return bO(t,e)}function _s(t,e,n,r,i){if(r!=null){let o,s=!1;Sr(r)?o=r:ii(r)&&(s=!0,r=r[Ar]);let a=Yn(r);t===0&&n!==null?i==null?iT(e,n,a):jd(e,n,a,i||null,!0):t===1&&n!==null?jd(e,n,a,i||null,!0):t===2?UO(e,a,s):t===3&&e.destroyNode(a),o!=null&&$O(e,t,o,n,i)}}function TO(t,e){return t.createText(e)}function AO(t,e,n){t.setValue(e,n)}function eT(t,e,n){return t.createElement(e,n)}function SO(t,e){tT(t,e),e[Ar]=null,e[Nn]=null}function xO(t,e,n,r,i,o){r[Ar]=i,r[Nn]=e,ih(t,r,n,1,i,o)}function tT(t,e){e[Wn].changeDetectionScheduler?.notify(9),ih(t,e,e[ft],2,null,null)}function MO(t){let e=t[Rc];if(!e)return hm(t[ve],t);for(;e;){let n=null;if(ii(e))n=e[Rc];else{let r=e[gn];r&&(n=r)}if(!n){for(;e&&!e[Mn]&&e!==t;)ii(e)&&hm(e[ve],e),e=e[Ut];e===null&&(e=t),ii(e)&&hm(e[ve],e),n=e&&e[Mn]}e=n}}function RO(t,e,n,r){let i=gn+r,o=n.length;r>0&&(n[i-1][Mn]=e),r<o-gn?(e[Mn]=n[i],VD(n,gn+r,e)):(n.push(e),e[Mn]=null),e[Ut]=n;let s=e[Ts];s!==null&&n!==s&&nT(s,e);let a=e[As];a!==null&&a.insertView(t),Sm(e),e[ae]|=128}function nT(t,e){let n=t[xd],r=e[Ut];if(ii(r))t[ae]|=Md.HasTransplantedViews;else{let i=r[Ut][Kn];e[Kn]!==i&&(t[ae]|=Md.HasTransplantedViews)}n===null?t[xd]=[e]:n.push(e)}function My(t,e){let n=t[xd],r=n.indexOf(e);n.splice(r,1)}function Um(t,e){if(t.length<=gn)return;let n=gn+e,r=t[n];if(r){let i=r[Ts];i!==null&&i!==t&&My(i,r),e>0&&(t[n-1][Mn]=r[Mn]);let o=Dd(t,gn+e);SO(r[ve],r);let s=o[As];s!==null&&s.detachView(o[ve]),r[Ut]=null,r[Mn]=null,r[ae]&=-129}return r}function rT(t,e){if(!(e[ae]&256)){let n=e[ft];n.destroyNode&&ih(t,e,n,3,null,null),MO(e)}}function hm(t,e){if(e[ae]&256)return;let n=Ce(null);try{e[ae]&=-129,e[ae]|=256,e[pn]&&Lg(e[pn]),PO(t,e),NO(t,e),e[ve].type===1&&e[ft].destroy();let r=e[Ts];if(r!==null&&Sr(e[Ut])){r!==e[Ut]&&My(r,e);let i=e[As];i!==null&&i.detachView(t)}Lm(e)}finally{Ce(n)}}function NO(t,e){let n=t.cleanup,r=e[Ad];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Ad]=null);let i=e[ri];if(i!==null){e[ri]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function PO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof io)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];qn(4,a,u);try{u.call(a)}finally{qn(5,a,u)}}else{qn(4,i,o);try{o.call(i)}finally{qn(5,i,o)}}}}}function OO(t,e,n){return kO(t,e.parent,n)}function kO(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Ar];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Gn.None||o===Gn.Emulated)return null}return yn(r,n)}}function jd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function iT(t,e,n){t.appendChild(e,n)}function cD(t,e,n,r,i){r!==null?jd(t,e,n,r,i):iT(t,e,n)}function oT(t,e){return t.parentNode(e)}function FO(t,e){return t.nextSibling(e)}function VO(t,e,n){return jO(t,e,n)}function LO(t,e,n){return t.type&40?yn(t,n):null}var jO=LO,uD;function Ry(t,e,n,r){let i=OO(t,r,e),o=e[ft],s=r.parent||e[Nn],a=VO(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)cD(o,i,n[u],a,!1);else cD(o,i,n,a,!1);uD!==void 0&&uD(o,r,e,n,i)}function bc(t,e){if(e!==null){let n=e.type;if(n&3)return yn(e,t);if(n&4)return Bm(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return bc(t,r);{let i=t[e.index];return Sr(i)?Bm(-1,i):Yn(i)}}else{if(n&128)return bc(t,e.next);if(n&32)return xy(e,t)()||Yn(t[e.index]);{let r=sT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=no(t[Kn]);return bc(i,r)}else return bc(t,e.next)}}}return null}function sT(t,e){if(e!==null){let r=t[Kn][Nn],i=e.projection;return r.projection[i]}return null}function Bm(t,e){let n=gn+t+1;if(n<e.length){let r=e[n],i=r[ve].firstChild;if(i!==null)return bc(r,i)}return e[to]}function UO(t,e,n){t.removeChild(null,e,n)}function Ny(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&oo(Yn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Ny(t,e,n.child,r,i,o,!1),_s(e,t,i,a,o);else if(u&32){let l=xy(n,r),h;for(;h=l();)_s(e,t,i,h,o);_s(e,t,i,a,o)}else u&16?BO(t,e,r,n,i,o):_s(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ih(t,e,n,r,i,o){Ny(n,r,t.firstChild,e,i,o,!1)}function BO(t,e,n,r,i,o){let s=n[Kn],u=s[Nn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];_s(e,t,i,h,o)}else{let l=u,h=s[Ut];$b(r)&&(l.flags|=128),Ny(t,e,l,h,i,o,!0)}}function $O(t,e,n,r,i){let o=n[to],s=Yn(n);o!==s&&_s(e,t,r,o,i);for(let a=gn;a<n.length;a++){let u=n[a];ih(u[ve],u,t,e,r,o)}}function HO(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Ir.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ir.Important),t.setStyle(n,r,i,o))}}function qO(t,e,n){t.setAttribute(e,"style",n)}function aT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function cT(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Im(t,e,r),i!==null&&aT(t,e,i),o!==null&&qO(t,e,o)}var li={};function ne(t=1){uT(Zt(),Ne(),Vs()+t,!1)}function uT(t,e,n,r){if(!r)if((e[ae]&3)===3){let o=t.preOrderCheckHooks;o!==null&&vd(e,o,n)}else{let o=t.preOrderHooks;o!==null&&_d(e,o,0,n)}ro(n)}function oe(t,e=ge.Default){let n=Ne();if(n===null)return q(t,e);let r=Bt();return Ob(r,n,Lt(t),e)}function lT(t,e,n,r,i,o){let s=Ce(null);try{let a=null;i&oi.SignalBased&&(a=e[r][yr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&oi.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):rb(e,a,r,o)}finally{Ce(s)}}function zO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ro(~i);else{let o=i,s=n[++r],a=n[++r];RP(s,o);let u=e[o];a(2,u)}}}finally{ro(-1)}}function oh(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Ar]=i,p[ae]=r|4|128|8|64,(l!==null||t&&t[ae]&2048)&&(p[ae]|=2048),lb(p),p[Ut]=p[Os]=t,p[Rn]=n,p[Wn]=s||t&&t[Wn],p[ft]=a||t&&t[ft],p[bs]=u||t&&t[bs]||null,p[Nn]=o,p[Zd]=dO(),p[Td]=h,p[eb]=l,p[Kn]=e.type==2?t[Kn]:p,p}function sh(t,e,n,r,i){let o=t.data[e];if(o===null)o=GO(t,e,n,r,i),MP()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=TP();o.injectorIndex=s===null?-1:s.injectorIndex}return Vc(o,!0),o}function GO(t,e,n,r,i){let o=gb(),s=mb(),a=s?o:o&&o.parent,u=t.data[e]=ZO(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function dT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function hT(t,e,n,r,i){let o=Vs(),s=r&2;try{ro(-1),s&&e.length>Qn&&uT(t,e,Qn,!1),qn(s?2:0,i),n(r,i)}finally{ro(o),qn(s?3:1,i)}}function fT(t,e,n){if(nb(e)){let r=Ce(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{Ce(r)}}}function pT(t,e,n){pb()&&(rk(t,e,n,yn(n,e)),(n.flags&64)===64&&wT(t,e,n))}function gT(t,e,n=yn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function mT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Py(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Py(t,e,n,r,i,o,s,a,u,l,h){let p=Qn+r,g=p+i,y=WO(p,g),C=typeof l=="function"?l():l;return y[ve]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function WO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:li);return n}function KO(t,e,n,r){let o=r.get(vO,Kb)||n===Gn.ShadowDom,s=t.selectRootElement(e,o);return QO(s),s}function QO(t){YO(t)}var YO=()=>null;function ZO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return CP()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lD(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=oi.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?dD(r,n,l,a,u):dD(r,n,l,a)}return r}function dD(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function JO(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],g=n?n.get(p):null,y=g?g.inputs:null,C=g?g.outputs:null;u=lD(0,p.inputs,h,u,y),l=lD(1,p.outputs,h,l,C);let S=u!==null&&s!==null&&!uy(e)?pk(u,h,s):null;a.push(S)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function XO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function yT(t,e,n,r,i,o,s,a){let u=yn(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Oy(t,n,h,r,i),Jd(e)&&ek(n,e.index)):e.type&3?(r=XO(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function ek(t,e){let n=ci(e,t);n[ae]&16||(n[ae]|=64)}function vT(t,e,n,r){if(pb()){let i=r===null?null:{"":-1},o=ok(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&_T(t,e,n,s,i,a),i&&sk(n,r,i)}n.mergedAttrs=xc(n.mergedAttrs,n.attrs)}function _T(t,e,n,r,i,o){for(let l=0;l<r.length;l++)Nm(kd(n,e),t,r[l].type);ck(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=dT(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=xc(n.mergedAttrs,h.hostAttrs),uk(t,n,e,u,h),ak(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}JO(t,n,o)}function tk(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;nk(s)!=a&&s.push(a),s.push(n,r,o)}}function nk(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function rk(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Jd(n)&&lk(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||kd(n,e),oo(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],l=Ss(e,t,a,n);if(oo(l,e),s!==null&&fk(e,a-i,l,u,n,s),si(u)){let h=ci(n.index,e);h[Rn]=Ss(e,t,a,n)}}}function wT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=NP();try{ro(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];xm(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&ik(u,l)}}finally{ro(-1),xm(s)}}function ik(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function ok(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(qN(e,s.selectors,!1))if(r||(r=[]),si(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;$m(t,e,u)}else r.unshift(s),$m(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function $m(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function sk(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new J(-301,!1);r.push(e[i],o)}}}function ak(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;si(e)&&(n[""]=t)}}function ck(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function uk(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Xi(i.type,!0)),s=new io(o,si(i),oe);t.blueprint[r]=s,n[r]=s,tk(t,e,r,dT(t,n,i.hostVars,li),i)}function lk(t,e,n){let r=yn(e,t),i=mT(n),o=t[Wn].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=ah(t,oh(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function dk(t,e,n,r,i,o){let s=yn(t,e);hk(e[ft],s,o,t.value,n,r,i)}function hk(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Kd(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function fk(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];lT(r,n,u,l,h,p)}}function pk(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function ET(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function IT(t,e){let n=t.contentQueries;if(n!==null){let r=Ce(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];_b(o),a.contentQueries(2,e[s],s)}}}finally{Ce(r)}}}function ah(t,e){return t[Rc]?t[YC][Mn]=e:t[Rc]=e,t[YC]=e,e}function Hm(t,e,n){_b(0);let r=Ce(null);try{e(t,n)}finally{Ce(r)}}function gk(t){return t[Ad]??=[]}function mk(t){return t.cleanup??=[]}function CT(t,e){let n=t[bs],r=n?n.get(Er,null):null;r&&r.handleError(e)}function Oy(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],l=e[s],h=t.data[s];lT(h,l,r,a,u,i)}}function yk(t,e,n){let r=cb(e,t);AO(t[ft],r,n)}function vk(t,e){let n=ci(e,t),r=n[ve];_k(r,n);let i=n[Ar];i!==null&&n[Td]===null&&(n[Td]=Ay(i,n[bs])),ky(r,n,n[Rn])}function _k(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ky(t,e,n){py(e);try{let r=t.viewQuery;r!==null&&Hm(1,r,n);let i=t.template;i!==null&&hT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[As]?.finishViewCreation(t),t.staticContentQueries&&IT(t,e),t.staticViewQueries&&Hm(2,t.viewQuery,n);let o=t.components;o!==null&&wk(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ae]&=-5,gy()}}function wk(t,e){for(let n=0;n<e.length;n++)vk(t,e[n])}function Ek(t,e,n,r){let i=Ce(null);try{let o=e.tView,a=t[ae]&4096?4096:16,u=oh(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Ts]=l;let h=t[As];return h!==null&&(u[As]=h.createEmbeddedView(o)),ky(o,u,n),u}finally{Ce(i)}}function hD(t,e){return!e||e.firstChild===null||$b(t)}function Ik(t,e,n,r=!0){let i=e[ve];if(RO(i,e,t,n),r){let s=Bm(n,t),a=e[ft],u=oT(a,t[to]);u!==null&&xO(i,t[Nn],a,e,u,s)}let o=e[Td];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ud(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Yn(o)),Sr(o)&&Ck(o,r);let s=n.type;if(s&8)Ud(t,e,n.child,r);else if(s&32){let a=xy(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=sT(e,n);if(Array.isArray(a))r.push(...a);else{let u=no(e[Kn]);Ud(u[ve],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Ck(t,e){for(let n=gn;n<t.length;n++){let r=t[n],i=r[ve].firstChild;i!==null&&Ud(r[ve],r,i,e)}t[to]!==t[Ar]&&e.push(t[to])}var DT=[];function Dk(t){return t[pn]??bk(t)}function bk(t){let e=DT.pop()??Object.create(Ak);return e.lView=t,e}function Tk(t){t.lView[pn]!==t&&(t.lView=null,DT.push(t))}var Ak=ye($({},yc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{eh(t.lView)},consumerOnSignalRead(){this.lView[pn]=this}});function Sk(t){let e=t[pn]??Object.create(xk);return e.lView=t,e}var xk=ye($({},yc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=no(t.lView);for(;e&&!bT(e[ve]);)e=no(e);e&&db(e)},consumerOnSignalRead(){this.lView[pn]=this}});function bT(t){return t.type!==2}var Mk=100;function TT(t,e=!0,n=0){let r=t[Wn],i=r.rendererFactory,o=!1;o||i.begin?.();try{Rk(t,n)}catch(s){throw e&&CT(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function Rk(t,e){let n=yb();try{JC(!0),qm(t,e);let r=0;for(;Xd(t);){if(r===Mk)throw new J(103,!1);r++,qm(t,1)}}finally{JC(n)}}function Nk(t,e,n,r){let i=e[ae];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Wn].inlineEffectRunner?.flush(),py(e);let a=!0,u=null,l=null;o||(bT(t)?(l=Dk(e),u=kl(l)):oC()===null?(a=!1,l=Sk(e),u=kl(l)):e[pn]&&(Lg(e[pn]),e[pn]=null));try{lb(e),SP(t.bindingStartIndex),n!==null&&hT(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&vd(e,y,null)}else{let y=t.preOrderHooks;y!==null&&_d(e,y,0,null),cm(e,0)}if(s||Pk(e),AT(e,0),t.contentQueries!==null&&IT(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&vd(e,y)}else{let y=t.contentHooks;y!==null&&_d(e,y,1),cm(e,1)}zO(t,e);let p=t.components;p!==null&&xT(e,p,0);let g=t.viewQuery;if(g!==null&&Hm(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&vd(e,y)}else{let y=t.viewHooks;y!==null&&_d(e,y,2),cm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[am]){for(let y of e[am])y();e[am]=null}o||(e[ae]&=-73)}catch(h){throw o||eh(e),h}finally{l!==null&&(Fg(l,u),a&&Tk(l)),gy()}}function AT(t,e){for(let n=qb(t);n!==null;n=zb(n))for(let r=gn;r<n.length;r++){let i=n[r];ST(i,e)}}function Pk(t){for(let e=qb(t);e!==null;e=zb(e)){if(!(e[ae]&Md.HasTransplantedViews))continue;let n=e[xd];for(let r=0;r<n.length;r++){let i=n[r];db(i)}}}function Ok(t,e,n){let r=ci(e,t);ST(r,n)}function ST(t,e){fy(t)&&qm(t,e)}function qm(t,e){let r=t[ve],i=t[ae],o=t[pn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Vg(o)),s||=!1,o&&(o.dirty=!1),t[ae]&=-9217,s)Nk(r,t,r.template,t[Rn]);else if(i&8192){AT(t,1);let a=r.components;a!==null&&xT(t,a,1)}}function xT(t,e,n){for(let r=0;r<e.length;r++)Ok(t,e[r],n)}function Fy(t,e){let n=yb()?64:1088;for(t[Wn].changeDetectionScheduler?.notify(e);t;){t[ae]|=n;let r=no(t);if(Tm(t)&&!r)return t;t=r}return null}var so=class{get rootNodes(){let e=this._lView,n=e[ve];return Ud(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Rn]}set context(e){this._lView[Rn]=e}get destroyed(){return(this._lView[ae]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ut];if(Sr(e)){let n=e[Sd],r=n?n.indexOf(this):-1;r>-1&&(Um(e,r),Dd(n,r))}this._attachedToViewContainer=!1}rT(this._lView[ve],this._lView)}onDestroy(e){hb(this._lView,e)}markForCheck(){Fy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ae]&=-129}reattach(){Sm(this._lView),this._lView[ae]|=128}detectChanges(){this._lView[ae]|=1024,TT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Tm(this._lView),n=this._lView[Ts];n!==null&&!e&&My(n,this._lView),tT(this._lView[ve],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e;let n=Tm(this._lView),r=this._lView[Ts];r!==null&&!n&&nT(r,this._lView),Sm(this._lView)}},ch=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Vk;let t=e;return t})(),kk=ch,Fk=class extends kk{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Ek(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new so(i)}};function Vk(){return Lk(Bt(),Ne())}function Lk(t,e){return t.type&4?new Fk(e,t,nh(t,e)):null}var f8=new RegExp(`^(\\d+)*(${mO}|${gO})*(.*)`);var jk=()=>null;function fD(t,e){return jk(t,e)}var xs=class{},Vy=new W("",{providedIn:"root",factory:()=>!1});var MT=new W(""),RT=new W(""),zm=class{},Bd=class{};function Uk(t){let e=Error(`No component factory found for ${jt(t)}.`);return e[Bk]=t,e}var Bk="ngComponent";var Gm=class{resolveComponentFactory(e){throw Uk(e)}},zy=class zy{};zy.NULL=new Gm;var Ms=zy,Rs=class{},di=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>$k();let t=e;return t})();function $k(){let t=Ne(),e=Bt(),n=ci(e.index,t);return(ii(n)?n:t)[ft]}var Hk=(()=>{let e=class e{};e.\u0275prov=X({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();function Wm(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=UC(i,a);else if(o==2){let u=a,l=e[++s];r=UC(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var $d=class extends Ms{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=eo(e);return new Nc(n,this.ngModule)}};function pD(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:oi.None;e?n.push({propName:s,templateName:r,isSignal:(a&oi.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function qk(t){let e=t.toLowerCase();return e==="svg"?ab:e==="math"?gP:null}var Nc=class extends Bd{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=pD(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return pD(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=KN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=Ce(null);try{i=i||this.ngModule;let s=i instanceof mn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Mm(e,s):e,u=a.get(Rs,null);if(u===null)throw new J(407,!1);let l=a.get(Hk,null),h=a.get(xs,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},g=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",C=r?KO(g,r,this.componentDef.encapsulation,a):eT(g,y,qk(y)),S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let x=null;C!==null&&(x=Ay(C,a,!0));let L=Py(0,null,null,1,0,null,null,null,null,null,null),H=oh(null,L,null,S,null,null,p,g,a,null,x);py(H);let V,Q,re=null;try{let Z=this.componentDef,E,v=null;Z.findHostDirectiveDefs?(E=[],v=new Map,Z.findHostDirectiveDefs(Z,E,v),E.push(Z)):E=[Z];let w=zk(H,C);re=Gk(w,C,Z,E,H,p,g),Q=ub(L,Qn),C&&Qk(g,Z,C,r),n!==void 0&&Yk(Q,this.ngContentSelectors,n),V=Kk(re,Z,E,v,H,[Zk]),ky(L,H,null)}catch(Z){throw re!==null&&Lm(re),Lm(H),Z}finally{gy()}return new Km(this.componentType,V,nh(Q,H),H,Q)}finally{Ce(o)}}},Km=class extends zm{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new so(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Oy(o[ve],o,i,e,n),this.previousInputValues.set(e,n);let s=ci(this._tNode.index,o);Fy(s,1)}}get injector(){return new Ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function zk(t,e){let n=t[ve],r=Qn;return t[r]=e,sh(n,r,2,"#host",null)}function Gk(t,e,n,r,i,o,s){let a=i[ve];Wk(r,t,e,s);let u=null;e!==null&&(u=Ay(e,i[bs]));let l=o.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=oh(i,mT(n),null,h,i[t.index],t,o,l,null,null,u);return a.firstCreatePass&&$m(a,t,r.length-1),ah(i,p),i[t.index]=p}function Wk(t,e,n,r){for(let i of t)e.mergedAttrs=xc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Wm(e,e.mergedAttrs,!0),n!==null&&cT(r,n,e))}function Kk(t,e,n,r,i,o){let s=Bt(),a=i[ve],u=yn(s,i);_T(a,i,s,n,null,r);for(let h=0;h<n.length;h++){let p=s.directiveStart+h,g=Ss(i,a,p,s);oo(g,i)}wT(a,i,s),u&&oo(u,i);let l=Ss(i,a,s.directiveStart+s.componentOffset,s);if(t[Rn]=i[Rn]=l,o!==null)for(let h of o)h(l,e);return fT(a,s,i),l}function Qk(t,e,n,r){if(r)Im(t,n,["ng-version","18.2.2"]);else{let{attrs:i,classes:o}=QN(e.selectors[0]);i&&Im(t,n,i),o&&o.length>0&&aT(t,n,o.join(" "))}}function Yk(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function Zk(){let t=Bt();_y(Ne()[ve],t)}var js=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Jk;let t=e;return t})();function Jk(){let t=Bt();return eF(t,Ne())}var Xk=js,NT=class extends Xk{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return nh(this._hostTNode,this._hostLView)}get injector(){return new Ji(this._hostTNode,this._hostLView)}get parentInjector(){let e=wy(this._hostTNode,this._hostLView);if(Sb(e)){let n=Pd(e,this._hostLView),r=Nd(e),i=n[ve].data[r+8];return new Ji(i,n)}else return new Ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=gD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-gn}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=fD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,hD(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!dP(e),a;if(s)a=n;else{let C=n||{};a=C.index,r=C.injector,i=C.projectableNodes,o=C.environmentInjector||C.ngModuleRef}let u=s?e:new Nc(eo(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let S=(s?l:this.parentInjector).get(mn,null);S&&(o=S)}let h=eo(u.componentType??{}),p=fD(this._lContainer,h?.id??null),g=p?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,hD(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(yP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ut],l=new NT(u,u[Nn],u[Ut]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Ik(s,i,o,r),e.attachToViewContainerRef(),VD(fm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=gD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Um(this._lContainer,n);r&&(Dd(fm(this._lContainer),n),rT(r[ve],r))}detach(e){let n=this._adjustIndex(e,-1),r=Um(this._lContainer,n);return r&&Dd(fm(this._lContainer),n)!=null?new so(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function gD(t){return t[Sd]}function fm(t){return t[Sd]||(t[Sd]=[])}function eF(t,e){let n,r=e[t.index];return Sr(r)?n=r:(n=ET(r,e,null,t),e[t.index]=n,ah(e,n)),nF(n,e,t,r),new NT(n,t,e)}function tF(t,e){let n=t[ft],r=n.createComment(""),i=yn(e,t),o=oT(n,i);return jd(n,o,r,FO(n,i),!1),r}var nF=oF,rF=()=>!1;function iF(t,e,n){return rF(t,e,n)}function oF(t,e,n,r){if(t[to])return;let i;n.type&8?i=Yn(r):i=tF(e,n),t[to]=i}var mD=new Set;function Uc(t){mD.has(t)||(mD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function sF(t){return typeof t=="function"&&t[yr]!==void 0}function Bc(t,e){Uc("NgSignals");let n=mC(t),r=n[yr];return e?.equal&&(r.equal=e.equal),n.set=i=>jg(r,i),n.update=i=>yC(r,i),n.asReadonly=aF.bind(n),n}function aF(){let t=this[yr];if(t.readonlyFn===void 0){let e=()=>this();e[yr]=t,t.readonlyFn=e}return t.readonlyFn}function PT(t){return sF(t)&&typeof t.set=="function"}function cF(t){return Object.getPrototypeOf(t.prototype).constructor}function hi(t){let e=cF(t.type),n=!0,r=[t];for(;e;){let i;if(si(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new J(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=pd(t.inputs),s.inputTransforms=pd(t.inputTransforms),s.declaredInputs=pd(t.declaredInputs),s.outputs=pd(t.outputs);let a=i.hostBindings;a&&fF(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&dF(t,u),l&&hF(t,l),uF(t,i),mN(t.outputs,i.outputs),si(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===hi&&(n=!1)}}e=Object.getPrototypeOf(e)}lF(r)}function uF(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function lF(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xc(i.hostAttrs,n=xc(n,i.hostAttrs))}}function pd(t){return t===Is?{}:t===fn?[]:t}function dF(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function hF(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function fF(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Ly(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var ai=class{},Pc=class{};var Qm=class extends ai{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $d(this);let o=WD(e);this._bootstrapComponents=Xb(o.bootstrap),this._r3Injector=Vb(e,n,[{provide:ai,useValue:this},{provide:Ms,useValue:this.componentFactoryResolver},...r],jt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ym=class extends Pc{constructor(e){super(),this.moduleType=e}create(e){return new Qm(this.moduleType,e,[])}};var Hd=class extends ai{constructor(e){super(),this.componentFactoryResolver=new $d(this),this.instance=null;let n=new Mc([...e.providers,{provide:ai,useValue:this},{provide:Ms,useValue:this.componentFactoryResolver}],e.parent||dy(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function jy(t,e,n=null){return new Hd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function OT(t){return gF(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function pF(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function gF(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function kT(t,e,n){return t[e]=n}function mF(t,e){return t[e]}function ao(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function yF(t,e,n,r){let i=ao(t,e,n);return ao(t,e+1,r)||i}function vF(t){return(t.flags&32)===32}function _F(t,e,n,r,i,o,s,a,u){let l=e.consts,h=sh(e,t,4,s||null,a||null);vT(e,n,h,Rd(l,u)),_y(e,h);let p=h.tView=Py(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function wF(t,e,n,r,i,o,s,a,u,l){let h=n+Qn,p=e.firstCreatePass?_F(h,e,t,r,i,o,s,a,u):e.data[h];Vc(p,!1);let g=EF(e,t,p,n);yy()&&Ry(e,t,g,p),oo(g,t);let y=ET(g,t,g,p);return t[h]=y,ah(t,y),iF(y,p,t),hy(p)&&pT(e,t,p),u!=null&&gT(t,p,l),p}function nn(t,e,n,r,i,o,s,a){let u=Ne(),l=Zt(),h=Rd(l.consts,o);return wF(u,l,t,e,n,r,i,h,s,a),nn}var EF=IF;function IF(t,e,n,r){return vy(!0),e[ft].createComment("")}var Tc=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Tc||{}),CF=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=X({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})(),Yi=class Yi{constructor(){this.ngZone=G(De),this.scheduler=G(xs),this.errorHandler=G(Er,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of Yi.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};Yi.PHASES=[Tc.EarlyRead,Tc.Write,Tc.MixedReadWrite,Tc.Read],Yi.\u0275prov=X({token:Yi,providedIn:"root",factory:()=>new Yi});var yD=Yi;function uh(t,e,n,r){let i=Ne(),o=th();if(ao(i,o,e)){let s=Zt(),a=my();dk(a,i,t,e,n,r)}return uh}function DF(t,e,n,r){return ao(t,th(),n)?e+Kd(n)+r:li}function gd(t,e){return t<<17|e<<2}function co(t){return t>>17&32767}function bF(t){return(t&2)==2}function TF(t,e){return t&131071|e<<17}function Zm(t){return t|2}function Ns(t){return(t&131068)>>2}function pm(t,e){return t&-131069|e<<2}function AF(t){return(t&1)===1}function Jm(t){return t|1}function SF(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=co(s),u=Ns(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Fc(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=co(t[a+1]);t[r+1]=gd(g,a),g!==0&&(t[g+1]=pm(t[g+1],r)),t[a+1]=TF(t[a+1],r)}else t[r+1]=gd(a,0),a!==0&&(t[a+1]=pm(t[a+1],r)),a=r;else t[r+1]=gd(u,0),a===0?a=r:t[u+1]=pm(t[u+1],r),u=r;l&&(t[r+1]=Zm(t[r+1])),vD(t,h,r,!0),vD(t,h,r,!1),xF(e,h,t,r,o),s=gd(a,u),o?e.classBindings=s:e.styleBindings=s}function xF(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Fc(o,e)>=0&&(n[r+1]=Jm(n[r+1]))}function vD(t,e,n,r){let i=t[n+1],o=e===null,s=r?co(i):Ns(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];MF(u,e)&&(a=!0,t[s+1]=r?Jm(l):Zm(l)),s=r?co(l):Ns(l)}a&&(t[n+1]=r?Zm(i):Jm(i))}function MF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Fc(t,e)>=0:!1}function fe(t,e,n){let r=Ne(),i=th();if(ao(r,i,e)){let o=Zt(),s=my();yT(o,s,r,t,e,r[ft],n,!1)}return fe}function _D(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Oy(t,n,o[s],s,r)}function lh(t,e){return RF(t,e,null,!0),lh}function RF(t,e,n,r){let i=Ne(),o=Zt(),s=xP(2);if(o.firstUpdatePass&&PF(o,t,s,r),e!==li&&ao(i,s,e)){let a=o.data[Vs()];LF(o,a,i,i[ft],t,i[s+1]=jF(e,n),r,s)}}function NF(t,e){return e>=t.expandoStartIndex}function PF(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Vs()],s=NF(t,n);UF(o,r)&&e===null&&!s&&(e=!1),e=OF(i,o,e,r),SF(i,o,e,n,s,r)}}function OF(t,e,n,r){let i=PP(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=gm(null,t,e,n,r),n=Oc(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=gm(i,t,e,n,r),o===null){let u=kF(t,e,r);u!==void 0&&Array.isArray(u)&&(u=gm(null,t,e,u[1],r),u=Oc(u,e.attrs,r),FF(t,e,r,u))}else o=VF(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function kF(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ns(r)!==0)return t[co(r)]}function FF(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[co(i)]=r}function VF(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Oc(r,s,n)}return Oc(r,e.attrs,n)}function gm(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Oc(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Oc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),FN(t,s,n?!0:e[++o]))}return t===void 0?null:t}function LF(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=AF(l)?wD(u,e,n,i,Ns(l),s):void 0;if(!qd(h)){qd(o)||bF(l)&&(o=wD(u,null,n,i,a,s));let p=cb(Vs(),n);HO(r,s,p,i,o)}}function wD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===li&&(g=p?fn:void 0);let y=p?om(g,r):h===r?g:void 0;if(l&&!qd(y)&&(y=om(u,r)),qd(y)&&(a=y,s))return a;let C=t[i+1];i=s?co(C):Ns(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=om(u,r))}return a}function qd(t){return t!==void 0}function jF(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=jt(jc(t)))),t}function UF(t,e){return(t.flags&(e?8:16))!==0}function BF(t,e,n,r,i,o){let s=e.consts,a=Rd(s,i),u=sh(e,t,2,r,a);return vT(e,n,u,Rd(s,o)),u.attrs!==null&&Wm(u,u.attrs,!1),u.mergedAttrs!==null&&Wm(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function O(t,e,n,r){let i=Ne(),o=Zt(),s=Qn+t,a=i[ft],u=o.firstCreatePass?BF(s,o,i,e,n,r):o.data[s],l=$F(o,i,u,a,e,t);i[s]=l;let h=hy(u);return Vc(u,!0),cT(a,l,u),!vF(u)&&yy()&&Ry(o,i,l,u),wP()===0&&oo(l,i),EP(),h&&(pT(o,i,u),fT(o,u,i)),r!==null&&gT(i,u),O}function F(){let t=Bt();mb()?AP():(t=t.parent,Vc(t,!1));let e=t;DP(e)&&bP(),IP();let n=Zt();return n.firstCreatePass&&(_y(n,t),nb(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&BP(e)&&_D(n,e,Ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&$P(e)&&_D(n,e,Ne(),e.stylesWithoutHost,!1),F}function be(t,e,n,r){return O(t,e,n,r),F(),be}var $F=(t,e,n,r,i,o)=>(vy(!0),eT(r,i,VP()));function Us(){return Ne()}var Ki=void 0;function HF(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var qF=["en",[["a","p"],["AM","PM"],Ki],[["AM","PM"],Ki,Ki],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ki,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ki,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ki,"{1} 'at' {0}",Ki],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",HF],mm={};function vn(t){let e=zF(t),n=ED(e);if(n)return n;let r=e.split("-")[0];if(n=ED(r),n)return n;if(r==="en")return qF;throw new J(701,!1)}function ED(t){return t in mm||(mm[t]=Zi.ng&&Zi.ng.common&&Zi.ng.common.locales&&Zi.ng.common.locales[t]),mm[t]}var Ze=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Ze||{});function zF(t){return t.toLowerCase().replace(/_/g,"-")}var zd="en-US";var GF=zd;function WF(t){typeof t=="string"&&(GF=t.toLowerCase().replace(/_/g,"-"))}var KF=(t,e,n)=>{};function Je(t,e,n,r){let i=Ne(),o=Zt(),s=Bt();return FT(o,i,i[ft],s,t,e,r),Je}function QF(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Ad],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function FT(t,e,n,r,i,o,s){let a=hy(r),l=t.firstCreatePass&&mk(t),h=e[Rn],p=gk(e),g=!0;if(r.type&3||s){let S=yn(r,e),x=s?s(S):S,L=p.length,H=s?Q=>s(Yn(Q[r.index])):r.index,V=null;if(!s&&a&&(V=QF(t,e,i,r.index)),V!==null){let Q=V.__ngLastListenerFn__||V;Q.__ngNextListenerFn__=o,V.__ngLastListenerFn__=o,g=!1}else{o=CD(r,e,h,o),KF(S,i,o);let Q=n.listen(x,i,o);p.push(o,Q),l&&l.push(i,H,L,L+1)}}else o=CD(r,e,h,o);let y=r.outputs,C;if(g&&y!==null&&(C=y[i])){let S=C.length;if(S)for(let x=0;x<S;x+=2){let L=C[x],H=C[x+1],re=e[L][H].subscribe(o),Z=p.length;p.push(o,re),l&&l.push(i,r.index,Z,-(Z+1))}}}function ID(t,e,n,r){let i=Ce(null);try{return qn(6,e,n),n(r)!==!1}catch(o){return CT(t,o),!1}finally{qn(7,e,n),Ce(i)}}function CD(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?ci(t.index,e):e;Fy(s,5);let a=ID(e,n,r,o),u=i.__ngNextListenerFn__;for(;u;)a=ID(e,n,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function rn(t=1){return kP(t)}function YF(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function z(t,e=""){let n=Ne(),r=Zt(),i=t+Qn,o=r.firstCreatePass?sh(r,i,1,e,null):r.data[i],s=ZF(r,n,o,e,t);n[i]=s,yy()&&Ry(r,n,s,o),Vc(o,!1)}var ZF=(t,e,n,r,i)=>(vy(!0),TO(e[ft],r));function lo(t){return _n("",t,""),lo}function _n(t,e,n){let r=Ne(),i=DF(r,t,e,n);return i!==li&&yk(r,Vs(),i),_n}function Jn(t,e,n){PT(e)&&(e=e());let r=Ne(),i=th();if(ao(r,i,e)){let o=Zt(),s=my();yT(o,s,r,t,e,r[ft],n,!1)}return Jn}function Mr(t,e){let n=PT(t);return n&&t.set(e),n}function Xn(t,e){let n=Ne(),r=Zt(),i=Bt();return FT(r,n,n[ft],i,t,e),Xn}function JF(t,e,n){let r=Zt();if(r.firstCreatePass){let i=si(t);Xm(n,r.data,r.blueprint,i,!0),Xm(e,r.data,r.blueprint,i,!1)}}function Xm(t,e,n,r,i){if(t=Lt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Xm(t[o],e,n,r,i);else{let o=Zt(),s=Ne(),a=Bt(),u=Ds(t)?t:Lt(t.provide),l=XD(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Ds(t)||!t.multi){let y=new io(l,i,oe),C=vm(u,e,i?h:h+g,p);C===-1?(Nm(kd(a,s),o,u),ym(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[C]=y,s[C]=y)}else{let y=vm(u,e,h+g,p),C=vm(u,e,h,h+g),S=y>=0&&n[y],x=C>=0&&n[C];if(i&&!x||!i&&!S){Nm(kd(a,s),o,u);let L=tV(i?eV:XF,n.length,i,r,l);!i&&x&&(n[C].providerFactory=L),ym(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(L),s.push(L)}else{let L=VT(n[i?C:y],l,!i&&r);ym(o,t,y>-1?y:C,L)}!i&&r&&x&&n[C].componentProviders++}}}function ym(t,e,n,r){let i=Ds(e),o=rP(e);if(i||o){let u=(o?Lt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function VT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function vm(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function XF(t,e,n,r){return ey(this.multi,[])}function eV(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Ss(n,n[ve],this.providerFactory.index,r);o=a.slice(0,s),ey(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],ey(i,o);return o}function ey(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function tV(t,e,n,r,i){let o=new io(t,n,oe);return o.multi=[],o.index=e,o.componentProviders=0,VT(o,i,r&&!n),o}function dh(t,e=[]){return n=>{n.providersResolver=(r,i)=>JF(r,i?i(t):t,e)}}var nV=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=YD(!1,r.type),o=i.length>0?jy([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=X({token:e,providedIn:"environment",factory:()=>new e(q(mn))});let t=e;return t})();function vt(t){Uc("NgStandalone"),t.getStandaloneInjector=e=>e.get(nV).getOrCreateStandaloneInjector(t)}function pt(t,e,n){let r=vb()+t,i=Ne();return i[r]===li?kT(i,r,n?e.call(n):e()):mF(i,r)}function rV(t,e){let n=t[e];return n===li?void 0:n}function iV(t,e,n,r,i,o,s){let a=e+n;return yF(t,a,i,o)?kT(t,a+2,s?r.call(s,i,o):r(i,o)):rV(t,a+2)}function LT(t,e){let n=Zt(),r,i=t+Qn;n.firstCreatePass?(r=oV(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Xi(r.type,!0)),s,a=Qt(oe);try{let u=Od(!1),l=o();return Od(u),YF(n,Ne(),i,l),l}finally{Qt(a)}}function oV(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function jT(t,e,n,r){let i=t+Qn,o=Ne(),s=mP(o,i);return sV(o,i)?iV(o,vb(),e,s.transform,n,r,s):s.transform(n,r)}function sV(t,e){return t[ve].data[e].pure}var Cr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Uy=new Cr("18.2.2");var hh=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var UT=new W("");function ho(t){return!!t&&typeof t.then=="function"}function BT(t){return!!t&&typeof t.subscribe=="function"}var $T=new W(""),HT=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=G($T,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(ho(s))r.push(s);else if(BT(s)){let a=new Promise((u,l)=>{s.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),By=new W("");function aV(){gC(()=>{throw new J(600,!1)})}function cV(t){return t.isBoundToModule}var uV=10;function lV(t,e,n){try{let r=n();return ho(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var fo=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=G(cO),this.afterRenderManager=G(CF),this.zonelessEnabled=G(Vy),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new $e,this.afterTick=new $e,this.componentTypes=[],this.components=[],this.isStable=G(Ls).hasPendingTasks.pipe(te(r=>!r)),this._injector=G(mn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Bd;if(!this._injector.get(HT).done){let y=!o&&GD(r),C=!1;throw new J(405,C)}let a;o?a=r:a=this._injector.get(Ms).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=cV(a)?void 0:this._injector.get(ai),l=i||a.selector,h=a.create(Yt.NULL,[],l,u),p=h.location.nativeElement,g=h.injector.get(UT,null);return g?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),wd(this.components,h),g?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new J(101,!1);let r=Ce(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Ce(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(Rs,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<uV;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:o,notifyErrorHandler:s}of this._views)dV(o,s,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>Xd(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;wd(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(By,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>wd(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new J(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wd(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function dV(t,e,n,r){if(!n&&!Xd(t))return;TT(t,e,n&&!r?0:1)}var ty=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},$y=(()=>{let e=class e{compileModuleSync(r){return new Ym(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=WD(r),s=Xb(o.declarations).reduce((a,u)=>{let l=eo(u);return l&&a.push(new Nc(l)),a},[]);return new ty(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hV=(()=>{let e=class e{constructor(){this.zone=G(De),this.changeDetectionScheduler=G(xs),this.applicationRef=G(fo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fV=new W("",{factory:()=>!1});function qT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new De(ye($({},GT()),{scheduleInRootZone:n})),[{provide:De,useFactory:t},{provide:Cs,multi:!0,useFactory:()=>{let r=G(hV,{optional:!0});return()=>r.initialize()}},{provide:Cs,multi:!0,useFactory:()=>{let r=G(pV);return()=>{r.initialize()}}},e===!0?{provide:MT,useValue:!0}:[],{provide:RT,useValue:n??Lb}]}function zT(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=qT({ngZoneFactory:()=>{let i=GT(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Uc("NgZone_CoalesceEvent"),new De(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Zn([{provide:fV,useValue:!0},{provide:Vy,useValue:!1},r])}function GT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var pV=(()=>{let e=class e{constructor(){this.subscription=new Ke,this.initialized=!1,this.zone=G(De),this.pendingTasks=G(Ls)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var gV=(()=>{let e=class e{constructor(){this.appRef=G(fo),this.taskService=G(Ls),this.ngZone=G(De),this.zonelessEnabled=G(Vy),this.disableScheduling=G(MT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ke,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Vd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(G(RT,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Vm||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?rD:Ub;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Vd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,rD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mV(){return typeof $localize<"u"&&$localize.locale||zd}var fh=new W("",{providedIn:"root",factory:()=>G(fh,ge.Optional|ge.SkipSelf)||mV()});var WT=new W("");function md(t){return!!t.platformInjector}function yV(t){let e=md(t)?t.r3Injector:t.moduleRef.injector,n=e.get(De);return n.run(()=>{md(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Er,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),md(t)){let o=()=>e.destroy(),s=t.platformInjector.get(WT);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else t.moduleRef.onDestroy(()=>{wd(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return lV(r,n,()=>{let o=e.get(HT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(fh,zd);if(WF(s||zd),md(t)){let a=e.get(fo);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return vV(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function vV(t,e){let n=t.injector.get(fo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new J(-403,!1);e.push(t)}var Ed=null;function _V(t=[],e){return Yt.create({name:e,providers:[{provide:Yd,useValue:"platform"},{provide:WT,useValue:new Set([()=>Ed=null])},...t]})}function wV(t=[]){if(Ed)return Ed;let e=_V(t);return Ed=e,aV(),EV(e),e}function EV(t){t.get(by,null)?.forEach(n=>n())}function Hy(){return!1}var po=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=IV;let t=e;return t})();function IV(t){return CV(Bt(),Ne(),(t&16)===16)}function CV(t,e,n){if(Jd(t)&&!n){let r=ci(t.index,e);return new so(r,r)}else if(t.type&175){let r=e[Kn];return new so(r,e)}return null}var ny=class{constructor(){}supports(e){return OT(e)}create(e){return new ry(e)}},DV=(t,e)=>e,ry=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||DV}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<DD(r,i,o)?n:r,a=DD(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,C=y+g;h<=C&&C<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!OT(e))throw new J(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,pF(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new iy(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Gd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Gd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},iy=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},oy=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Gd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new oy,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function DD(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function bD(){return new qy([new ny])}var qy=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||bD()),deps:[[e,new FD,new Mt]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new J(901,!1)}};e.\u0275prov=X({token:e,providedIn:"root",factory:bD});let t=e;return t})();function KT(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=wV(r),o=[qT({}),{provide:xs,useExisting:gV},...n||[]],s=new Hd({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return yV({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var QT=new W("");function go(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function $c(t,e){Uc("NgSignals");let n=hC(t);return e?.equal&&(n[yr].equal=e.equal),n}function Rr(t){let e=Ce(null);try{return t()}finally{Ce(e)}}var nA=null;function Or(){return nA}function rA(t){nA??=t}var Ih=class{};var sn=new W(""),iA=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>G(bV),providedIn:"platform"});let t=e;return t})();var bV=(()=>{let e=class e extends iA{constructor(){super(),this._doc=G(sn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Or().getBaseHref(this._doc)}onPopState(r){let i=Or().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Or().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function oA(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function YT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function mo(t){return t&&t[0]!=="?"?"?"+t:t}var Bs=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>G(sA),providedIn:"root"});let t=e;return t})(),TV=new W(""),sA=(()=>{let e=class e extends Bs{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??G(sn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return oA(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+mo(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+mo(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+mo(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(q(iA),q(TV,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Hc=(()=>{let e=class e{constructor(r){this._subject=new rt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=xV(YT(ZT(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+mo(i))}normalize(r){return e.stripTrailingSlash(SV(this._basePath,ZT(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+mo(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+mo(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=mo,e.joinWithSlash=oA,e.stripTrailingSlash=YT,e.\u0275fac=function(i){return new(i||e)(q(Bs))},e.\u0275prov=X({token:e,factory:()=>AV(),providedIn:"root"});let t=e;return t})();function AV(){return new Hc(q(Bs))}function SV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function ZT(t){return t.replace(/\/index.html$/,"")}function xV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var $t=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}($t||{}),ke=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(ke||{}),on=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(on||{}),fi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function MV(t){return vn(t)[Ze.LocaleId]}function RV(t,e,n){let r=vn(t),i=[r[Ze.DayPeriodsFormat],r[Ze.DayPeriodsStandalone]],o=wn(i,e);return wn(o,n)}function NV(t,e,n){let r=vn(t),i=[r[Ze.DaysFormat],r[Ze.DaysStandalone]],o=wn(i,e);return wn(o,n)}function PV(t,e,n){let r=vn(t),i=[r[Ze.MonthsFormat],r[Ze.MonthsStandalone]],o=wn(i,e);return wn(o,n)}function OV(t,e){let r=vn(t)[Ze.Eras];return wn(r,e)}function ph(t,e){let n=vn(t);return wn(n[Ze.DateFormat],e)}function gh(t,e){let n=vn(t);return wn(n[Ze.TimeFormat],e)}function mh(t,e){let r=vn(t)[Ze.DateTimeFormat];return wn(r,e)}function bh(t,e){let n=vn(t),r=n[Ze.NumberSymbols][e];if(typeof r>"u"){if(e===fi.CurrencyDecimal)return n[Ze.NumberSymbols][fi.Decimal];if(e===fi.CurrencyGroup)return n[Ze.NumberSymbols][fi.Group]}return r}function aA(t){if(!t[Ze.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Ze.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function kV(t){let e=vn(t);return aA(e),(e[Ze.ExtraData][2]||[]).map(r=>typeof r=="string"?Gy(r):[Gy(r[0]),Gy(r[1])])}function FV(t,e,n){let r=vn(t);aA(r);let i=[r[Ze.ExtraData][0],r[Ze.ExtraData][1]],o=wn(i,e)||[];return wn(o,n)||[]}function wn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function Gy(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var VV=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,yh={},LV=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Pr=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Pr||{}),xe=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(xe||{}),Se=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Se||{});function jV(t,e,n,r){let i=KV(t);e=Nr(n,e)||e;let s=[],a;for(;e;)if(a=LV.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=uA(r,u),i=WV(i,r,!0));let l="";return s.forEach(h=>{let p=zV(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Ch(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Nr(t,e){let n=MV(t);if(yh[n]??={},yh[n][e])return yh[n][e];let r="";switch(e){case"shortDate":r=ph(t,on.Short);break;case"mediumDate":r=ph(t,on.Medium);break;case"longDate":r=ph(t,on.Long);break;case"fullDate":r=ph(t,on.Full);break;case"shortTime":r=gh(t,on.Short);break;case"mediumTime":r=gh(t,on.Medium);break;case"longTime":r=gh(t,on.Long);break;case"fullTime":r=gh(t,on.Full);break;case"short":let i=Nr(t,"shortTime"),o=Nr(t,"shortDate");r=vh(mh(t,on.Short),[i,o]);break;case"medium":let s=Nr(t,"mediumTime"),a=Nr(t,"mediumDate");r=vh(mh(t,on.Medium),[s,a]);break;case"long":let u=Nr(t,"longTime"),l=Nr(t,"longDate");r=vh(mh(t,on.Long),[u,l]);break;case"full":let h=Nr(t,"fullTime"),p=Nr(t,"fullDate");r=vh(mh(t,on.Full),[h,p]);break}return r&&(yh[n][e]=r),r}function vh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Pn(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function UV(t,e){return Pn(t,3).substring(0,e)}function it(t,e,n=0,r=!1,i=!1){return function(o,s){let a=BV(t,o);if((n>0||a>-n)&&(a+=n),t===xe.Hours)a===0&&n===-12&&(a=12);else if(t===xe.FractionalSeconds)return UV(a,e);let u=bh(s,fi.MinusSign);return Pn(a,e,u,r,i)}}function BV(t,e){switch(t){case xe.FullYear:return e.getFullYear();case xe.Month:return e.getMonth();case xe.Date:return e.getDate();case xe.Hours:return e.getHours();case xe.Minutes:return e.getMinutes();case xe.Seconds:return e.getSeconds();case xe.FractionalSeconds:return e.getMilliseconds();case xe.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Ve(t,e,n=$t.Format,r=!1){return function(i,o){return $V(i,o,t,e,n,r)}}function $V(t,e,n,r,i,o){switch(n){case Se.Months:return PV(e,i,r)[t.getMonth()];case Se.Days:return NV(e,i,r)[t.getDay()];case Se.DayPeriods:let s=t.getHours(),a=t.getMinutes();if(o){let l=kV(e),h=FV(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[y,C]=g,S=s>=y.hours&&a>=y.minutes,x=s<C.hours||s===C.hours&&a<C.minutes;if(y.hours<C.hours){if(S&&x)return!0}else if(S||x)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return RV(e,i,r)[s<12?0:1];case Se.Eras:return OV(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new Error(`unexpected translation type ${u}`)}}function _h(t){return function(e,n,r){let i=-1*r,o=bh(n,fi.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Pr.Short:return(i>=0?"+":"")+Pn(s,2,o)+Pn(Math.abs(i%60),2,o);case Pr.ShortGMT:return"GMT"+(i>=0?"+":"")+Pn(s,1,o);case Pr.Long:return"GMT"+(i>=0?"+":"")+Pn(s,2,o)+":"+Pn(Math.abs(i%60),2,o);case Pr.Extended:return r===0?"Z":(i>=0?"+":"")+Pn(s,2,o)+":"+Pn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var HV=0,Eh=4;function qV(t){let e=Ch(t,HV,1).getDay();return Ch(t,0,1+(e<=Eh?Eh:Eh+7)-e)}function cA(t){let e=t.getDay(),n=e===0?-3:Eh-e;return Ch(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Wy(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=cA(n),s=qV(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Pn(i,t,bh(r,fi.MinusSign))}}function wh(t,e=!1){return function(n,r){let o=cA(n).getFullYear();return Pn(o,t,bh(r,fi.MinusSign),e)}}var Ky={};function zV(t){if(Ky[t])return Ky[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ve(Se.Eras,ke.Abbreviated);break;case"GGGG":e=Ve(Se.Eras,ke.Wide);break;case"GGGGG":e=Ve(Se.Eras,ke.Narrow);break;case"y":e=it(xe.FullYear,1,0,!1,!0);break;case"yy":e=it(xe.FullYear,2,0,!0,!0);break;case"yyy":e=it(xe.FullYear,3,0,!1,!0);break;case"yyyy":e=it(xe.FullYear,4,0,!1,!0);break;case"Y":e=wh(1);break;case"YY":e=wh(2,!0);break;case"YYY":e=wh(3);break;case"YYYY":e=wh(4);break;case"M":case"L":e=it(xe.Month,1,1);break;case"MM":case"LL":e=it(xe.Month,2,1);break;case"MMM":e=Ve(Se.Months,ke.Abbreviated);break;case"MMMM":e=Ve(Se.Months,ke.Wide);break;case"MMMMM":e=Ve(Se.Months,ke.Narrow);break;case"LLL":e=Ve(Se.Months,ke.Abbreviated,$t.Standalone);break;case"LLLL":e=Ve(Se.Months,ke.Wide,$t.Standalone);break;case"LLLLL":e=Ve(Se.Months,ke.Narrow,$t.Standalone);break;case"w":e=Wy(1);break;case"ww":e=Wy(2);break;case"W":e=Wy(1,!0);break;case"d":e=it(xe.Date,1);break;case"dd":e=it(xe.Date,2);break;case"c":case"cc":e=it(xe.Day,1);break;case"ccc":e=Ve(Se.Days,ke.Abbreviated,$t.Standalone);break;case"cccc":e=Ve(Se.Days,ke.Wide,$t.Standalone);break;case"ccccc":e=Ve(Se.Days,ke.Narrow,$t.Standalone);break;case"cccccc":e=Ve(Se.Days,ke.Short,$t.Standalone);break;case"E":case"EE":case"EEE":e=Ve(Se.Days,ke.Abbreviated);break;case"EEEE":e=Ve(Se.Days,ke.Wide);break;case"EEEEE":e=Ve(Se.Days,ke.Narrow);break;case"EEEEEE":e=Ve(Se.Days,ke.Short);break;case"a":case"aa":case"aaa":e=Ve(Se.DayPeriods,ke.Abbreviated);break;case"aaaa":e=Ve(Se.DayPeriods,ke.Wide);break;case"aaaaa":e=Ve(Se.DayPeriods,ke.Narrow);break;case"b":case"bb":case"bbb":e=Ve(Se.DayPeriods,ke.Abbreviated,$t.Standalone,!0);break;case"bbbb":e=Ve(Se.DayPeriods,ke.Wide,$t.Standalone,!0);break;case"bbbbb":e=Ve(Se.DayPeriods,ke.Narrow,$t.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ve(Se.DayPeriods,ke.Abbreviated,$t.Format,!0);break;case"BBBB":e=Ve(Se.DayPeriods,ke.Wide,$t.Format,!0);break;case"BBBBB":e=Ve(Se.DayPeriods,ke.Narrow,$t.Format,!0);break;case"h":e=it(xe.Hours,1,-12);break;case"hh":e=it(xe.Hours,2,-12);break;case"H":e=it(xe.Hours,1);break;case"HH":e=it(xe.Hours,2);break;case"m":e=it(xe.Minutes,1);break;case"mm":e=it(xe.Minutes,2);break;case"s":e=it(xe.Seconds,1);break;case"ss":e=it(xe.Seconds,2);break;case"S":e=it(xe.FractionalSeconds,1);break;case"SS":e=it(xe.FractionalSeconds,2);break;case"SSS":e=it(xe.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=_h(Pr.Short);break;case"ZZZZZ":e=_h(Pr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=_h(Pr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=_h(Pr.Long);break;default:return null}return Ky[t]=e,e}function uA(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function GV(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function WV(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),o=uA(e,i);return GV(t,r*(o-i))}function KV(t){if(JT(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return Ch(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(VV))return QV(r)}let e=new Date(t);if(!JT(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function QV(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function JT(t){return t instanceof Date&&!isNaN(t.valueOf())}function lA(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Qy=/\s+/,XT=[],dA=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=XT,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Qy):XT}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Qy):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Qy).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(oe(xr),oe(di))},e.\u0275dir=Rt({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Yy=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},$s=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new Yy(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let u=i.get(s);i.move(u,a),eA(u,o)}});for(let o=0,s=i.length;o<s;o++){let u=i.get(o).context;u.index=o,u.count=s,u.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);eA(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(oe(js),oe(ch),oe(qy))},e.\u0275dir=Rt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function eA(t,e){t.context.$implicit=e.item}var hA=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Zy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){tA("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){tA("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(oe(js),oe(ch))},e.\u0275dir=Rt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Zy=class{constructor(){this.$implicit=null,this.ngIf=null}};function tA(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${jt(e)}'.`)}function YV(t,e){return new J(2100,!1)}var ZV="mediumDate",JV=new W(""),XV=new W(""),fA=(()=>{let e=class e{constructor(r,i,o){this.locale=r,this.defaultTimezone=i,this.defaultOptions=o}transform(r,i,o,s){if(r==null||r===""||r!==r)return null;try{let a=i??this.defaultOptions?.dateFormat??ZV,u=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return jV(r,a,s||this.locale,u)}catch(a){throw YV(e,a.message)}}};e.\u0275fac=function(i){return new(i||e)(oe(fh,16),oe(JV,24),oe(XV,24))},e.\u0275pipe=HD({name:"date",type:e,pure:!0,standalone:!0});let t=e;return t})();var Ht=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=br({type:e}),e.\u0275inj=Dr({});let t=e;return t})(),pA="browser",eL="server";function yo(t){return t===eL}var Dh=class{};var ev=class extends Ih{constructor(){super(...arguments),this.supportsDOMEvents=!0}},tv=class t extends ev{static makeCurrent(){rA(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=tL();return n==null?null:nL(n)}resetBaseElement(){qc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return lA(document.cookie,e)}},qc=null;function tL(){return qc=qc||document.querySelector("base"),qc?qc.getAttribute("href"):null}function nL(t){return new URL(t,document.baseURI).pathname}var rL=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),Ah=new W(""),vA=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new J(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(q(Ah),q(De))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),zc=class{constructor(e){this._doc=e}},Jy="ng-app-id",_A=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=yo(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Jy}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Jy),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Jy,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(q(sn),q(Dy),q(Ty,8),q(tn))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),Xy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},rv=/%COMP%/g,wA="%COMP%",iL=`_nghost-${wA}`,oL=`_ngcontent-${wA}`,sL=!0,aL=new W("",{providedIn:"root",factory:()=>sL});function cL(t){return oL.replace(rv,t)}function uL(t){return iL.replace(rv,t)}function EA(t,e){return e.map(n=>n.replace(rv,t))}var gA=(()=>{let e=class e{constructor(r,i,o,s,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=yo(u),this.defaultRenderer=new Gc(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Gn.ShadowDom&&(i=ye($({},i),{encapsulation:Gn.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Sh?o.applyToHost(r):o instanceof Wc&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case Gn.Emulated:s=new Sh(l,h,i,this.appId,p,a,u,g);break;case Gn.ShadowDom:return new nv(l,h,r,i,a,u,this.nonce,g);default:s=new Wc(l,h,i,p,a,u,g);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(q(vA),q(_A),q(Dy),q(aL),q(sn),q(tn),q(De),q(Ty))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),Gc=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Xy[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(mA(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(mA(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Xy[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Xy[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ir.DashCase|Ir.Important)?e.style.setProperty(n,r,i&Ir.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ir.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Or().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function mA(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var nv=class extends Gc{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=EA(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Wc=class extends Gc{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?EA(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Sh=class extends Wc{constructor(e,n,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=cL(l),this.hostAttr=uL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},lL=(()=>{let e=class e extends zc{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(q(sn))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),dL=(()=>{let e=class e extends zc{constructor(r){super(r),this.delegate=G(QT,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,o){return this.delegate.addEventListener(r,i,o)}removeEventListener(r,i,o){return this.delegate.removeEventListener(r,i,o)}};e.\u0275fac=function(i){return new(i||e)(q(sn))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),yA=["alt","control","meta","shift"],hL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},pL=(()=>{let e=class e extends zc{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Or().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),yA.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=hL[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),yA.forEach(a=>{if(a!==o){let u=fL[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(q(sn))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})();function IA(t,e){return KT($({rootComponent:t},gL(e)))}function gL(t){return{appProviders:[...wL,...t?.providers??[]],platformProviders:_L}}function mL(){tv.makeCurrent()}function yL(){return new Er}function vL(){return Wb(document),document}var _L=[{provide:tn,useValue:pA},{provide:by,useValue:mL,multi:!0},{provide:sn,useFactory:vL,deps:[]}];var wL=[{provide:Yd,useValue:"root"},{provide:Er,useFactory:yL,deps:[]},{provide:Ah,useClass:lL,multi:!0,deps:[sn,De,tn]},{provide:Ah,useClass:pL,multi:!0,deps:[sn]},{provide:Ah,useClass:dL,multi:!0},gA,_A,vA,{provide:Rs,useExisting:gA},{provide:Dh,useClass:rL,deps:[]},[]];var CA=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(q(sn))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var le="primary",uu=Symbol("RouteTitle"),cv=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ks(t){return new cv(t)}function IL(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function CL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!er(t[n],e[n]))return!1;return!0}function er(t,e){let n=t?uv(t):void 0,r=e?uv(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!RA(t[i],e[i]))return!1;return!0}function uv(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function RA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function NA(t){return t.length>0?t[t.length-1]:null}function gi(t){return Zg(t)?t:ho(t)?Ae(Promise.resolve(t)):ie(t)}var DL={exact:OA,subset:kA},PA={exact:bL,subset:TL,ignored:()=>!0};function DA(t,e,n){return DL[n.paths](t.root,e.root,n.matrixParams)&&PA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function bL(t,e){return er(t,e)}function OA(t,e,n){if(!_o(t.segments,e.segments)||!Rh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!OA(t.children[r],e.children[r],n))return!1;return!0}function TL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>RA(t[n],e[n]))}function kA(t,e,n){return FA(t,e,e.segments,n)}function FA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!_o(i,n)||e.hasChildren()||!Rh(i,n,r))}else if(t.segments.length===n.length){if(!_o(t.segments,n)||!Rh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!kA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!_o(t.segments,i)||!Rh(t.segments,i,r)||!t.children[le]?!1:FA(t.children[le],e,o,r)}}function Rh(t,e,n){return e.every((r,i)=>PA[n](t[i].parameters,r.parameters))}var Fr=class{constructor(e=new Me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ks(this.queryParams),this._queryParamMap}toString(){return xL.serialize(this)}},Me=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nh(this)}},vo=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ks(this.parameters),this._parameterMap}toString(){return LA(this)}};function AL(t,e){return _o(t,e)&&t.every((n,r)=>er(n.parameters,e[r].parameters))}function _o(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function SL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===le&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==le&&(n=n.concat(e(i,r)))}),n}var kv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>new eu,providedIn:"root"});let t=e;return t})(),eu=class{parse(e){let n=new dv(e);return new Fr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Kc(e.root,!0)}`,r=NL(e.queryParams),i=typeof e.fragment=="string"?`#${ML(e.fragment)}`:"";return`${n}${r}${i}`}},xL=new eu;function Nh(t){return t.segments.map(e=>LA(e)).join("/")}function Kc(t,e){if(!t.hasChildren())return Nh(t);if(e){let n=t.children[le]?Kc(t.children[le],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==le&&r.push(`${i}:${Kc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=SL(t,(r,i)=>i===le?[Kc(t.children[le],!1)]:[`${i}:${Kc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[le]!=null?`${Nh(t)}/${n[0]}`:`${Nh(t)}/(${n.join("//")})`}}function VA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xh(t){return VA(t).replace(/%3B/gi,";")}function ML(t){return encodeURI(t)}function lv(t){return VA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ph(t){return decodeURIComponent(t)}function bA(t){return Ph(t.replace(/\+/g,"%20"))}function LA(t){return`${lv(t.path)}${RL(t.parameters)}`}function RL(t){return Object.entries(t).map(([e,n])=>`;${lv(e)}=${lv(n)}`).join("")}function NL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${xh(n)}=${xh(i)}`).join("&"):`${xh(n)}=${xh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var PL=/^[^\/()?;#]+/;function iv(t){let e=t.match(PL);return e?e[0]:""}var OL=/^[^\/()?;=#]+/;function kL(t){let e=t.match(OL);return e?e[0]:""}var FL=/^[^=?&#]+/;function VL(t){let e=t.match(FL);return e?e[0]:""}var LL=/^[^&#]+/;function jL(t){let e=t.match(LL);return e?e[0]:""}var dv=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[le]=new Me(e,n)),r}parseSegment(){let e=iv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(e),new vo(Ph(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=kL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=iv(this.remaining);i&&(r=i,this.capture(r))}e[Ph(n)]=Ph(r)}parseQueryParam(e){let n=VL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=jL(this.remaining);s&&(r=s,this.capture(r))}let i=bA(n),o=bA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=iv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new J(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=le);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[le]:new Me([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new J(4011,!1)}};function jA(t){return t.segments.length>0?new Me([],{[le]:t}):t}function UA(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=UA(i);if(r===le&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Me(t.segments,e);return UL(n)}function UL(t){if(t.numberOfChildren===1&&t.children[le]){let e=t.children[le];return new Me(t.segments.concat(e.segments),e.children)}return t}function wo(t){return t instanceof Fr}function BL(t,e,n=null,r=null){let i=BA(t);return $A(i,e,n,r)}function BA(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new Me(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=jA(r);return e??i}function $A(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return ov(i,i,i,n,r);let o=$L(e);if(o.toRoot())return ov(i,i,new Me([],{}),n,r);let s=HL(o,i,t),a=s.processChildren?Zc(s.segmentGroup,s.index,o.commands):qA(s.segmentGroup,s.index,o.commands);return ov(i,s.segmentGroup,a,n,r)}function Oh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function tu(t){return typeof t=="object"&&t!=null&&t.outlets}function ov(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=HA(t,e,n);let a=jA(UA(s));return new Fr(a,o,i)}function HA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=HA(o,e,n)}),new Me(t.segments,r)}var kh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Oh(r[0]))throw new J(4003,!1);let i=r.find(tu);if(i&&i!==NA(r))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function $L(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new kh(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new kh(n,e,r)}var zs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function HL(t,e,n){if(t.isAbsolute)return new zs(e,!0,0);if(!n)return new zs(e,!1,NaN);if(n.parent===null)return new zs(n,!0,0);let r=Oh(t.commands[0])?0:1,i=n.segments.length-1+r;return qL(n,i,t.numberOfDoubleDots)}function qL(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new J(4005,!1);i=r.segments.length}return new zs(r,!1,i-o)}function zL(t){return tu(t[0])?t[0].outlets:{[le]:t}}function qA(t,e,n){if(t??=new Me([],{}),t.segments.length===0&&t.hasChildren())return Zc(t,e,n);let r=GL(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Me(t.segments.slice(0,r.pathIndex),{});return o.children[le]=new Me(t.segments.slice(r.pathIndex),t.children),Zc(o,0,i)}else return r.match&&i.length===0?new Me(t.segments,{}):r.match&&!t.hasChildren()?hv(t,e,n):r.match?Zc(t,0,i):hv(t,e,n)}function Zc(t,e,n){if(n.length===0)return new Me(t.segments,{});{let r=zL(n),i={};if(Object.keys(r).some(o=>o!==le)&&t.children[le]&&t.numberOfChildren===1&&t.children[le].segments.length===0){let o=Zc(t.children[le],e,n);return new Me(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=qA(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Me(t.segments,i)}}function GL(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(tu(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!AA(u,l,s))return o;r+=2}else{if(!AA(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function hv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(tu(o)){let u=WL(o.outlets);return new Me(r,u)}if(i===0&&Oh(n[0])){let u=t.segments[e];r.push(new vo(u.path,TA(n[0]))),i++;continue}let s=tu(o)?o.outlets[le]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Oh(a)?(r.push(new vo(s,TA(a))),i+=2):(r.push(new vo(s,{})),i++)}return new Me(r,{})}function WL(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=hv(new Me([],{}),0,r))}),e}function TA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function AA(t,e,n){return t==n.path&&er(e,n.parameters)}var Jc="imperative",It=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(It||{}),En=class{constructor(e,n){this.id=e,this.url=n}},nu=class extends En{constructor(e,n,r="imperative",i=null){super(e,n),this.type=It.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},pi=class extends En{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=It.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},cn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(cn||{}),fv=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(fv||{}),kr=class extends En{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=It.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Eo=class extends En{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=It.NavigationSkipped}},ru=class extends En{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=It.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Fh=class extends En{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=It.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pv=class extends En{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=It.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gv=class extends En{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=It.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},mv=class extends En{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=It.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yv=class extends En{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=It.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vv=class{constructor(e){this.route=e,this.type=It.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},_v=class{constructor(e){this.route=e,this.type=It.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},wv=class{constructor(e){this.snapshot=e,this.type=It.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ev=class{constructor(e){this.snapshot=e,this.type=It.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Iv=class{constructor(e){this.snapshot=e,this.type=It.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cv=class{constructor(e){this.snapshot=e,this.type=It.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var iu=class{},Qs=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function KL(t,e){return t.providers&&!t._injector&&(t._injector=jy(t.providers,e,`Route: ${t.path}`)),t._injector??e}function On(t){return t.outlet||le}function QL(t,e){let n=t.filter(r=>On(r)===e);return n.push(...t.filter(r=>On(r)!==e)),n}function lu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Dv=class{get injector(){return lu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Hh(this.rootInjector),this.attachRef=null}},Hh=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Dv(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(q(mn))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=bv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=bv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Tv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Tv(e,this._root).map(n=>n.value)}};function bv(t,e){if(t===e.value)return e;for(let n of e.children){let r=bv(t,n);if(r)return r}return null}function Tv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Tv(t,n);if(r.length)return r.unshift(e),r}return[]}var an=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function qs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Lh=class extends Vh{constructor(e,n){super(e),this.snapshot=n,Fv(this,e)}toString(){return this.snapshot.toString()}};function zA(t){let e=YL(t),n=new wt([new vo("",{})]),r=new wt({}),i=new wt({}),o=new wt({}),s=new wt(""),a=new Io(n,r,o,s,i,le,t,e.root);return a.snapshot=e.root,new Lh(new an(a,[]),e)}function YL(t){let e={},n={},r={},i="",o=new Gs([],e,r,i,n,le,t,null,{});return new Uh("",new an(o,[]))}var Io=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(te(l=>l[uu]))??ie(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(e=>Ks(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(e=>Ks(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function jh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:$($({},e.params),t.params),data:$($({},e.data),t.data),resolve:$($($($({},t.data),e.data),i?.data),t._resolvedData)}:r={params:$({},t.params),data:$({},t.data),resolve:$($({},t.data),t._resolvedData??{})},i&&WA(i)&&(r.resolve[uu]=i.title),r}var Gs=class{get title(){return this.data?.[uu]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ks(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ks(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Uh=class extends Vh{constructor(e,n){super(n),this.url=e,Fv(this,n)}toString(){return GA(this._root)}};function Fv(t,e){e.value._routerState=t,e.children.forEach(n=>Fv(t,n))}function GA(t){let e=t.children.length>0?` { ${t.children.map(GA).join(", ")} } `:"";return`${t.value}${e}`}function sv(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,er(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),er(e.params,n.params)||t.paramsSubject.next(n.params),CL(e.url,n.url)||t.urlSubject.next(n.url),er(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Av(t,e){let n=er(t.params,e.params)&&AL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Av(t.parent,e.parent))}function WA(t){return typeof t.title=="string"||t.title===null}var Vv=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new rt,this.deactivateEvents=new rt,this.attachEvents=new rt,this.detachEvents=new rt,this.parentContexts=G(Hh),this.location=G(js),this.changeDetector=G(po),this.inputBinder=G(Lv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new Sv(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Rt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[uo]});let t=e;return t})(),Sv=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Io?this.route:e===Hh?this.childContexts:this.parent.get(e,n)}},Lv=new W("");function ZL(t,e,n){let r=ou(t,e._root,n?n._root:void 0);return new Lh(r,e)}function ou(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=JL(t,e,n);return new an(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ou(t,a)),s}}let r=XL(e.value),i=e.children.map(o=>ou(t,o));return new an(r,i)}}function JL(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ou(t,r,i);return ou(t,r)})}function XL(t){return new Io(new wt(t.url),new wt(t.params),new wt(t.queryParams),new wt(t.fragment),new wt(t.data),t.outlet,t.component,t)}var su=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},KA="ngNavigationCancelingError";function Bh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=wo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=QA(!1,cn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function QA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[KA]=!0,n.cancellationCode=e,n}function e2(t){return YA(t)&&wo(t.url)}function YA(t){return!!t&&t[KA]}var t2=(t,e,n,r)=>te(i=>(new xv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),xv=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),sv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=qs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=qs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=qs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=qs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Cv(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ev(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(sv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),sv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},$h=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ws=class{constructor(e,n){this.component=e,this.route=n}};function n2(t,e,n){let r=t._root,i=e?e._root:null;return Qc(r,i,n,[r.value])}function r2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Zs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!xD(t)?t:e.get(t):r}function Qc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=qs(e);return t.children.forEach(s=>{i2(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Xc(a,n.getContext(s),i)),i}function i2(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=o2(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new $h(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Qc(t,e,a?a.children:null,r,i):Qc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ws(a.outlet.component,s))}else s&&Xc(e,a,i),i.canActivateChecks.push(new $h(r)),o.component?Qc(t,null,a?a.children:null,r,i):Qc(t,null,n,r,i);return i}function o2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!_o(t.url,e.url);case"pathParamsOrQueryParamsChange":return!_o(t.url,e.url)||!er(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Av(t,e)||!er(t.queryParams,e.queryParams);case"paramsChange":default:return!Av(t,e)}}function Xc(t,e,n){let r=qs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Xc(s,e.children.getContext(o),n):Xc(s,null,n):Xc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ws(e.outlet.component,i)):n.canDeactivateChecks.push(new Ws(null,i)):n.canDeactivateChecks.push(new Ws(null,i))}function du(t){return typeof t=="function"}function s2(t){return typeof t=="boolean"}function a2(t){return t&&du(t.canLoad)}function c2(t){return t&&du(t.canActivate)}function u2(t){return t&&du(t.canActivateChild)}function l2(t){return t&&du(t.canDeactivate)}function d2(t){return t&&du(t.canMatch)}function ZA(t){return t instanceof _r||t?.name==="EmptyError"}var Mh=Symbol("INITIAL_VALUE");function Ys(){return Ye(t=>ad(t.map(e=>e.pipe(wr(1),Wi(Mh)))).pipe(te(e=>{for(let n of e)if(n!==!0){if(n===Mh)return Mh;if(n===!1||h2(n))return n}return!0}),xt(e=>e!==Mh),wr(1)))}function h2(t){return wo(t)||t instanceof su}function f2(t,e){return dt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?ie(ye($({},n),{guardsResult:!0})):p2(s,r,i,t).pipe(dt(a=>a&&s2(a)?g2(r,o,t,e):ie(a)),te(a=>ye($({},n),{guardsResult:a})))})}function p2(t,e,n,r){return Ae(t).pipe(dt(i=>w2(i.component,i.route,n,e,r)),hn(i=>i!==!0,!0))}function g2(t,e,n,r){return Ae(e).pipe(gs(i=>ps(y2(i.route.parent,r),m2(i.route,r),_2(t,i.path,n),v2(t,i.route,n))),hn(i=>i!==!0,!0))}function m2(t,e){return t!==null&&e&&e(new Iv(t)),ie(!0)}function y2(t,e){return t!==null&&e&&e(new wv(t)),ie(!0)}function v2(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ie(!0);let i=r.map(o=>cd(()=>{let s=lu(e)??n,a=Zs(o,s),u=c2(a)?a.canActivate(e,t):Tr(s,()=>a(e,t));return gi(u).pipe(hn())}));return ie(i).pipe(Ys())}function _2(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>r2(s)).filter(s=>s!==null).map(s=>cd(()=>{let a=s.guards.map(u=>{let l=lu(s.node)??n,h=Zs(u,l),p=u2(h)?h.canActivateChild(r,t):Tr(l,()=>h(r,t));return gi(p).pipe(hn())});return ie(a).pipe(Ys())}));return ie(o).pipe(Ys())}function w2(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ie(!0);let s=o.map(a=>{let u=lu(e)??i,l=Zs(a,u),h=l2(l)?l.canDeactivate(t,e,n,r):Tr(u,()=>l(t,e,n,r));return gi(h).pipe(hn())});return ie(s).pipe(Ys())}function E2(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return ie(!0);let o=i.map(s=>{let a=Zs(s,t),u=a2(a)?a.canLoad(e,n):Tr(t,()=>a(e,n));return gi(u)});return ie(o).pipe(Ys(),JA(r))}function JA(t){return zg(ht(e=>{if(typeof e!="boolean")throw Bh(t,e)}),te(e=>e===!0))}function I2(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return ie(!0);let o=i.map(s=>{let a=Zs(s,t),u=d2(a)?a.canMatch(e,n):Tr(t,()=>a(e,n));return gi(u)});return ie(o).pipe(Ys(),JA(r))}var au=class{constructor(e){this.segmentGroup=e||null}},cu=class extends Error{constructor(e){super(),this.urlTree=e}};function Hs(t){return fs(new au(t))}function C2(t){return fs(new J(4e3,!1))}function D2(t){return fs(QA(!1,cn.GuardRejected))}var Mv=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ie(r);if(i.numberOfChildren>1||!i.children[le])return C2(`${e.redirectTo}`);i=i.children[le]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,params:y,data:C,title:S}=i,x=Tr(o,()=>a({params:y,data:C,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:g,title:S}));if(x instanceof Fr)throw new cu(x);n=x}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new cu(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Fr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Me(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new J(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Rv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function b2(t,e,n,r,i){let o=XA(t,e,n);return o.matched?(r=KL(e,r),I2(r,e,n,i).pipe(te(s=>s===!0?o:$({},Rv)))):ie(o)}function XA(t,e,n){if(e.path==="**")return T2(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?$({},Rv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||IL)(n,t,e);if(!i)return $({},Rv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?$($({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function T2(t){return{matched:!0,parameters:t.length>0?NA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function SA(t,e,n,r){return n.length>0&&x2(t,n,r)?{segmentGroup:new Me(e,S2(r,new Me(n,t.children))),slicedSegments:[]}:n.length===0&&M2(t,n,r)?{segmentGroup:new Me(t.segments,A2(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Me(t.segments,t.children),slicedSegments:n}}function A2(t,e,n,r){let i={};for(let o of n)if(qh(t,e,o)&&!r[On(o)]){let s=new Me([],{});i[On(o)]=s}return $($({},r),i)}function S2(t,e){let n={};n[le]=e;for(let r of t)if(r.path===""&&On(r)!==le){let i=new Me([],{});n[On(r)]=i}return n}function x2(t,e,n){return n.some(r=>qh(t,e,r)&&On(r)!==le)}function M2(t,e,n){return n.some(r=>qh(t,e,r))}function qh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function R2(t,e,n){return e.length===0&&!t.children[n]}var Nv=class{};function N2(t,e,n,r,i,o,s="emptyOnly"){return new Pv(t,e,n,r,i,s,o).recognize()}var P2=31,Pv=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Mv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new J(4002,`'${e.segmentGroup}'`)}recognize(){let e=SA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(te(({children:n,rootSnapshot:r})=>{let i=new an(r,n),o=new Uh("",i),s=BL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Gs([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),le,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,le,n).pipe(te(r=>({children:r,rootSnapshot:n})),ei(r=>{if(r instanceof cu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof au?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(te(s=>s instanceof an?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ae(o).pipe(gs(s=>{let a=r.children[s],u=QL(n,s);return this.processSegmentGroup(e,u,a,s,i)}),Gi((s,a)=>(s.push(...a),s)),ti(null),nm(),dt(s=>{if(s===null)return Hs(r);let a=eS(s);return O2(a),ie(a)}))}processSegment(e,n,r,i,o,s,a){return Ae(n).pipe(gs(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(ei(l=>{if(l instanceof au)return ie(null);throw l}))),hn(u=>!!u),ei(u=>{if(ZA(u))return R2(r,i,o)?ie(new Nv):Hs(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return On(r)!==s&&(s===le||!qh(i,o,r))?Hs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Hs(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=XA(n,i,o);if(!u)return Hs(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>P2&&(this.allowRedirects=!1));let y=new Gs(o,l,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,xA(i),On(i),i.component??i._loadedComponent??null,i,MA(i)),C=jh(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(C.params),y.data=Object.freeze(C.data);let S=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,S).pipe(dt(x=>this.processSegment(e,r,n,x.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=b2(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Ye(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ye(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,C=new Gs(g,p,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,xA(r),On(r),r.component??r._loadedComponent??null,r,MA(r)),S=jh(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(S.params),C.data=Object.freeze(S.data);let{segmentGroup:x,slicedSegments:L}=SA(n,g,y,l);if(L.length===0&&x.hasChildren())return this.processChildren(h,l,x,C).pipe(te(V=>new an(C,V)));if(l.length===0&&L.length===0)return ie(new an(C,[]));let H=On(r)===o;return this.processSegment(h,l,x,L,H?le:o,!0,C).pipe(te(V=>new an(C,V instanceof an?[V]:[])))}))):Hs(n)))}getChildConfig(e,n,r){return n.children?ie({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ie({routes:n._loadedRoutes,injector:n._loadedInjector}):E2(e,n,r,this.urlSerializer).pipe(dt(i=>i?this.configLoader.loadChildren(e,n).pipe(ht(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):D2(n))):ie({routes:[],injector:e})}};function O2(t){t.sort((e,n)=>e.value.outlet===le?-1:n.value.outlet===le?1:e.value.outlet.localeCompare(n.value.outlet))}function k2(t){let e=t.value.routeConfig;return e&&e.path===""}function eS(t){let e=[],n=new Set;for(let r of t){if(!k2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=eS(r.children);e.push(new an(r.value,i))}return e.filter(r=>!n.has(r))}function xA(t){return t.data||{}}function MA(t){return t.resolve||{}}function F2(t,e,n,r,i,o){return dt(s=>N2(t,e,n,r,s.extractedUrl,i,o).pipe(te(({state:a,tree:u})=>ye($({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function V2(t,e){return dt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ie(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of tS(u))s.add(l);let a=0;return Ae(s).pipe(gs(u=>o.has(u)?L2(u,r,t,e):(u.data=jh(u,u.parent,t).resolve,ie(void 0))),ht(()=>a++),ms(1),dt(u=>a===s.size?ie(n):Vt))})}function tS(t){let e=t.children.map(n=>tS(n)).flat();return[t,...e]}function L2(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!WA(i)&&(o[uu]=i.title),j2(o,t,e,r).pipe(te(s=>(t._resolvedData=s,t.data=jh(t,t.parent,n).resolve,null)))}function j2(t,e,n,r){let i=uv(t);if(i.length===0)return ie({});let o={};return Ae(i).pipe(dt(s=>U2(t[s],e,n,r).pipe(hn(),ht(a=>{if(a instanceof su)throw Bh(new eu,a);o[s]=a}))),ms(1),em(o),ei(s=>ZA(s)?Vt:fs(s)))}function U2(t,e,n,r){let i=lu(e)??r,o=Zs(t,i),s=o.resolve?o.resolve(e,n):Tr(i,()=>o(e,n));return gi(s)}function av(t){return Ye(e=>{let n=t(e);return n?Ae(n).pipe(te(()=>e)):ie(e)})}var nS=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===le);return i}getResolvedTitleForRoute(r){return r.data[uu]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>G(B2),providedIn:"root"});let t=e;return t})(),B2=(()=>{let e=class e extends nS{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(q(CA))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jv=new W("",{providedIn:"root",factory:()=>({})}),$2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=yt({type:e,selectors:[["ng-component"]],standalone:!0,features:[vt],decls:1,vars:0,template:function(i,o){i&1&&be(0,"router-outlet")},dependencies:[Vv],encapsulation:2});let t=e;return t})();function Uv(t){let e=t.children&&t.children.map(Uv),n=e?ye($({},t),{children:e}):$({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==le&&(n.component=$2),n}var Bv=new W(""),H2=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=G($y)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ie(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=gi(r.loadComponent()).pipe(te(rS),ht(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Cc(()=>{this.componentLoaders.delete(r)})),o=new us(i,()=>new $e).pipe(cs());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ie({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=q2(i,this.compiler,r,this.onLoadEndListener).pipe(Cc(()=>{this.childrenLoaders.delete(i)})),a=new us(s,()=>new $e).pipe(cs());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function q2(t,e,n,r){return gi(t.loadChildren()).pipe(te(rS),dt(i=>i instanceof Pc||Array.isArray(i)?ie(i):Ae(e.compileModuleAsync(i))),te(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Bv,[],{optional:!0,self:!0}).flat()),{routes:s.map(Uv),injector:o}}))}function z2(t){return t&&typeof t=="object"&&"default"in t}function rS(t){return z2(t)?t.default:t}var $v=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>G(G2),providedIn:"root"});let t=e;return t})(),G2=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),W2=new W("");var K2=new W(""),Q2=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $e,this.transitionAbortSubject=new $e,this.configLoader=G(H2),this.environmentInjector=G(mn),this.urlSerializer=G(kv),this.rootContexts=G(Hh),this.location=G(Hc),this.inputBindingEnabled=G(Lv,{optional:!0})!==null,this.titleStrategy=G(nS),this.options=G(jv,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=G($v),this.createViewTransition=G(W2,{optional:!0}),this.navigationErrorHandler=G(K2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ie(void 0),this.rootComponentType=null;let r=o=>this.events.next(new vv(o)),i=o=>this.events.next(new _v(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ye($($({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new wt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Jc,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(xt(s=>s.id!==0),te(s=>ye($({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ye(s=>{let a=!1,u=!1;return ie(s).pipe(Ye(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",cn.SupersededByNewNavigation),Vt;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ye($({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let g="";return this.events.next(new Eo(l.id,this.urlSerializer.serialize(l.rawUrl),g,fv.IgnoredSameUrlNavigation)),l.resolve(!1),Vt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ie(l).pipe(Ye(g=>{let y=this.transitions?.getValue();return this.events.next(new nu(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),y!==this.transitions?.getValue()?Vt:Promise.resolve(g)}),F2(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ht(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=ye($({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let y=new Fh(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:y,source:C,restoredState:S,extras:x}=l,L=new nu(g,this.urlSerializer.serialize(y),C,S);this.events.next(L);let H=zA(this.rootComponentType).snapshot;return this.currentTransition=s=ye($({},l),{targetSnapshot:H,urlAfterRedirects:y,extras:ye($({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,ie(s)}else{let g="";return this.events.next(new Eo(l.id,this.urlSerializer.serialize(l.extractedUrl),g,fv.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Vt}}),ht(l=>{let h=new pv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),te(l=>(this.currentTransition=s=ye($({},l),{guards:n2(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),f2(this.environmentInjector,l=>this.events.next(l)),ht(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Bh(this.urlSerializer,l.guardsResult);let h=new gv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),xt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",cn.GuardRejected),!1)),av(l=>{if(l.guards.canActivateChecks.length)return ie(l).pipe(ht(h=>{let p=new mv(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),Ye(h=>{let p=!1;return ie(h).pipe(V2(this.paramsInheritanceStrategy,this.environmentInjector),ht({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",cn.NoDataFromResolver)}}))}),ht(h=>{let p=new yv(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),av(l=>{let h=p=>{let g=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(p.routeConfig).pipe(ht(y=>{p.component=y}),te(()=>{})));for(let y of p.children)g.push(...h(y));return g};return ad(h(l.targetSnapshot.root)).pipe(ti(null),wr(1))}),av(()=>this.afterPreactivation()),Ye(()=>{let{currentSnapshot:l,targetSnapshot:h}=s,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Ae(p).pipe(te(()=>s)):ie(s)}),te(l=>{let h=ZL(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=ye($({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),ht(()=>{this.events.next(new iu)}),t2(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),wr(1),ht({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new pi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),im(this.transitionAbortSubject.pipe(ht(l=>{throw l}))),Cc(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",cn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ei(l=>{if(u=!0,YA(l))this.events.next(new kr(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),e2(l)?this.events.next(new Qs(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let h=new ru(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let p=Tr(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(p instanceof su){let{message:g,cancellationCode:y}=Bh(this.urlSerializer,p);this.events.next(new kr(s.id,this.urlSerializer.serialize(s.extractedUrl),g,y)),this.events.next(new Qs(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(h);let g=r.errorHandler(l);s.resolve(!!g)}}catch(p){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(p)}}return Vt}))}))}cancelNavigationTransition(r,i,o){let s=new kr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Y2(t){return t!==Jc}var Z2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>G(J2),providedIn:"root"});let t=e;return t})(),Ov=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},J2=(()=>{let e=class e extends Ov{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Lc(e)))(o||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),iS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:()=>G(X2),providedIn:"root"});let t=e;return t})(),X2=(()=>{let e=class e extends iS{constructor(){super(...arguments),this.location=G(Hc),this.urlSerializer=G(kv),this.options=G(jv,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=G($v),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Fr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=zA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof nu)this.stateMemento=this.createStateMemento();else if(r instanceof Eo)this.rawUrlTree=i.initialUrl;else if(r instanceof Fh){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??o,i)}}else r instanceof iu?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof kr&&(r.code===cn.GuardRejected||r.code===cn.NoDataFromResolver)?this.restoreHistory(i):r instanceof ru?this.restoreHistory(i,!0):r instanceof pi&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=r instanceof Fr?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=$($({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=$($({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Lc(e)))(o||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Yc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Yc||{});function ej(t,e){t.events.pipe(xt(n=>n instanceof pi||n instanceof kr||n instanceof ru||n instanceof Eo),te(n=>n instanceof pi||n instanceof Eo?Yc.COMPLETE:(n instanceof kr?n.code===cn.Redirect||n.code===cn.SupersededByNewNavigation:!1)?Yc.REDIRECTING:Yc.FAILED),xt(n=>n!==Yc.REDIRECTING),wr(1)).subscribe(()=>{e()})}function tj(t){throw t}var nj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Co=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=G(hh),this.stateManager=G(iS),this.options=G(jv,{optional:!0})||{},this.pendingTasks=G(Ls),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=G(Q2),this.urlSerializer=G(kv),this.location=G(Hc),this.urlHandlingStrategy=G($v),this._events=new $e,this.errorHandler=this.options.errorHandler||tj,this.navigated=!1,this.routeReuseStrategy=G(Z2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=G(Bv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!G(Lv,{optional:!0}),this.eventsSubscription=new Ke,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof kr&&i.code!==cn.Redirect&&i.code!==cn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof pi)this.navigated=!0;else if(i instanceof Qs){let a=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l=$({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Y2(o.source)},a);this.scheduleNavigation(u,Jc,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}oj(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Jc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=$({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Uv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":p=$($({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let g;try{let y=o?o.snapshot:this.routerState.snapshot.root;g=BA(y)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),g=this.currentUrlTree.root}return $A(g,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=wo(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Jc,null,i)}navigate(r,i={skipLocationChange:!1}){return ij(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=$({},nj):i===!1?o=$({},rj):o=i,wo(r))return DA(this.currentUrlTree,r,o);let s=this.parseUrl(r);return DA(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((g,y)=>{u=g,l=y});let p=this.pendingTasks.add();return ej(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ij(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new J(4008,!1)}function oj(t){return!(t instanceof iu)&&!(t instanceof Qs)}var In=(()=>{let e=class e{constructor(r,i,o,s,a,u){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=u,this.href=null,this.onChanges=new $e,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(h=>{h instanceof pi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(wo(r)?this.routerLinkInput=r:this.routerLinkInput=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0"))}onClick(r,i,o,s,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:Yb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.routerLinkInput===null?null:wo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(oe(Co),oe(Io),Ey("tabindex"),oe(di),oe(xr),oe(Bs))},e.\u0275dir=Rt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&Je("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&uh("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",go],skipLocationChange:[2,"skipLocationChange","skipLocationChange",go],replaceUrl:[2,"replaceUrl","replaceUrl",go],routerLink:"routerLink"},standalone:!0,features:[Ly,uo]});let t=e;return t})();var sj=new W("");function oS(t,...e){return Zn([{provide:Bv,multi:!0,useValue:t},[],{provide:Io,useFactory:aj,deps:[Co]},{provide:By,multi:!0,useFactory:cj},e.map(n=>n.\u0275providers)])}function aj(t){return t.routerState.root}function cj(){let t=G(Yt);return e=>{let n=t.get(fo);if(e!==n.components[0])return;let r=t.get(Co),i=t.get(uj);t.get(lj)===1&&r.initialNavigation(),t.get(dj,null,ge.Optional)?.setUpPreloading(),t.get(sj,null,ge.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var uj=new W("",{factory:()=>new $e}),lj=new W("",{providedIn:"root",factory:()=>1});var dj=new W("");var hj=()=>["/login"],fj=()=>["/chat"],pj=()=>["/yo"],aS="*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-image:url(https://images.unsplash.com/photo-1556856425-366d6618905d?q=80&w=1864&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D);background-repeat:no-repeat;background-size:cover;background-position:center;display:flex;justify-content:center;align-items:center;min-height:100vh}.container[_ngcontent-%COMP%]{text-align:center;padding:20px}.container-nav[_ngcontent-%COMP%]{text-align:center}.navbar[_ngcontent-%COMP%]{background-color:#000;padding:10px 20px;position:fixed;top:0;left:0;right:0;width:100%;display:flex;justify-content:center}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:30px}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:20px;padding:10px;display:inline-block}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#a3ae3a;border-radius:4px}.game[_ngcontent-%COMP%]{background-color:#000;padding:10px;border-radius:8px;box-shadow:0 4px 8px #0000001a;transition:transform .3s ease;width:80%;max-width:250px;margin:0 auto;border:3px solid transparent}.games-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;max-width:800px;margin:90px auto 0;justify-items:center}.game[_ngcontent-%COMP%]:hover{transform:scale(1.05);border-color:#ff0}.game[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:8px}.game[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:10px;font-size:1.5rem;color:#faf7f7}a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}",zh=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=yt({type:t,selectors:[["app-home"]],standalone:!0,features:[vt],decls:44,vars:6,consts:[["lang","es"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"container-nav"],[1,"navbar"],[3,"routerLink"],["href","#"],[1,"container"],[1,"games-grid"],[1,"game"],["routerLink","/pacman"],["src","pacman.jpg","alt","Pacman"],["routerLink","/ahorcado"],["src","ahorcado.png","alt","Ahorcado"],["href","juego3.html"],["src","mayormenor.jpg","alt","Mayor o menor"],["href","juego4.html"],["src","preguntados.png","alt","Preguntados"]],template:function(n,r){n&1&&(O(0,"html",0)(1,"head"),be(2,"meta",1)(3,"meta",2),O(4,"title"),z(5,"Selecciona tu Juego"),F()(),O(6,"body")(7,"div",3)(8,"nav",4)(9,"ul")(10,"li")(11,"a",5),z(12,"Log in"),F()(),O(13,"li")(14,"a",5),z(15,"Chat"),F()(),O(16,"li")(17,"a",5),z(18,"Sobre Mi"),F()(),O(19,"li")(20,"a",6),z(21,"Log Out"),F()()()()(),O(22,"div",7)(23,"div",8)(24,"div",9)(25,"a",10),be(26,"img",11),O(27,"h2"),z(28,"Pacman"),F()()(),O(29,"div",9)(30,"a",12),be(31,"img",13),O(32,"h2"),z(33,"Ahorcado"),F()()(),O(34,"div",9)(35,"a",14),be(36,"img",15),O(37,"h2"),z(38,"Mayor o Menor"),F()()(),O(39,"div",9)(40,"a",16),be(41,"img",17),O(42,"h2"),z(43,"Preguntados"),F()()()()()()()),n&2&&(ne(11),fe("routerLink",pt(3,hj)),ne(3),fe("routerLink",pt(4,fj)),ne(3),fe("routerLink",pt(5,pj)))},dependencies:[In,Ht],styles:[aS,aS]})};var gS=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(oe(di),oe(xr))},e.\u0275dir=Rt({type:e});let t=e;return t})(),gj=(()=>{let e=class e extends gS{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Lc(e)))(o||e)}})(),e.\u0275dir=Rt({type:e,features:[hi]});let t=e;return t})(),mS=new W("");var mj={provide:mS,useExisting:Ps(()=>mi),multi:!0};function yj(){let t=Or()?Or().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var vj=new W(""),mi=(()=>{let e=class e extends gS{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!yj())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(oe(di),oe(xr),oe(vj,8))},e.\u0275dir=Rt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&Je("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[dh([mj]),hi]});let t=e;return t})();var yS=new W(""),vS=new W("");function _S(t){return t!=null}function wS(t){return ho(t)?Ae(t):t}function ES(t){let e={};return t.forEach(n=>{e=n!=null?$($({},e),n):e}),Object.keys(e).length===0?null:e}function IS(t,e){return e.map(n=>n(t))}function _j(t){return!t.validate}function CS(t){return t.map(e=>_j(e)?e:n=>e.validate(n))}function wj(t){if(!t)return null;let e=t.filter(_S);return e.length==0?null:function(n){return ES(IS(n,e))}}function qv(t){return t!=null?wj(CS(t)):null}function Ej(t){if(!t)return null;let e=t.filter(_S);return e.length==0?null:function(n){let r=IS(n,e).map(wS);return Jg(r).pipe(te(ES))}}function zv(t){return t!=null?Ej(CS(t)):null}function cS(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Ij(t){return t._rawValidators}function Cj(t){return t._rawAsyncValidators}function Hv(t){return t?Array.isArray(t)?t:[t]:[]}function Wh(t,e){return Array.isArray(t)?t.includes(e):t===e}function uS(t,e){let n=Hv(e);return Hv(t).forEach(i=>{Wh(n,i)||n.push(i)}),n}function lS(t,e){return Hv(e).filter(n=>!Wh(t,n))}var Kh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ea=class extends Kh{get formDirective(){return null}get path(){return null}},yu=class extends Kh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Qh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Dj={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},eW=ye($({},Dj),{"[class.ng-submitted]":"isSubmitted"}),na=(()=>{let e=class e extends Qh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(oe(yu,2))},e.\u0275dir=Rt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&lh("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[hi]});let t=e;return t})(),Xh=(()=>{let e=class e extends Qh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(oe(ea,10))},e.\u0275dir=Rt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&lh("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[hi]});let t=e;return t})();var hu="VALID",Gh="INVALID",Js="PENDING",fu="DISABLED",ta=class{},Yh=class extends ta{constructor(e,n){super(),this.value=e,this.source=n}},gu=class extends ta{constructor(e,n){super(),this.pristine=e,this.source=n}},mu=class extends ta{constructor(e,n){super(),this.touched=e,this.source=n}},Xs=class extends ta{constructor(e,n){super(),this.status=e,this.source=n}};function DS(t){return(ef(t)?t.validators:t)||null}function bj(t){return Array.isArray(t)?qv(t):t||null}function bS(t,e){return(ef(e)?e.asyncValidators:t)||null}function Tj(t){return Array.isArray(t)?zv(t):t||null}function ef(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Aj(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new J(1e3,"");if(!r[n])throw new J(1001,"")}function Sj(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new J(1002,"")})}var Zh=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=$c(()=>this.statusReactive()),this.statusReactive=Bc(void 0),this._pristine=$c(()=>this.pristineReactive()),this.pristineReactive=Bc(!0),this._touched=$c(()=>this.touchedReactive()),this.touchedReactive=Bc(!1),this._events=new $e,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Rr(this.statusReactive)}set status(e){Rr(()=>this.statusReactive.set(e))}get valid(){return this.status===hu}get invalid(){return this.status===Gh}get pending(){return this.status==Js}get disabled(){return this.status===fu}get enabled(){return this.status!==fu}get pristine(){return Rr(this.pristineReactive)}set pristine(e){Rr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Rr(this.touchedReactive)}set touched(e){Rr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(uS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(uS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(lS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(lS(e,this._rawAsyncValidators))}hasValidator(e){return Wh(this._rawValidators,e)}hasAsyncValidator(e){return Wh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ye($({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new mu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new mu(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ye($({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new gu(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new gu(!0,r))}markAsPending(e={}){this.status=Js;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xs(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ye($({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=fu,this.errors=null,this._forEachChild(i=>{i.disable(ye($({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Yh(this.value,r)),this._events.next(new Xs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye($({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=hu,this._forEachChild(r=>{r.enable(ye($({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye($({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hu||this.status===Js)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Yh(this.value,n)),this._events.next(new Xs(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ye($({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fu:hu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Js,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=wS(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Xs(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new rt,this.statusChanges=new rt}_calculateStatus(){return this._allControlsDisabled()?fu:this.errors?Gh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Js)?Js:this._anyControlsHaveStatus(Gh)?Gh:hu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new gu(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new mu(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ef(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=bj(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Tj(this._rawAsyncValidators)}},Jh=class extends Zh{constructor(e,n,r){super(DS(n),bS(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Sj(this,!0,e),Object.keys(e).forEach(r=>{Aj(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Gv=new W("CallSetDisabledState",{providedIn:"root",factory:()=>Wv}),Wv="always";function xj(t,e){return[...e.path,t]}function TS(t,e,n=Wv){AS(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Rj(t,e),Pj(t,e),Nj(t,e),Mj(t,e)}function dS(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Mj(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function AS(t,e){let n=Ij(t);e.validator!==null?t.setValidators(cS(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=Cj(t);e.asyncValidator!==null?t.setAsyncValidators(cS(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();dS(e._rawValidators,i),dS(e._rawAsyncValidators,i)}function Rj(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&SS(t,e)})}function Nj(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&SS(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function SS(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Pj(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function Oj(t,e){t==null,AS(t,e)}function kj(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Fj(t){return Object.getPrototypeOf(t.constructor)===gj}function Vj(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Lj(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===mi?n=o:Fj(o)?r=o:i=o}),i||r||n||null}var jj={provide:ea,useExisting:Ps(()=>vu)},pu=Promise.resolve(),vu=(()=>{let e=class e extends ea{get submitted(){return Rr(this.submittedReactive)}constructor(r,i,o){super(),this.callSetDisabledState=o,this._submitted=$c(()=>this.submittedReactive()),this.submittedReactive=Bc(!1),this._directives=new Set,this.ngSubmit=new rt,this.form=new Jh({},qv(r),zv(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){pu.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),TS(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){pu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){pu.then(()=>{let i=this._findContainer(r.path),o=new Jh({});Oj(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){pu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){pu.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),Vj(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(oe(yS,10),oe(vS,10),oe(Gv,8))},e.\u0275dir=Rt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&Je("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[dh([jj]),hi]});let t=e;return t})();function hS(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function fS(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Uj=class extends Zh{constructor(e=null,n,r){super(DS(n),bS(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ef(n)&&(n.nonNullable||n.initialValueIsDefault)&&(fS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){fS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Bj={provide:yu,useExisting:Ps(()=>bo)},pS=Promise.resolve(),bo=(()=>{let e=class e extends yu{constructor(r,i,o,s,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this.control=new Uj,this._registered=!1,this.name="",this.update=new rt,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Lj(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),kj(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){TS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){pS.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&go(i);pS.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?xj(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(oe(ea,9),oe(yS,10),oe(vS,10),oe(mS,10),oe(po,8),oe(Gv,8))},e.\u0275dir=Rt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[dh([Bj]),hi,uo]});let t=e;return t})(),tf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Rt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var $j=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=br({type:e}),e.\u0275inj=Dr({});let t=e;return t})();var ra=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Gv,useValue:r.callSetDisabledState??Wv}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=br({type:e}),e.\u0275inj=Dr({imports:[$j]});let t=e;return t})();var Hj="firebase",qj="10.13.2";St(Hj,qj,"app");var Vr=new Cr("ANGULARFIRE2_VERSION");function rf(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var _u=(t,e)=>{let n=e?[e]:Rl(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},kn=class{constructor(){return _u(zj)}},zj="app-check";function ia(){}var nf=class{zone;delegate;constructor(e,n=Qg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Qv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ia,{},ia,ia)),n.pipe(ht({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},tr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new nf(Zone.current)),this.insideAngular=n.run(()=>new nf(Zone.current,Ec)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(q(De))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function of(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Gj(t){return of().ngZone.runOutsideAngular(()=>t())}function To(t){return of().ngZone.run(()=>t())}function qt(t){return Wj(of())(t)}function Wj(t){return function(n){return n=n.lift(new Qv(t.ngZone)),n.pipe(dn(t.outsideAngular),en(t.insideAngular))}}var Kj=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),To(()=>t.apply(void 0,r))},nr=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=To(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ia,{},ia,ia))),r[o]=Kj(r[o],n));let i=Gj(()=>t.apply(this,r));if(!e)if(i instanceof pe){let o=of();return i.pipe(dn(o.outsideAngular),en(o.insideAngular))}else return To(()=>i);return i instanceof pe?i.pipe(qt):i instanceof Promise?To(()=>new Promise((o,s)=>i.then(a=>To(()=>o(a)),a=>To(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:To(()=>i)};var Lr=class{constructor(e){return e}},Ao=class{constructor(){return Rl()}};function Qj(t){return t&&t.length===1?t[0]:new Lr(gc())}var Yv=new W("angularfire2._apps"),Yj={provide:Lr,useFactory:Qj,deps:[[new Mt,Yv]]},Zj={provide:Ao,deps:[[new Mt,Yv]]};function Jj(t){return(e,n)=>{let r=n.get(tn);St("angularfire",Vr.full,"core"),St("angularfire",Vr.full,"app"),St("angular",Uy.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Lr(i)}}function MS(t,...e){return Zn([Yj,Zj,{provide:Yv,useFactory:Jj(t),multi:!0,deps:[De,Yt,tr,...e]}])}var RS=nr(rC,!0);var NS="auth",jr=class{constructor(e){return e}},wu=class{constructor(){return _u(NS)}};var Zv=new W("angularfire2.auth-instances");function YU(t,e){let n=rf(NS,t,e);return n&&new jr(n)}function ZU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new jr(r)}}var JU={provide:wu,deps:[[new Mt,Zv]]},XU={provide:jr,useFactory:YU,deps:[[new Mt,Zv],Lr]};function PS(t,...e){return St("angularfire",Vr.full,"auth"),Zn([XU,JU,{provide:Zv,useFactory:ZU(t),multi:!0,deps:[De,Yt,tr,Ao,[new Mt,kn],...e]}])}var OS=nr(Mg,!0);var kS=nr(Ng,!0);var FS=nr(Rg,!0);var LS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jS={};var yi,Jv;(function(){var t;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,D,T){for(var _=Array(arguments.length-2),pr=2;pr<arguments.length;pr++)_[pr-2]=arguments[pr];return v.prototype[D].apply(I,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(D=0;16>D;++D)I[D]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],D=E.g[2];var T=E.g[3],_=v+(T^w&(D^T))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(D^T&(w^D))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(w^D^T)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(D^(w|~T))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,D=this.h,T=0;T<v;){if(D==0)for(;T<=w;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<v;)if(I[D++]=E.charCodeAt(T++),D==this.blockSize){i(this,I),D=0;break}}else for(;T<v;)if(I[D++]=E[T++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,D=E.length-1;0<=D;D--){var T=E[D]|0;I&&T==v||(w[D]=T,I=!1)}this.g=w}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return x(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return x(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=p,D=0;D<E.length;D+=8){var T=Math.min(8,E.length-D),_=parseInt(E.substring(D,D+T),v);8>T?(T=l(Math.pow(v,T)),I=I.j(T).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(S(this))return-x(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(S(this))return"-"+x(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var D=Q(w,v).g;w=L(w,D.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=D,C(w))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function S(E){return E.h==-1}t.l=function(E){return E=L(this,E),S(E)?-1:C(E)?0:1};function x(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(g)}t.abs=function(){return S(this)?x(this):this},t.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,D=0;D<=v;D++){var T=I+(this.i(D)&65535)+(E.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);I=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function L(E,v){return E.add(x(v))}t.j=function(E){if(C(this)||C(E))return p;if(S(this))return S(E)?x(this).j(x(E)):x(x(this).j(E));if(S(E))return x(this.j(x(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<E.g.length;D++){var T=this.i(I)>>>16,_=this.i(I)&65535,pr=E.i(D)>>>16,Ka=E.i(D)&65535;w[2*I+2*D]+=_*Ka,H(w,2*I+2*D),w[2*I+2*D+1]+=T*Ka,H(w,2*I+2*D+1),w[2*I+2*D+1]+=_*pr,H(w,2*I+2*D+1),w[2*I+2*D+2]+=T*pr,H(w,2*I+2*D+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function H(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function V(E,v){this.g=E,this.h=v}function Q(E,v){if(C(v))throw Error("division by zero");if(C(E))return new V(p,p);if(S(E))return v=Q(x(E),v),new V(x(v.g),x(v.h));if(S(v))return v=Q(E,x(v)),new V(x(v.g),v.h);if(30<E.g.length){if(S(E)||S(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,I=v;0>=I.l(E);)w=re(w),I=re(I);var D=Z(w,1),T=Z(I,1);for(I=Z(I,2),w=Z(w,2);!C(I);){var _=T.add(I);0>=_.l(E)&&(D=D.add(w),T=_),I=Z(I,1),w=Z(w,1)}return v=L(E,D.j(v)),new V(D,v)}for(D=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=l(w),_=T.j(v);S(_)||0<_.l(E);)w-=I,T=l(w),_=T.j(v);C(T)&&(T=g),D=D.add(T),E=L(E,_)}return new V(D,E)}t.A=function(E){return Q(this,E).h},t.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},t.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},t.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function re(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function Z(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,D=[],T=0;T<I;T++)D[T]=0<v?E.i(T+w)>>>v|E.i(T+w+1)<<32-v:E.i(T+w);return new s(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Jv=jS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,yi=jS.Integer=s}).apply(typeof LS<"u"?LS:typeof self<"u"?self:typeof window<"u"?window:{});var sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ur={};var Xv,e_,oa,t_,Eu,af,n_,r_,i_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof sf=="object"&&sf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var b=c[m];if(!(b in f))break e;f=f[b]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,b={next:function(){if(!m&&f<c.length){var R=f++;return{value:d(R,c[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,b,R){for(var j=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)j[Pe-2]=arguments[Pe];return d.prototype[b].apply(m,j)}}function S(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function x(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let b=c.length||0,R=m.length||0;c.length=b+R;for(let j=0;j<R;j++)c[b+j]=m[j]}else c.push(m)}}class L{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Q(c){return Q[" "](c),c}Q[" "]=function(){};var re=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function Z(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(f in m)c[f]=m[f];for(let R=0;R<w.length;R++)f=w[R],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=eg;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class pr{constructor(){this.h=this.g=null}add(d,f){let m=Ka.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Ka=new L(()=>new aR,c=>c.reset());class aR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Qa,Ya=!1,eg=new pr,W0=()=>{let c=a.Promise.resolve(void 0);Qa=()=>{c.then(cR)}};var cR=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){T(f)}var d=Ka;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ya=!1};function Yr(){this.s=this.s,this.C=this.C}Yr.prototype.s=!1,Yr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Yr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Dt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Dt.prototype.h=function(){this.defaultPrevented=!0};var uR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Za(c,d){if(Dt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(re){e:{try{Q(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:lR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Za.aa.h.call(this)}}C(Za,Dt);var lR={2:"touch",3:"pen",4:"mouse"};Za.prototype.h=function(){Za.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ja="closure_listenable_"+(1e6*Math.random()|0),dR=0;function hR(c,d,f,m,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=b,this.key=++dR,this.da=this.fa=!1}function dl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function hl(c){this.src=c,this.g={},this.h=0}hl.prototype.add=function(c,d,f,m,b){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var j=ng(c,d,m,b);return-1<j?(d=c[j],f||(d.fa=!1)):(d=new hR(d,this.src,R,!!m,b),d.fa=f,c.push(d)),d};function tg(c,d){var f=d.type;if(f in c.g){var m=c.g[f],b=Array.prototype.indexOf.call(m,d,void 0),R;(R=0<=b)&&Array.prototype.splice.call(m,b,1),R&&(dl(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function ng(c,d,f,m){for(var b=0;b<c.length;++b){var R=c[b];if(!R.da&&R.listener==d&&R.capture==!!f&&R.ha==m)return b}return-1}var rg="closure_lm_"+(1e6*Math.random()|0),ig={};function K0(c,d,f,m,b){if(m&&m.once)return Y0(c,d,f,m,b);if(Array.isArray(d)){for(var R=0;R<d.length;R++)K0(c,d[R],f,m,b);return null}return f=cg(f),c&&c[Ja]?c.K(d,f,l(m)?!!m.capture:!!m,b):Q0(c,d,f,!1,m,b)}function Q0(c,d,f,m,b,R){if(!d)throw Error("Invalid event type");var j=l(b)?!!b.capture:!!b,Pe=sg(c);if(Pe||(c[rg]=Pe=new hl(c)),f=Pe.add(d,f,m,j,R),f.proxy)return f;if(m=fR(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)uR||(b=j),b===void 0&&(b=!1),c.addEventListener(d.toString(),m,b);else if(c.attachEvent)c.attachEvent(J0(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function fR(){function c(f){return d.call(c.src,c.listener,f)}let d=pR;return c}function Y0(c,d,f,m,b){if(Array.isArray(d)){for(var R=0;R<d.length;R++)Y0(c,d[R],f,m,b);return null}return f=cg(f),c&&c[Ja]?c.L(d,f,l(m)?!!m.capture:!!m,b):Q0(c,d,f,!0,m,b)}function Z0(c,d,f,m,b){if(Array.isArray(d))for(var R=0;R<d.length;R++)Z0(c,d[R],f,m,b);else m=l(m)?!!m.capture:!!m,f=cg(f),c&&c[Ja]?(c=c.i,d=String(d).toString(),d in c.g&&(R=c.g[d],f=ng(R,f,m,b),-1<f&&(dl(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete c.g[d],c.h--)))):c&&(c=sg(c))&&(d=c.g[d.toString()],c=-1,d&&(c=ng(d,f,m,b)),(f=-1<c?d[c]:null)&&og(f))}function og(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ja])tg(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(J0(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=sg(d))?(tg(f,c),f.h==0&&(f.src=null,d[rg]=null)):dl(c)}}}function J0(c){return c in ig?ig[c]:ig[c]="on"+c}function pR(c,d){if(c.da)c=!0;else{d=new Za(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&og(c),c=f.call(m,d)}return c}function sg(c){return c=c[rg],c instanceof hl?c:null}var ag="__closure_events_fn_"+(1e9*Math.random()>>>0);function cg(c){return typeof c=="function"?c:(c[ag]||(c[ag]=function(d){return c.handleEvent(d)}),c[ag])}function bt(){Yr.call(this),this.i=new hl(this),this.M=this,this.F=null}C(bt,Yr),bt.prototype[Ja]=!0,bt.prototype.removeEventListener=function(c,d,f,m){Z0(this,c,d,f,m)};function Ot(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new Dt(d,c);else if(d instanceof Dt)d.target=d.target||c;else{var b=d;d=new Dt(m,c),I(d,b)}if(b=!0,f)for(var R=f.length-1;0<=R;R--){var j=d.g=f[R];b=fl(j,m,!0,d)&&b}if(j=d.g=c,b=fl(j,m,!0,d)&&b,b=fl(j,m,!1,d)&&b,f)for(R=0;R<f.length;R++)j=d.g=f[R],b=fl(j,m,!1,d)&&b}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)dl(f[m]);delete c.g[d],c.h--}}this.F=null},bt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},bt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function fl(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,R=0;R<d.length;++R){var j=d[R];if(j&&!j.da&&j.capture==f){var Pe=j.listener,_t=j.ha||j.src;j.fa&&tg(c.i,j),b=Pe.call(_t,m)!==!1&&b}}return b&&!m.defaultPrevented}function X0(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function eI(c){c.g=X0(()=>{c.g=null,c.i&&(c.i=!1,eI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class gR extends Yr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:eI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xa(c){Yr.call(this),this.h=c,this.g={}}C(Xa,Yr);var tI=[];function nI(c){Z(c.g,function(d,f){this.g.hasOwnProperty(f)&&og(d)},c),c.g={}}Xa.prototype.N=function(){Xa.aa.N.call(this),nI(this)},Xa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ug=a.JSON.stringify,mR=a.JSON.parse,yR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function lg(){}lg.prototype.h=null;function rI(c){return c.h||(c.h=c.i())}function iI(){}var ec={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dg(){Dt.call(this,"d")}C(dg,Dt);function hg(){Dt.call(this,"c")}C(hg,Dt);var Li={},oI=null;function pl(){return oI=oI||new bt}Li.La="serverreachability";function sI(c){Dt.call(this,Li.La,c)}C(sI,Dt);function tc(c){let d=pl();Ot(d,new sI(d))}Li.STAT_EVENT="statevent";function aI(c,d){Dt.call(this,Li.STAT_EVENT,c),this.stat=d}C(aI,Dt);function kt(c){let d=pl();Ot(d,new aI(d,c))}Li.Ma="timingevent";function cI(c,d){Dt.call(this,Li.Ma,c),this.size=d}C(cI,Dt);function nc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function rc(){this.g=!0}rc.prototype.xa=function(){this.g=!1};function vR(c,d,f,m,b,R){c.info(function(){if(c.g)if(R)for(var j="",Pe=R.split("&"),_t=0;_t<Pe.length;_t++){var Te=Pe[_t].split("=");if(1<Te.length){var Tt=Te[0];Te=Te[1];var At=Tt.split("_");j=2<=At.length&&At[1]=="type"?j+(Tt+"="+Te+"&"):j+(Tt+"=redacted&")}}else j=null;else j=R;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+f+`
`+j})}function _R(c,d,f,m,b,R,j){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+f+`
`+R+" "+j})}function es(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+ER(c,f)+(m?" "+m:"")})}function wR(c,d){c.info(function(){return"TIMEOUT: "+d})}rc.prototype.info=function(){};function ER(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var R=b[0];if(R!="noop"&&R!="stop"&&R!="close")for(var j=1;j<b.length;j++)b[j]=""}}}}return ug(f)}catch{return d}}var gl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},uI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fg;function ml(){}C(ml,lg),ml.prototype.g=function(){return new XMLHttpRequest},ml.prototype.i=function(){return{}},fg=new ml;function Zr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new Xa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lI}function lI(){this.i=null,this.g="",this.h=!1}var dI={},pg={};function gg(c,d,f){c.L=1,c.v=wl(gr(d)),c.m=f,c.P=!0,hI(c,null)}function hI(c,d){c.F=Date.now(),yl(c),c.A=gr(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),TI(f.i,"t",m),c.C=0,f=c.j.J,c.h=new lI,c.g=qI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new gR(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(tI[0]=b.toString()),b=tI);for(var R=0;R<b.length;R++){var j=K0(f,b[R],m||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),tc(),vR(c.i,c.u,c.A,c.l,c.R,c.m)}Zr.prototype.ca=function(c){c=c.target;let d=this.M;d&&mr(c)==3?d.j():this.Y(c)},Zr.prototype.Y=function(c){try{if(c==this.g)e:{let At=mr(this.g);var d=this.g.Ba();let rs=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||PI(this.g)))){this.J||At!=4||d==7||(d==8||0>=rs?tc(3):tc(2)),mg(this);var f=this.g.Z();this.X=f;t:if(fI(this)){var m=PI(this.g);c="";var b=m.length,R=mr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ji(this),ic(this);var j="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(R&&d==b-1)});m.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,_R(this.i,this.u,this.A,this.l,this.R,At,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,_t=this.g;if((Pe=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Pe)){var Te=Pe;break t}}Te=null}if(f=Te)es(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yg(this,f);else{this.o=!1,this.s=3,kt(12),ji(this),ic(this);break e}}if(this.P){f=!0;let An;for(;!this.J&&this.C<j.length;)if(An=IR(this,j),An==pg){At==4&&(this.s=4,kt(14),f=!1),es(this.i,this.l,null,"[Incomplete Response]");break}else if(An==dI){this.s=4,kt(15),es(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else es(this.i,this.l,An,null),yg(this,An);if(fI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||j.length!=0||this.h.h||(this.s=1,kt(16),f=!1),this.o=this.o&&f,!f)es(this.i,this.l,j,"[Invalid Chunked Response]"),ji(this),ic(this);else if(0<j.length&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.ba&&!Tt.M&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Cg(Tt),Tt.M=!0,kt(11))}}else es(this.i,this.l,j,null),yg(this,j);At==4&&ji(this),this.o&&!this.J&&(At==4?UI(this.j,this):(this.o=!1,yl(this)))}else jR(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),ji(this),ic(this)}}}catch{}finally{}};function fI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function IR(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?pg:(f=Number(d.substring(f,m)),isNaN(f)?dI:(m+=1,m+f>d.length?pg:(d=d.slice(m,m+f),c.C=m+f,d)))}Zr.prototype.cancel=function(){this.J=!0,ji(this)};function yl(c){c.S=Date.now()+c.I,pI(c,c.I)}function pI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=nc(g(c.ba,c),d)}function mg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Zr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(wR(this.i,this.A),this.L!=2&&(tc(),kt(17)),ji(this),this.s=2,ic(this)):pI(this,this.S-c)};function ic(c){c.j.G==0||c.J||UI(c.j,c)}function ji(c){mg(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,nI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function yg(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||vg(f.h,c))){if(!c.K&&vg(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)bl(f),Cl(f);else break e;Ig(f),kt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=nc(g(f.Za,f),6e3));if(1>=yI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Bi(f,11)}else if((c.K||f.g==c)&&bl(f),!H(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let Te=b[d];if(f.T=Te[0],Te=Te[1],f.G==2)if(Te[0]=="c"){f.K=Te[1],f.ia=Te[2];let Tt=Te[3];Tt!=null&&(f.la=Tt,f.j.info("VER="+f.la));let At=Te[4];At!=null&&(f.Aa=At,f.j.info("SVER="+f.Aa));let rs=Te[5];rs!=null&&typeof rs=="number"&&0<rs&&(m=1.5*rs,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let An=c.g;if(An){let Al=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Al){var R=m.h;R.g||Al.indexOf("spdy")==-1&&Al.indexOf("quic")==-1&&Al.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(_g(R,R.h),R.h=null))}if(m.D){let Dg=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;Dg&&(m.ya=Dg,je(m.I,m.D,Dg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var j=c;if(m.qa=HI(m,m.J?m.ia:null,m.W),j.K){vI(m.h,j);var Pe=j,_t=m.L;_t&&(Pe.I=_t),Pe.B&&(mg(Pe),yl(Pe)),m.g=j}else LI(m);0<f.i.length&&Dl(f)}else Te[0]!="stop"&&Te[0]!="close"||Bi(f,7);else f.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?Bi(f,7):Eg(f):Te[0]!="noop"&&f.l&&f.l.ta(Te),f.v=0)}}tc(4)}catch{}}var CR=class{constructor(c,d){this.g=c,this.map=d}};function gI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function yI(c){return c.h?1:c.g?c.g.size:0}function vg(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function _g(c,d){c.g?c.g.add(d):c.h=d}function vI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}gI.prototype.cancel=function(){if(this.i=_I(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function _I(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return S(c.i)}function DR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function bR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function wI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=bR(c),m=DR(c),b=m.length,R=0;R<b;R++)d.call(void 0,m[R],f&&f[R],c)}var EI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),b=null;if(0<=m){var R=c[f].substring(0,m);b=c[f].substring(m+1)}else R=c[f];d(R,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Ui(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ui){this.h=c.h,vl(this,c.j),this.o=c.o,this.g=c.g,_l(this,c.s),this.l=c.l;var d=c.i,f=new ac;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),II(this,f),this.m=c.m}else c&&(d=String(c).match(EI))?(this.h=!1,vl(this,d[1]||"",!0),this.o=oc(d[2]||""),this.g=oc(d[3]||"",!0),_l(this,d[4]),this.l=oc(d[5]||"",!0),II(this,d[6]||"",!0),this.m=oc(d[7]||"")):(this.h=!1,this.i=new ac(null,this.h))}Ui.prototype.toString=function(){var c=[],d=this.j;d&&c.push(sc(d,CI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(sc(d,CI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(sc(f,f.charAt(0)=="/"?xR:SR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",sc(f,RR)),c.join("")};function gr(c){return new Ui(c)}function vl(c,d,f){c.j=f?oc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function _l(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function II(c,d,f){d instanceof ac?(c.i=d,NR(c.i,c.h)):(f||(d=sc(d,MR)),c.i=new ac(d,c.h))}function je(c,d,f){c.i.set(d,f)}function wl(c){return je(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function oc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function sc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,AR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function AR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var CI=/[#\/\?@]/g,SR=/[#\?:]/g,xR=/[#\?]/g,MR=/[#\?@]/g,RR=/#/g;function ac(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Jr(c){c.g||(c.g=new Map,c.h=0,c.i&&TR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=ac.prototype,t.add=function(c,d){Jr(this),this.i=null,c=ts(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function DI(c,d){Jr(c),d=ts(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function bI(c,d){return Jr(c),d=ts(c,d),c.g.has(d)}t.forEach=function(c,d){Jr(this),this.g.forEach(function(f,m){f.forEach(function(b){c.call(d,b,m,this)},this)},this)},t.na=function(){Jr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let b=c[m];for(let R=0;R<b.length;R++)f.push(d[m])}return f},t.V=function(c){Jr(this);let d=[];if(typeof c=="string")bI(this,c)&&(d=d.concat(this.g.get(ts(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Jr(this),this.i=null,c=ts(this,c),bI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function TI(c,d,f){DI(c,d),0<f.length&&(c.i=null,c.g.set(ts(c,d),S(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let R=encodeURIComponent(String(m)),j=this.V(m);for(m=0;m<j.length;m++){var b=R;j[m]!==""&&(b+="="+encodeURIComponent(String(j[m]))),c.push(b)}}return this.i=c.join("&")};function ts(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function NR(c,d){d&&!c.j&&(Jr(c),c.i=null,c.g.forEach(function(f,m){var b=m.toLowerCase();m!=b&&(DI(this,m),TI(this,b,f))},c)),c.j=d}function PR(c,d){let f=new rc;if(a.Image){let m=new Image;m.onload=y(Xr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Xr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Xr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Xr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function OR(c,d){let f=new rc,m=new AbortController,b=setTimeout(()=>{m.abort(),Xr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(R=>{clearTimeout(b),R.ok?Xr(f,"TestPingServer: ok",!0,d):Xr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Xr(f,"TestPingServer: error",!1,d)})}function Xr(c,d,f,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(f)}catch{}}function kR(){this.g=new yR}function FR(c,d,f){let m=f||"";try{wI(c,function(b,R){let j=b;l(b)&&(j=ug(b)),d.push(m+R+"="+encodeURIComponent(j))})}catch(b){throw d.push(m+"type="+encodeURIComponent("_badmap")),b}}function cc(c){this.l=c.Ub||null,this.j=c.eb||!1}C(cc,lg),cc.prototype.g=function(){return new El(this.l,this.j)},cc.prototype.i=function(c){return function(){return c}}({});function El(c,d){bt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(El,bt),t=El.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,lc(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uc(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,lc(this)),this.g&&(this.readyState=3,lc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;AI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function AI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?uc(this):lc(this),this.readyState==3&&AI(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,uc(this))},t.Qa=function(c){this.g&&(this.response=c,uc(this))},t.ga=function(){this.g&&uc(this)};function uc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,lc(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function lc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(El.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function SI(c){let d="";return Z(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function wg(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=SI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):je(c,d,f))}function We(c){bt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(We,bt);var VR=/^https?$/i,LR=["POST","PUT"];t=We.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fg.g(),this.v=this.o?rI(this.o):rI(fg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(R){xI(this,R);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)f.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())f.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(LR,d,void 0))||m||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,j]of f)this.g.setRequestHeader(R,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{NI(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){xI(this,R)}};function xI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,MI(c),Il(c)}function MI(c){c.A||(c.A=!0,Ot(c,"complete"),Ot(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ot(this,"complete"),Ot(this,"abort"),Il(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Il(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?RI(this):this.bb())},t.bb=function(){RI(this)};function RI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||mr(c)!=4||c.Z()!=2)){if(c.u&&mr(c)==4)X0(c.Ea,0,c);else if(Ot(c,"readystatechange"),mr(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=j===0){var b=String(c.D).match(EI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!VR.test(b?b.toLowerCase():"")}f=m}if(f)Ot(c,"complete"),Ot(c,"success");else{c.m=6;try{var R=2<mr(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",MI(c)}}finally{Il(c)}}}}function Il(c,d){if(c.g){NI(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ot(c,"ready");try{f.onreadystatechange=m}catch{}}}function NI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function mr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<mr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),mR(d)}};function PI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function jR(c){let d={};c=(c.g&&2<=mr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(H(c[m]))continue;var f=D(c[m]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=d[b]||[];d[b]=R,R.push(f)}E(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function OI(c){this.Aa=0,this.i=[],this.j=new rc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dc("baseRetryDelayMs",5e3,c),this.cb=dc("retryDelaySeedMs",1e4,c),this.Wa=dc("forwardChannelMaxRetries",2,c),this.wa=dc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new gI(c&&c.concurrentRequestLimit),this.Da=new kR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=OI.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){kt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=HI(this,null,this.W),Dl(this)};function Eg(c){if(kI(c),c.G==3){var d=c.U++,f=gr(c.I);if(je(f,"SID",c.K),je(f,"RID",d),je(f,"TYPE","terminate"),hc(c,f),d=new Zr(c,c.j,d),d.L=2,d.v=wl(gr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=qI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),yl(d)}$I(c)}function Cl(c){c.g&&(Cg(c),c.g.cancel(),c.g=null)}function kI(c){Cl(c),c.u&&(a.clearTimeout(c.u),c.u=null),bl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Dl(c){if(!mI(c.h)&&!c.s){c.s=!0;var d=c.Ga;Qa||W0(),Ya||(Qa(),Ya=!0),eg.add(d,c),c.B=0}}function UR(c,d){return yI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=nc(g(c.Ga,c,d),BI(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Zr(this,this.j,c),R=this.o;if(this.S&&(R?(R=v(R),I(R,this.S)):R=this.S),this.m!==null||this.O||(b.H=R,R=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=VI(this,b,d),f=gr(this.I),je(f,"RID",c),je(f,"CVER",22),this.D&&je(f,"X-HTTP-Session-Id",this.D),hc(this,f),R&&(this.O?d="headers="+encodeURIComponent(String(SI(R)))+"&"+d:this.m&&wg(f,this.m,R)),_g(this.h,b),this.Ua&&je(f,"TYPE","init"),this.P?(je(f,"$req",d),je(f,"SID","null"),b.T=!0,gg(b,f,null)):gg(b,f,d),this.G=2}}else this.G==3&&(c?FI(this,c):this.i.length==0||mI(this.h)||FI(this))};function FI(c,d){var f;d?f=d.l:f=c.U++;let m=gr(c.I);je(m,"SID",c.K),je(m,"RID",f),je(m,"AID",c.T),hc(c,m),c.m&&c.o&&wg(m,c.m,c.o),f=new Zr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=VI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),_g(c.h,f),gg(f,m,d)}function hc(c,d){c.H&&Z(c.H,function(f,m){je(d,m,f)}),c.l&&wI({},function(f,m){je(d,m,f)})}function VI(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var b=c.i;let R=-1;for(;;){let j=["count="+f];R==-1?0<f?(R=b[0].g,j.push("ofs="+R)):R=0:j.push("ofs="+R);let Pe=!0;for(let _t=0;_t<f;_t++){let Te=b[_t].g,Tt=b[_t].map;if(Te-=R,0>Te)R=Math.max(0,b[_t].g-100),Pe=!1;else try{FR(Tt,j,"req"+Te+"_")}catch{m&&m(Tt)}}if(Pe){m=j.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function LI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Qa||W0(),Ya||(Qa(),Ya=!0),eg.add(d,c),c.v=0}}function Ig(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=nc(g(c.Fa,c),BI(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,jI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=nc(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),Cl(this),jI(this))};function Cg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function jI(c){c.g=new Zr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=gr(c.qa);je(d,"RID","rpc"),je(d,"SID",c.K),je(d,"AID",c.T),je(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&je(d,"TO",c.ja),je(d,"TYPE","xmlhttp"),hc(c,d),c.m&&c.o&&wg(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=wl(gr(d)),f.m=null,f.P=!0,hI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Cl(this),Ig(this),kt(19))};function bl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function UI(c,d){var f=null;if(c.g==d){bl(c),Cg(c),c.g=null;var m=2}else if(vg(c.h,d))f=d.D,vI(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;m=pl(),Ot(m,new cI(m,f)),Dl(c)}else LI(c);else if(b=d.s,b==3||b==0&&0<d.X||!(m==1&&UR(c,d)||m==2&&Ig(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Bi(c,5);break;case 4:Bi(c,10);break;case 3:Bi(c,6);break;default:Bi(c,2)}}}function BI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Bi(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let b=!m;m=new Ui(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vl(m,"https"),wl(m),b?PR(m.toString(),f):OR(m.toString(),f)}else kt(2);c.G=0,c.l&&c.l.sa(d),$I(c),kI(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function $I(c){if(c.G=0,c.ka=[],c.l){let d=_I(c.h);(d.length!=0||c.i.length!=0)&&(x(c.ka,d),x(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function HI(c,d,f){var m=f instanceof Ui?gr(f):new Ui(f);if(m.g!="")d&&(m.g=d+"."+m.g),_l(m,m.s);else{var b=a.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var R=new Ui(null);m&&vl(R,m),d&&(R.g=d),b&&_l(R,b),f&&(R.l=f),m=R}return f=c.D,d=c.ya,f&&d&&je(m,f,d),je(m,"VER",c.la),hc(c,m),m}function qI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new We(new cc({eb:f})):new We(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zI(){}t=zI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(c,d){return new Xt(c,d)};function Xt(c,d){bt.call(this),this.g=new OI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!H(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ns(this)}C(Xt,bt),Xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Eg(this.g)},Xt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=ug(c),c=f);d.i.push(new CR(d.Ya++,c)),d.G==3&&Dl(d)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Eg(this.g),delete this.g,Xt.aa.N.call(this)};function GI(c){dg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(GI,dg);function WI(){hg.call(this),this.status=1}C(WI,hg);function ns(c){this.g=c}C(ns,zI),ns.prototype.ua=function(){Ot(this.g,"a")},ns.prototype.ta=function(c){Ot(this.g,new GI(c))},ns.prototype.sa=function(c){Ot(this.g,new WI)},ns.prototype.ra=function(){Ot(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,i_=Ur.createWebChannelTransport=function(){return new Tl},r_=Ur.getStatEventTarget=function(){return pl()},n_=Ur.Event=Li,af=Ur.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gl.NO_ERROR=0,gl.TIMEOUT=8,gl.HTTP_ERROR=6,Eu=Ur.ErrorCode=gl,uI.COMPLETE="complete",t_=Ur.EventType=uI,iI.EventType=ec,ec.OPEN="a",ec.CLOSE="b",ec.ERROR="c",ec.MESSAGE="d",bt.prototype.listen=bt.prototype.K,oa=Ur.WebChannel=iI,e_=Ur.FetchXmlHttpFactory=cc,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,Xv=Ur.XhrIo=We}).apply(typeof sf<"u"?sf:typeof self<"u"?self:typeof window<"u"?window:{});var US="@firebase/firestore";var at=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");var Fa="10.13.2";var Di=new Ml("@firebase/firestore");function la(){return Di.logLevel}function uE(t){Di.setLogLevel(t)}function k(t,...e){if(Di.logLevel<=Bn.DEBUG){let n=e.map(lE);Di.debug(`Firestore (${Fa}): ${t}`,...n)}}function Xe(t,...e){if(Di.logLevel<=Bn.ERROR){let n=e.map(lE);Di.error(`Firestore (${Fa}): ${t}`,...n)}}function Dn(t,...e){if(Di.logLevel<=Bn.WARN){let n=e.map(lE);Di.warn(`Firestore (${Fa}): ${t}`,...n)}}function lE(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function K(t="Unexpected state"){let e=`FIRESTORE (${Fa}) INTERNAL ASSERTION FAILED: `+t;throw Xe(e),new Error(e)}function Y(t,e){t||K()}function $x(t,e){t||K()}function U(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends eC{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ct=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var vf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},u_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}},l_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},d_=class{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new ct;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ct,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ct)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Y(typeof r.accessToken=="string"),new vf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string"),new at(e)}},h_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},f_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new h_(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}},p_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},g_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Y(typeof n.token=="string"),this.R=n.token,new p_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function eB(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var _f=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=eB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function ce(t,e){return t<e?-1:t>e?1:0}function _a(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Hx(t){return t+"\0"}var Ge=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new P(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new P(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new P(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ge(0,0))}static max(){return new t(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var wf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(),r===void 0?r=e.length-n:r>e.length-n&&K(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ee=class t extends wf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},tB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,et=class t extends wf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return tB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new P(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new P(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var B=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ee.fromString(e))}static fromName(e){return new t(Ee.fromString(e).popFirst(5))}static empty(){return new t(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ee(e.slice()))}};var wa=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function m_(t){return t.fields.find(e=>e.kind===2)}function xo(t){return t.fields.filter(e=>e.kind!==2)}wa.UNKNOWN_ID=-1;var ma=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Pu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,bn.min())}};function qx(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new bn(i,B.empty(),e)}function zx(t){return new bn(t.readTime,t.key,-1)}var bn=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ee.min(),B.empty(),-1)}static max(){return new t(ee.max(),B.empty(),-1)}};function dE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=B.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}var Gx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ef=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Oi(t){return N(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==Gx)throw t;k("LocalStore","Unexpectedly lost primary lease")})}var A=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var If=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new ct,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ko(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=hE(r.target.error);this.V.reject(new ko(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new ko(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new v_(n)}},bi=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(fc())===12.2&&Xe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),Mo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!xl())return!1;if(t.v())return!0;let e=fc(),n=t.S(e),r=0<n&&n<10,i=Wx(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new ko(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ko(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return N(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=If.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),A.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function Wx(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var y_=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Mo(this.B.delete())}},ko=class extends P{constructor(e,n){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ki(t){return t.name==="IndexedDbTransactionError"}var v_=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(k("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Mo(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),Mo(this.store.add(e))}get(e){return Mo(this.store.get(e)).next(n=>(n===void 0&&(n=null),k("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),Mo(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),Mo(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new A((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new A((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,n){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new A((r,i)=>{n.onerror=o=>{let s=hE(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,n){let r=[];return new A((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new y_(a),l=n(a.primaryKey,a.value,u);if(l instanceof A){let h=l.catch(p=>(u.done(),A.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>A.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Mo(t){return new A((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=hE(r.target.error);n(i)}})}var BS=!1;function hE(t){let e=bi.S(fc());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BS||(BS=!0,setTimeout(()=>{throw r},0)),r}}return t}var __=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){ki(n)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Oi(n)}yield this.X(6e4)}))}},w_=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,o=!0;return A.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=zx(o);dE(s,r)>0&&(r=s)}),new bn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var un=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function nl(t){return t==null}function Ou(t){return t===0&&1/t==-1/0}function Kx(t){return typeof t=="number"&&Number.isInteger(t)&&!Ou(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function zt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$S(e)),e=nB(t.get(n),e);return $S(e)}function nB(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function $S(t){return t+""}function rr(t){let e=t.length;if(Y(e>=2),e===2)return Y(t.charAt(0)===""&&t.charAt(1)===""),Ee.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&K(),t.charAt(s+1)){case"":let a=t.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:K()}o=s+2}return new Ee(r)}var HS=["userId","batchId"];function hf(t,e){return[t,zt(e)]}function Qx(t,e,n){return[t,zt(e),n]}var rB={},iB=["prefixPath","collectionGroup","readTime","documentId"],oB=["prefixPath","collectionGroup","documentId"],sB=["collectionGroup","readTime","prefixPath","documentId"],aB=["canonicalId","targetId"],cB=["targetId","path"],uB=["path","targetId"],lB=["collectionId","parent"],dB=["indexId","uid"],hB=["uid","sequenceNumber"],fB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pB=["indexId","uid","orderedDocumentKey"],gB=["userId","collectionPath","documentId"],mB=["userId","collectionPath","largestBatchId"],yB=["userId","collectionGroup","largestBatchId"],Yx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vB=[...Yx,"documentOverlays"],Zx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Jx=Zx,fE=[...Jx,"indexConfiguration","indexState","indexEntries"],_B=fE,wB=[...fE,"globals"];var ku=class extends Ef{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function gt(t,e){let n=U(t);return bi.F(n._e,e)}function qS(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Xx(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Be=class t{constructor(e,n){this.comparator=e,this.root=n||or.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,or.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,or.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ga(this.root,e,this.comparator,!0)}},ga=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},or=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};or.EMPTY=null,or.RED=!0,or.BLACK=!1;or.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,n,r,i,o){return this}insert(e,n,r){return new or(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Fe=class t{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cf(this.data.getIterator())}getIteratorFrom(e){return new Cf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Cf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function sa(t){return t.hasNext()?t.getNext():void 0}var ln=class t{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new t([])}unionWith(e){let n=new Fe(et.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _a(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Df=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function eM(){return typeof atob<"u"}var nt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Df("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};nt.EMPTY_BYTE_STRING=new nt("");var EB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(t){if(Y(!!t),typeof t=="string"){let e=0,n=EB.exec(t);if(Y(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ti(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}function pp(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function pE(t){let e=t.mapValue.fields.__previous_value__;return pp(e)?pE(e):e}function Fu(t){let e=Hr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}var E_=class{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Ai=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ii={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ff={nullValue:"NULL_VALUE"};function Fo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pp(t)?4:tM(t)?9007199254740991:gp(t)?10:11:K()}function cr(t,e){if(t===e)return!0;let n=Fo(t);if(n!==Fo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fu(t).isEqual(Fu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Hr(i.timestampValue),a=Hr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Ti(i.bytesValue).isEqual(Ti(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return He(i.geoPointValue.latitude)===He(o.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return He(i.integerValue)===He(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=He(i.doubleValue),a=He(o.doubleValue);return s===a?Ou(s)===Ou(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return _a(t.arrayValue.values||[],e.arrayValue.values||[],cr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(qS(s)!==qS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!cr(s[u],a[u])))return!1;return!0}(t,e);default:return K()}}function Vu(t,e){return(t.values||[]).find(n=>cr(n,e))!==void 0}function Si(t,e){if(t===e)return 0;let n=Fo(t),r=Fo(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=He(o.integerValue||o.doubleValue),u=He(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return zS(t.timestampValue,e.timestampValue);case 4:return zS(Fu(t),Fu(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Ti(o),u=Ti(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ce(a[l],u[l]);if(h!==0)return h}return ce(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ce(He(o.latitude),He(s.latitude));return a!==0?a:ce(He(o.longitude),He(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return GS(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(u=g.value)===null||u===void 0?void 0:u.arrayValue,S=ce(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:GS(y,C)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ii.mapValue&&s===Ii.mapValue)return 0;if(o===Ii.mapValue)return 1;if(s===Ii.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=ce(u[p],h[p]);if(g!==0)return g;let y=Si(a[u[p]],l[h[p]]);if(y!==0)return y}return ce(u.length,h.length)}(t.mapValue,e.mapValue);default:throw K()}}function zS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);let n=Hr(t),r=Hr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function GS(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Si(n[i],r[i]);if(o)return o}return ce(n.length,r.length)}function Ea(t){return I_(t)}function I_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Hr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ti(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return B.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=I_(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${I_(n.fields[s])}`;return i+"}"}(t.mapValue):K()}function Vo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function C_(t){return!!t&&"integerValue"in t}function Lu(t){return!!t&&"arrayValue"in t}function WS(t){return!!t&&"nullValue"in t}function KS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pf(t){return!!t&&"mapValue"in t}function gp(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Su(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Wo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Su(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Su(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var nM={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function IB(t){return"nullValue"in t?ff:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vo(Ai.empty(),B.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?gp(t)?nM:{mapValue:{}}:K()}function CB(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vo(Ai.empty(),B.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?nM:"mapValue"in t?gp(t)?{mapValue:{}}:Ii:K()}function QS(t,e){let n=Si(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function YS(t,e){let n=Si(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Pt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Su(n)}setAll(e){let n=et.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Su(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());pf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];pf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wo(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Su(this.value))}};function rM(t){let e=[];return Wo(t.fields,(n,r)=>{let i=new et([n]);if(pf(r)){let o=rM(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new ln(e)}var ut=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ee.min(),ee.min(),ee.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ee.min(),ee.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ee.min(),ee.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ur=class{constructor(e,n){this.position=e,this.inclusive=n}};function ZS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=B.comparator(B.fromName(s.referenceValue),n.key):r=Si(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function JS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cr(t.position[n],e.position[n]))return!1;return!0}var Lo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function DB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var bf=class{},_e=class t extends bf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new T_(e,n,r):n==="array-contains"?new x_(e,r):n==="in"?new Tf(e,r):n==="not-in"?new M_(e,r):n==="array-contains-any"?new R_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new A_(e,r):new S_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Si(n,this.value)):n!==null&&Fo(this.value)===Fo(n)&&this.matchesComparison(Si(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Re=class t extends bf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Ia(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ia(t){return t.op==="and"}function D_(t){return t.op==="or"}function gE(t){return iM(t)&&Ia(t)}function iM(t){for(let e of t.filters)if(e instanceof Re)return!1;return!0}function b_(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+Ea(t.value);if(gE(t))return t.filters.map(e=>b_(e)).join(",");{let e=t.filters.map(n=>b_(n)).join(",");return`${t.op}(${e})`}}function oM(t,e){return t instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.field.isEqual(i.field)&&cr(r.value,i.value)}(t,e):t instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&oM(s,i.filters[a]),!0):!1}(t,e):void K()}function sM(t,e){let n=t.filters.concat(e);return Re.create(n,t.op)}function aM(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${Ea(n.value)}`}(t):t instanceof Re?function(n){return n.op.toString()+" {"+n.getFilters().map(aM).join(" ,")+"}"}(t):"Filter"}var T_=class extends _e{constructor(e,n,r){super(e,n,r),this.key=B.fromName(r.referenceValue)}matches(e){let n=B.comparator(e.key,this.key);return this.matchesComparison(n)}},A_=class extends _e{constructor(e,n){super(e,"in",n),this.keys=cM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},S_=class extends _e{constructor(e,n){super(e,"not-in",n),this.keys=cM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function cM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>B.fromName(r.referenceValue))}var x_=class extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Lu(n)&&Vu(n.arrayValue,this.value)}},Tf=class extends _e{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Vu(this.value.arrayValue,n)}},M_=class extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Vu(this.value.arrayValue,n)}},R_=class extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Lu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Vu(this.value.arrayValue,r))}};var N_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function P_(t,e=null,n=[],r=[],i=null,o=null,s=null){return new N_(t,e,n,r,i,o,s)}function jo(t){let e=U(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>b_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),nl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ea(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ea(r)).join(",")),e.ue=n}return e.ue}function rl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!oM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!JS(t.startAt,e.startAt)&&JS(t.endAt,e.endAt)}function Af(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Sf(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function XS(t,e,n){let r=ff,i=!0;for(let o of Sf(t,e)){let s=ff,a=!0;switch(o.op){case"<":case"<=":s=IB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=ff}QS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];QS({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function ex(t,e,n){let r=Ii,i=!0;for(let o of Sf(t,e)){let s=Ii,a=!0;switch(o.op){case">=":case">":s=CB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ii}YS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];YS({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var Fn=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function uM(t,e,n,r,i,o,s,a){return new Fn(t,e,n,r,i,o,s,a)}function Va(t){return new Fn(t)}function tx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mE(t){return t.collectionGroup!==null}function ya(t){let e=U(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Fe(et.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Lo(o,r))}),n.has(et.keyField().canonicalString())||e.ce.push(new Lo(et.keyField(),r))}return e.ce}function Gt(t){let e=U(t);return e.le||(e.le=bB(e,ya(t))),e.le}function bB(t,e){if(t.limitType==="F")return P_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Lo(i.field,o)});let n=t.endAt?new ur(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ur(t.startAt.position,t.startAt.inclusive):null;return P_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function O_(t,e){let n=t.filters.concat([e]);return new Fn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xf(t,e,n){return new Fn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function il(t,e){return rl(Gt(t),Gt(e))&&t.limitType===e.limitType}function lM(t){return`${jo(Gt(t))}|lt:${t.limitType}`}function da(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>aM(i)).join(", ")}]`),nl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ea(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ea(i)).join(",")),`Target(${r})`}(Gt(t))}; limitType=${t.limitType})`}function ol(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):B.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of ya(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=ZS(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,ya(r),i)||r.endAt&&!function(s,a,u){let l=ZS(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,ya(r),i))}(t,e)}function dM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hM(t){return(e,n)=>{let r=!1;for(let i of ya(t)){let o=TB(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function TB(t,e,n){let r=t.field.isKeyField()?B.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Si(u,l):K()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var lr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wo(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Xx(this.inner)}size(){return this.innerSize}};var AB=new Be(B.comparator);function Jt(){return AB}var fM=new Be(B.comparator);function Tu(...t){let e=fM;for(let n of t)e=e.insert(n.key,n);return e}function pM(t){let e=fM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ir(){return xu()}function gM(){return xu()}function xu(){return new lr(t=>t.toString(),(t,e)=>t.isEqual(e))}var SB=new Be(B.comparator),xB=new Fe(B.comparator);function ue(...t){let e=xB;for(let n of t)e=e.add(n);return e}var MB=new Fe(ce);function yE(){return MB}function vE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(e)?"-0":e}}function mM(t){return{integerValue:""+t}}function yM(t,e){return Kx(e)?mM(e):vE(t,e)}var Ca=class{constructor(){this._=void 0}};function RB(t,e,n){return t instanceof xi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&pp(o)&&(o=pE(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof qr?_M(t,e):t instanceof zr?wM(t,e):function(i,o){let s=vM(i,o),a=nx(s)+nx(i.Pe);return C_(s)&&C_(i.Pe)?mM(a):vE(i.serializer,a)}(t,e)}function NB(t,e,n){return t instanceof qr?_M(t,e):t instanceof zr?wM(t,e):n}function vM(t,e){return t instanceof Mi?function(r){return C_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var xi=class extends Ca{},qr=class extends Ca{constructor(e){super(),this.elements=e}};function _M(t,e){let n=EM(e);for(let r of t.elements)n.some(i=>cr(i,r))||n.push(r);return{arrayValue:{values:n}}}var zr=class extends Ca{constructor(e){super(),this.elements=e}};function wM(t,e){let n=EM(e);for(let r of t.elements)n=n.filter(i=>!cr(i,r));return{arrayValue:{values:n}}}var Mi=class extends Ca{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function nx(t){return He(t.integerValue||t.doubleValue)}function EM(t){return Lu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Uo=class{constructor(e,n){this.field=e,this.transform=n}};function PB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof qr&&i instanceof qr||r instanceof zr&&i instanceof zr?_a(r.elements,i.elements,cr):r instanceof Mi&&i instanceof Mi?cr(r.Pe,i.Pe):r instanceof xi&&i instanceof xi}(t.transform,e.transform)}var k_=class{constructor(e,n){this.version=e,this.transformResults=n}},Qe=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function gf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Da=class{};function IM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ni(t.key,Qe.none()):new Ri(t.key,t.data,Qe.none());{let n=t.data,r=Pt.empty(),i=new Fe(et.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Vn(t.key,r,new ln(i.toArray()),Qe.none())}}function OB(t,e,n){t instanceof Ri?function(i,o,s){let a=i.value.clone(),u=ix(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Vn?function(i,o,s){if(!gf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=ix(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(CM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Mu(t,e,n,r){return t instanceof Ri?function(o,s,a,u){if(!gf(o.precondition,s))return a;let l=o.value.clone(),h=ox(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vn?function(o,s,a,u){if(!gf(o.precondition,s))return a;let l=ox(o.fieldTransforms,u,s),h=s.data;return h.setAll(CM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return gf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function kB(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=vM(r.transform,i||null);o!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,o))}return n||null}function rx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_a(r,i,(o,s)=>PB(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ri=class extends Da{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Vn=class extends Da{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function CM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function ix(t,e,n){let r=new Map;Y(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,NB(s,a,n[i]))}return r}function ox(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,RB(o,s,e))}return r}var Ni=class extends Da{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ju=class extends Da{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Uu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&OB(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Mu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=gM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=IM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&_a(this.mutations,e.mutations,(n,r)=>rx(n,r))&&_a(this.baseMutations,e.baseMutations,(n,r)=>rx(n,r))}},F_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Y(e.mutations.length===r.length);let i=function(){return SB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Bu=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var V_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ot,we;function DM(t){switch(t){default:return K();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function bM(t){if(t===void 0)return Xe("GRPC error has no .code"),M.UNKNOWN;switch(t){case ot.OK:return M.OK;case ot.CANCELLED:return M.CANCELLED;case ot.UNKNOWN:return M.UNKNOWN;case ot.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case ot.INTERNAL:return M.INTERNAL;case ot.UNAVAILABLE:return M.UNAVAILABLE;case ot.UNAUTHENTICATED:return M.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case ot.NOT_FOUND:return M.NOT_FOUND;case ot.ALREADY_EXISTS:return M.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return M.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case ot.ABORTED:return M.ABORTED;case ot.OUT_OF_RANGE:return M.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return M.UNIMPLEMENTED;case ot.DATA_LOSS:return M.DATA_LOSS;default:return K()}}(we=ot||(ot={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";var sx=null;function TM(){return new TextEncoder}var FB=new yi([4294967295,4294967295],0);function ax(t){let e=TM().encode(t),n=new Jv;return n.update(e),new Uint8Array(n.digest())}function cx(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new yi([n,r],0),new yi([i,o],0)]}var L_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oo(`Invalid padding: ${n}`);if(r<0)throw new Oo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=yi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(yi.fromNumber(r)));return i.compare(FB)===1&&(i=new yi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=ax(e),[r,i]=cx(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=ax(e),[r,i]=cx(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Oo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var $u=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ee.min(),i,new Be(ce),Jt(),ue())}},Hu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ue(),ue(),ue())}};var va=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Mf=class{constructor(e,n){this.targetId=e,this.me=n}},Rf=class{constructor(e,n,r=nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Nf=class{constructor(){this.fe=0,this.ge=lx(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),n=ue(),r=ue();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K()}}),new Hu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=lx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Y(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},j_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Jt(),this.qe=ux(),this.Qe=new Be(ce)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(Af(o))if(r===0){let s=new B(o.path);this.Ue(n,s,ut.newNoDocument(s,ee.min()))}else Y(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}sx?.et(function(h,p,g,y,C){var S,x,L,H,V,Q;let re={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Z=p.unchangedNames;return Z&&(re.bloomFilter={applied:C===0,hashCount:(S=Z?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:(H=(L=(x=Z?.bits)===null||x===void 0?void 0:x.bitmap)===null||L===void 0?void 0:L.length)!==null&&H!==void 0?H:0,padding:(Q=(V=Z?.bits)===null||V===void 0?void 0:V.padding)!==null&&Q!==void 0?Q:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),re}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Ti(r).toUint8Array()}catch(u){if(u instanceof Df)return Dn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new L_(s,i,o)}catch(u){return Dn(u instanceof Oo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Af(a.target)){let u=new B(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,ut.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=ue();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new $u(e,n,this.Qe,this.ke,r);return this.ke=Jt(),this.qe=ux(),this.Qe=new Be(ce),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Nf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Fe(ce),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||k("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Nf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function ux(){return new Be(B.comparator)}function lx(){return new Be(B.comparator)}var VB={asc:"ASCENDING",desc:"DESCENDING"},LB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jB={and:"AND",or:"OR"},U_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function B_(t,e){return t.useProto3Json||nl(e)?e:{value:e}}function ba(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UB(t,e){return ba(t,e.toTimestamp())}function tt(t){return Y(!!t),ee.fromTimestamp(function(n){let r=Hr(n);return new Ge(r.seconds,r.nanos)}(t))}function _E(t,e){return $_(t,e).canonicalString()}function $_(t,e){let n=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function SM(t){let e=Ee.fromString(t);return Y(LM(e)),e}function qu(t,e){return _E(t.databaseId,e.path)}function sr(t,e){let n=SM(e);if(n.get(1)!==t.databaseId.projectId)throw new P(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new P(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B(RM(n))}function xM(t,e){return _E(t.databaseId,e)}function MM(t){let e=SM(t);return e.length===4?Ee.emptyPath():RM(e)}function H_(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RM(t){return Y(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function dx(t,e,n){return{name:qu(t,e),fields:n.value.mapValue.fields}}function NM(t,e,n){let r=sr(t,e.name),i=tt(e.updateTime),o=e.createTime?tt(e.createTime):ee.min(),s=new Pt({mapValue:{fields:e.fields}}),a=ut.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function BB(t,e){return"found"in e?function(r,i){Y(!!i.found),i.found.name,i.found.updateTime;let o=sr(r,i.found.name),s=tt(i.found.updateTime),a=i.found.createTime?tt(i.found.createTime):ee.min(),u=new Pt({mapValue:{fields:i.found.fields}});return ut.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){Y(!!i.missing),Y(!!i.readTime);let o=sr(r,i.missing),s=tt(i.readTime);return ut.newNoDocument(o,s)}(t,e):K()}function $B(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Y(h===void 0||typeof h=="string"),nt.fromBase64String(h||"")):(Y(h===void 0||h instanceof Buffer||h instanceof Uint8Array),nt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:bM(l.code);return new P(h,l.message||"")}(s);n=new Rf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=sr(t,r.document.name),o=tt(r.document.updateTime),s=r.document.createTime?tt(r.document.createTime):ee.min(),a=new Pt({mapValue:{fields:r.document.fields}}),u=ut.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new va(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=sr(t,r.document),o=r.readTime?tt(r.readTime):ee.min(),s=ut.newNoDocument(i,o),a=r.removedTargetIds||[];n=new va([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=sr(t,r.document),o=r.removedTargetIds||[];n=new va([],o,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new V_(i,o),a=r.targetId;n=new Mf(a,s)}}return n}function zu(t,e){let n;if(e instanceof Ri)n={update:dx(t,e.key,e.value)};else if(e instanceof Ni)n={delete:qu(t,e.key)};else if(e instanceof Vn)n={update:dx(t,e.key,e.data),updateMask:KB(e.fieldMask)};else{if(!(e instanceof ju))return K();n={verify:qu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof xi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Mi)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:UB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K()}(t,e.precondition)),n}function q_(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Qe.updateTime(tt(o.updateTime)):o.exists!==void 0?Qe.exists(o.exists):Qe.none()}(e.currentDocument):Qe.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Y(a.setToServerValue==="REQUEST_TIME"),u=new xi;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new qr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new zr(h)}else"increment"in a?u=new Mi(s,a.increment):K();let l=et.fromServerFormat(a.fieldPath);return new Uo(l,u)}(t,i)):[];if(e.update){e.update.name;let i=sr(t,e.update.name),o=new Pt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new ln(l.map(h=>et.fromServerFormat(h)))}(e.updateMask);return new Vn(i,o,s,n,r)}return new Ri(i,o,n,r)}if(e.delete){let i=sr(t,e.delete);return new Ni(i,n)}if(e.verify){let i=sr(t,e.verify);return new ju(i,n)}return K()}function HB(t,e){return t&&t.length>0?(Y(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?tt(i.updateTime):tt(o);return s.isEqual(ee.min())&&(s=tt(o)),new k_(s,i.transformResults||[])}(n,e))):[]}function PM(t,e){return{documents:[xM(t,e.path)]}}function OM(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xM(t,i);let o=function(l){if(l.length!==0)return VM(Re.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:ha(g.field),direction:zB(g.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=B_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function kM(t){let e=MM(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Y(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let g=FM(p);return g instanceof Re&&gE(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(g=>function(C){return new Lo(fa(C.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,nl(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){let g=!!p.before,y=p.values||[];return new ur(y,g)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new ur(y,g)}(n.endAt)),uM(e,i,s,o,a,"F",u,l)}function qB(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=fa(n.unaryFilter.field);return _e.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=fa(n.unaryFilter.field);return _e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=fa(n.unaryFilter.field);return _e.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=fa(n.unaryFilter.field);return _e.create(s,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(t):t.fieldFilter!==void 0?function(n){return _e.create(fa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Re.create(n.compositeFilter.filters.map(r=>FM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(n.compositeFilter.op))}(t):K()}function zB(t){return VB[t]}function GB(t){return LB[t]}function WB(t){return jB[t]}function ha(t){return{fieldPath:t.canonicalString()}}function fa(t){return et.fromServerFormat(t.fieldPath)}function VM(t){return t instanceof _e?function(n){if(n.op==="=="){if(KS(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NAN"}};if(WS(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(KS(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NOT_NAN"}};if(WS(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ha(n.field),op:GB(n.op),value:n.value}}}(t):t instanceof Re?function(n){let r=n.getFilters().map(i=>VM(i));return r.length===1?r[0]:{compositeFilter:{op:WB(n.op),filters:r}}}(t):K()}function KB(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ta=class t{constructor(e,n,r,i,o=ee.min(),s=ee.min(),a=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Pf=class{constructor(e){this.ct=e}};function QB(t,e){let n;if(e.document)n=NM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=B.fromSegments(e.noDocument.path),i=$o(e.noDocument.readTime);n=ut.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{let r=B.fromSegments(e.unknownDocument.path),i=$o(e.unknownDocument.version);n=ut.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new Ge(i[0],i[1]);return ee.fromTimestamp(o)}(e.readTime)),n}function hx(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Of(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:qu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ba(o,s.version.toTimestamp()),createTime:ba(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Bo(e.version)};else{if(!e.isUnknownDocument())return K();r.unknownDocument={path:n.path.toArray(),version:Bo(e.version)}}return r}function Of(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Bo(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $o(t){let e=new Ge(t.seconds,t.nanoseconds);return ee.fromTimestamp(e)}function Ro(t,e){let n=(e.baseMutations||[]).map(o=>q_(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>q_(t.ct,o)),i=Ge.fromMillis(e.localWriteTimeMs);return new Uu(e.batchId,i,n,r)}function Au(t){let e=$o(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?$o(t.lastLimboFreeSnapshotVersion):ee.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return Y(o.documents.length===1),Gt(Va(MM(o.documents[0])))}(t.query):function(o){return Gt(kM(o))}(t.query),new Ta(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,nt.fromBase64String(t.resumeToken))}function jM(t,e){let n=Bo(e.snapshotVersion),r=Bo(e.lastLimboFreeSnapshotVersion),i;i=Af(e.target)?PM(t.ct,e.target):OM(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:jo(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function wE(t){let e=kM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xf(e,e.limit,"L"):e}function o_(t,e){return new Bu(e.largestBatchId,q_(t.ct,e.overlayMutation))}function fx(t,e){let n=e.path.lastSegment();return[t,zt(e.path.popLast()),n]}function px(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Bo(r.readTime),documentKey:zt(r.documentKey.path),largestBatchId:r.largestBatchId}}var z_=class{getBundleMetadata(e,n){return gx(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:$o(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return gx(e).put(function(i){return{bundleId:i.id,createTime:Bo(tt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return mx(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:wE(o.bundledQuery),readTime:$o(o.readTime)}}(r)})}saveNamedQuery(e,n){return mx(e).put(function(i){return{name:i.name,readTime:Bo(tt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function gx(t){return gt(t,"bundles")}function mx(t){return gt(t,"namedQueries")}var kf=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Iu(e).get(fx(this.userId,n)).next(r=>r?o_(this.serializer,r):null)}getOverlays(e,n){let r=ir();return A.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new Bu(n,s);i.push(this.ht(e,a))}),A.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(zt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Iu(e).j("collectionPathOverlayIndex",a))}),A.waitFor(o)}getOverlaysForCollection(e,n,r){let i=ir(),o=zt(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Iu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=o_(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=ir(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Iu(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=o_(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,n){return Iu(e).put(function(i,o,s){let[a,u,l]=fx(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:zu(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Iu(t){return gt(t,"documentOverlays")}var G_=class{Pt(e){return gt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{let r=n?.value;return r?nt.fromUint8Array(r):nt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}};var Br=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(He(e.integerValue));else if("doubleValue"in e){let r=He(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Ou(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Hr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Ti(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?tM(e)?this.dt(n,Number.MAX_SAFE_INTEGER):gp(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):K()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let o=e.fields||{};this.dt(n,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(He(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),B.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Br.vt=new Br;function YB(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function yx(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=YB(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var W_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let n=this.qt(e),r=yx(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){let n=this.qt(e),r=yx(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){let n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},K_=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Q_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},No=class{constructor(){this.jt=new W_,this.Ht=new K_(this.jt),this.Jt=new Q_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Po=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function vi(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=vx(t.arrayValue,e.arrayValue),n!==0?n:(n=vx(t.directionalValue,e.directionalValue),n!==0?n:B.comparator(t.documentKey,e.documentKey)))}function vx(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Ff=class{constructor(e){this.Xt=new Fe((n,r)=>et.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let n of e.filters){let r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Y(e.collectionGroup===this.collectionId),this.nn)return!1;let n=m_(e);if(n!==void 0&&!this.sn(n))return!1;let r=xo(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Fe(et.comparator),n=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ma(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ma(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ma(r.field,r.dir==="asc"?0:1)));return new wa(wa.UNKNOWN_ID,this.collectionId,n,Pu.empty())}sn(e){for(let n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function UM(t){var e,n;if(Y(t instanceof _e||t instanceof Re),t instanceof _e){if(t instanceof Tf){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>_e.create(t.field,"==",o)))||[];return Re.create(i,"or")}return t}let r=t.filters.map(i=>UM(i));return Re.create(r,t.op)}function ZB(t){if(t.getFilters().length===0)return[];let e=J_(UM(t));return Y(BM(e)),Y_(e)||Z_(e)?[e]:e.getFilters()}function Y_(t){return t instanceof _e}function Z_(t){return t instanceof Re&&gE(t)}function BM(t){return Y_(t)||Z_(t)||function(n){if(n instanceof Re&&D_(n)){for(let r of n.getFilters())if(!Y_(r)&&!Z_(r))return!1;return!0}return!1}(t)}function J_(t){if(Y(t instanceof _e||t instanceof Re),t instanceof _e)return t;if(t.filters.length===1)return J_(t.filters[0]);let e=t.filters.map(r=>J_(r)),n=Re.create(e,t.op);return n=Vf(n),BM(n)?n:(Y(n instanceof Re),Y(Ia(n)),Y(n.filters.length>1),n.filters.reduce((r,i)=>EE(r,i)))}function EE(t,e){let n;return Y(t instanceof _e||t instanceof Re),Y(e instanceof _e||e instanceof Re),n=t instanceof _e?e instanceof _e?function(i,o){return Re.create([i,o],"and")}(t,e):_x(t,e):e instanceof _e?_x(e,t):function(i,o){if(Y(i.filters.length>0&&o.filters.length>0),Ia(i)&&Ia(o))return sM(i,o.getFilters());let s=D_(i)?i:o,a=D_(i)?o:i,u=s.filters.map(l=>EE(l,a));return Re.create(u,"or")}(t,e),Vf(n)}function _x(t,e){if(Ia(e))return sM(e,t.getFilters());{let n=e.filters.map(r=>EE(t,r));return Re.create(n,"or")}}function Vf(t){if(Y(t instanceof _e||t instanceof Re),t instanceof _e)return t;let e=t.getFilters();if(e.length===1)return Vf(e[0]);if(iM(t))return t;let n=e.map(i=>Vf(i)),r=[];return n.forEach(i=>{i instanceof _e?r.push(i):i instanceof Re&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Re.create(r,t.op)}var X_=class{constructor(){this.un=new Gu}addToCollectionParentIndex(e,n){return this.un.add(n),A.resolve()}getCollectionParents(e,n){return A.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return A.resolve()}deleteFieldIndex(e,n){return A.resolve()}deleteAllFieldIndexes(e){return A.resolve()}createTargetIndexes(e,n){return A.resolve()}getDocumentsMatchingTarget(e,n){return A.resolve(null)}getIndexType(e,n){return A.resolve(0)}getFieldIndexes(e,n){return A.resolve([])}getNextCollectionGroupToUpdate(e){return A.resolve(null)}getMinOffset(e,n){return A.resolve(bn.min())}getMinOffsetFromCollectionGroup(e,n){return A.resolve(bn.min())}updateCollectionGroup(e,n,r){return A.resolve()}updateIndexEntries(e,n){return A.resolve()}},Gu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Fe(Ee.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fe(Ee.comparator)).toArray()}};var cf=new Uint8Array(0),ew=class{constructor(e,n){this.databaseId=n,this.cn=new Gu,this.ln=new lr(r=>jo(r),(r,i)=>rl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});let o={collectionId:r,parent:zt(i)};return wx(e).put(o)}return A.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[Hx(n),""],!1,!0);return wx(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(rr(s.parent))}return r})}addFieldIndex(e,n){let r=Cu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=ca(e);return o.next(a=>{s.put(px(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=Cu(e),i=ca(e),o=aa(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Cu(e),r=aa(e),i=ca(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return A.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Ff(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=aa(e),i=!0,o=new Map;return A.forEach(this.hn(n),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ue(),a=[];return A.forEach(o,(u,l)=>{k("IndexedDbIndexManager",`Using index ${function(V){return`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(Q=>`${Q.fieldPath}:${Q.kind}`).join(",")}`}(u)} to execute ${jo(n)}`);let h=function(V,Q){let re=m_(Q);if(re===void 0)return null;for(let Z of Sf(V,re.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null}(l,u),p=function(V,Q){let re=new Map;for(let Z of xo(Q))for(let E of Sf(V,Z.fieldPath))switch(E.op){case"==":case"in":re.set(Z.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return re.set(Z.fieldPath.canonicalString(),E.value),Array.from(re.values())}return null}(l,u),g=function(V,Q){let re=[],Z=!0;for(let E of xo(Q)){let v=E.kind===0?XS(V,E.fieldPath,V.startAt):ex(V,E.fieldPath,V.startAt);re.push(v.value),Z&&(Z=v.inclusive)}return new ur(re,Z)}(l,u),y=function(V,Q){let re=[],Z=!0;for(let E of xo(Q)){let v=E.kind===0?ex(V,E.fieldPath,V.endAt):XS(V,E.fieldPath,V.endAt);re.push(v.value),Z&&(Z=v.inclusive)}return new ur(re,Z)}(l,u),C=this.In(u,l,g),S=this.In(u,l,y),x=this.Tn(u,l,p),L=this.En(u.indexId,h,C,g.inclusive,S,y.inclusive,x);return A.forEach(L,H=>r.G(H,n.limit).next(V=>{V.forEach(Q=>{let re=B.fromSegments(Q.documentKey);s.has(re)||(s=s.add(re),a.push(re))})}))}).next(()=>a)}return A.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=ZB(Re.create(e.filters,"and")).map(r=>P_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,o,s,a){let u=(n!=null?n.length:1)*Math.max(r.length,o.length),l=u/(n!=null?n.length:1),h=[];for(let p=0;p<u;++p){let g=n?this.dn(n[p/l]):cf,y=this.An(e,g,r[p%l],i),C=this.Rn(e,g,o[p%l],s),S=a.map(x=>this.An(e,g,x,!0));h.push(...this.createRange(y,C,S))}return h}An(e,n,r,i){let o=new Po(e,B.empty(),n,r);return i?o:o.Zt()}Rn(e,n,r,i){let o=new Po(e,B.empty(),n,r);return i?o.Zt():o}Pn(e,n){let r=new Ff(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.hn(n);return A.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Fe(et.comparator),h=!1;for(let p of u.filters)for(let g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?h=!0:l=l.add(g.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){let r=new No;for(let i of xo(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Br.vt.It(o,s)}return r.zt()}dn(e){let n=new No;return Br.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){let r=new No;return Br.vt.It(Vo(this.databaseId,n),r.Yt(function(o){let s=xo(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new No);let o=0;for(let s of xo(e)){let a=r[o++];for(let u of i)if(this.fn(n,s.fieldPath)&&Lu(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);Br.vt.It(a,l)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new No;u.seed(a.zt()),Br.vt.It(s,u.Yt(n.kind)),o.push(u)}return o}fn(e,n){return!!e.filters.find(r=>r instanceof _e&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Cu(e),i=ca(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(o=>{let s=[];return A.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let g=p?new Pu(p.sequenceNumber,new bn($o(p.readTime),new B(rr(p.documentKey)),p.largestBatchId)):Pu.empty(),y=h.fields.map(([C,S])=>new ma(et.fromServerFormat(C),S));return new wa(h.indexId,h.collectionGroup,y,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ce(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Cu(e),o=ca(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>A.forEach(a,u=>o.put(px(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return A.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?A.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),A.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?A.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,n,r,i){return aa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return aa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){let i=aa(e),o=new Fe(vi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(s,a)=>{o=o.add(new Po(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,n){let r=new Fe(vi),i=this.Vn(n,e);if(i==null)return r;let o=m_(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Lu(s))for(let a of s.arrayValue.values||[])r=r.add(new Po(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Po(n.indexId,e.key,cf,i));return r}bn(e,n,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(u,l,h,p,g){let y=u.getIterator(),C=l.getIterator(),S=sa(y),x=sa(C);for(;S||x;){let L=!1,H=!1;if(S&&x){let V=h(S,x);V<0?H=!0:V>0&&(L=!0)}else S!=null?H=!0:L=!0;L?(p(x),x=sa(C)):H?(g(S),S=sa(y)):(S=sa(y),x=sa(C))}}(i,o,vi,a=>{s.push(this.Dn(e,n,r,a))},a=>{s.push(this.vn(e,n,r,a))}),A.waitFor(s)}yn(e){let n=1;return ca(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>vi(s,a)).filter((s,a,u)=>!a||vi(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=vi(s,e),u=vi(s,n);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,cf,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,cf,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,n){return vi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Ex)}getMinOffset(e,n){return A.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||K())).next(Ex)}};function wx(t){return gt(t,"collectionParents")}function aa(t){return gt(t,"indexEntries")}function Cu(t){return gt(t,"indexConfiguration")}function ca(t){return gt(t,"indexState")}function Ex(t){Y(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;dE(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new bn(e.readTime,e.documentKey,n)}var Ix={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function $M(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.J({range:s},(h,p,g)=>(a++,g.delete()));o.push(u.next(()=>{Y(a===1)}));let l=[];for(let h of n.mutations){let p=Qx(e,h.key.path,n.batchId);o.push(i.delete(p)),l.push(h.key)}return A.waitFor(o).next(()=>l)}function Lf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw K();e=t.noDocument}return JSON.stringify(e).length}Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(41943040,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);var jf=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){Y(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _i(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=pa(e),s=_i(e);return s.add({}).next(a=>{Y(typeof a=="number");let u=new Uu(a,n,r,i),l=function(y,C,S){let x=S.baseMutations.map(H=>zu(y.ct,H)),L=S.mutations.map(H=>zu(y.ct,H));return{userId:C,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:x,mutations:L}}(this.serializer,this.userId,u),h=[],p=new Fe((g,y)=>ce(g.canonicalString(),y.canonicalString()));for(let g of i){let y=Qx(this.userId,g.key.path,a);p=p.add(g.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,rB))}return p.forEach(g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),A.waitFor(h).next(()=>u)})}lookupMutationBatch(e,n){return _i(e).get(n).next(r=>r?(Y(r.userId===this.userId),Ro(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?A.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return _i(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Y(a.batchId>=r),o=Ro(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return _i(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _i(e).U("userMutationsIndex",n).next(r=>r.map(i=>Ro(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=hf(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return pa(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,g=rr(h);if(l===this.userId&&n.path.isEqual(g))return _i(e).get(p).next(y=>{if(!y)throw K();Y(y.userId===this.userId),o.push(Ro(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(ce),i=[];return n.forEach(o=>{let s=hf(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=pa(e).J({range:a},(l,h,p)=>{let[g,y,C]=l,S=rr(y);g===this.userId&&o.path.isEqual(S)?r=r.add(C):p.done()});i.push(u)}),A.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=hf(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Fe(ce);return pa(e).J({range:s},(u,l,h)=>{let[p,g,y]=u,C=rr(g);p===this.userId&&r.isPrefixOf(C)?C.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(_i(e).get(o).next(s=>{if(s===null)throw K();Y(s.userId===this.userId),r.push(Ro(this.serializer,s))}))}),A.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return $M(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),A.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return A.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return pa(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=rr(o[1]);i.push(u)}else a.done()}).next(()=>{Y(i.length===0)})})}containsKey(e,n){return HM(e,this.userId,n)}Nn(e){return qM(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function HM(t,e,n){let r=hf(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return pa(t).J({range:o,H:!0},(a,u,l)=>{let[h,p,g]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function _i(t){return gt(t,"mutations")}function pa(t){return gt(t,"documentMutations")}function qM(t){return gt(t,"mutationQueues")}var Aa=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var tw=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{let r=new Aa(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>ee.fromTimestamp(new Ge(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ua(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Y(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return ua(e).J((s,a)=>{let u=Au(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>A.waitFor(o)).next(()=>i)}forEachTarget(e,n){return ua(e).J((r,i)=>{let o=Au(i);n(o)})}qn(e){return Cx(e).get("targetGlobalKey").next(n=>(Y(n!==null),n))}Qn(e,n){return Cx(e).put("targetGlobalKey",n)}Kn(e,n){return ua(e).put(jM(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=jo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ua(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=Au(a);rl(n,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=wi(e);return n.forEach(s=>{let a=zt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),A.waitFor(i)}removeMatchingKeys(e,n,r){let i=wi(e);return A.forEach(n,o=>{let s=zt(o.path);return A.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=wi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=wi(e),o=ue();return i.J({range:r,H:!0},(s,a,u)=>{let l=rr(s[1]),h=new B(l);o=o.add(h)}).next(()=>o)}containsKey(e,n){let r=zt(n.path),i=IDBKeyRange.bound([r],[Hx(r)],!1,!0),o=0;return wi(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,n){return ua(e).get(n).next(r=>r?Au(r):null)}};function ua(t){return gt(t,"targets")}function Cx(t){return gt(t,"targetGlobal")}function wi(t){return gt(t,"targetDocuments")}function Dx([t,e],[n,r]){let i=ce(t,n);return i===0?ce(e,r):i}var nw=class{constructor(e){this.Un=e,this.buffer=new Fe(Dx),this.Wn=0}Gn(){return++this.Wn}zn(e){let n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();Dx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},rw=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ki(n)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Oi(n)}yield this.Hn(3e5)}))}},iw=class{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return A.resolve(un.oe);let r=new nw(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(Ix)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ix):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),la()<=Bn.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function JB(t,e){return new iw(t,e)}var ow=class{constructor(e,n){this.db=e,this.garbageCollector=JB(this,n)}Yn(e){let n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return uf(e,r)}removeReference(e,n,r){return uf(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return uf(e,n)}nr(e,n){return function(i,o){let s=!1;return qM(i).Y(a=>HM(i,a,o).next(u=>(u&&(s=!0),A.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=n){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ee.min()),wi(e).delete(function(p){return[0,zt(p.path)]}(s))))});i.push(u)}}).next(()=>A.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return uf(e,n)}tr(e,n){let r=wi(e),i,o=un.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==un.oe&&n(new B(rr(i)),o),o=l,i=u):o=un.oe}).next(()=>{o!==un.oe&&n(new B(rr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function uf(t,e){return wi(t).put(function(r,i){return{targetId:0,path:zt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Uf=class{constructor(){this.changes=new lr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?A.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var sw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return So(e).put(r)}removeEntry(e,n,r){return So(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Of(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=ut.newInvalidDocument(n);return So(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Du(n))},(i,o)=>{r=this.ir(n,o)}).next(()=>r)}sr(e,n){let r={size:0,document:ut.newInvalidDocument(n)};return So(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Du(n))},(i,o)=>{r={document:this.ir(n,o),size:Lf(o)}}).next(()=>r)}getEntries(e,n){let r=Jt();return this._r(e,n,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,n){let r=Jt(),i=new Be(B.comparator);return this._r(e,n,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Lf(s))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return A.resolve();let i=new Fe(Ax);n.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Du(i.first()),Du(i.last())),s=i.getIterator(),a=s.getNext();return So(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=B.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Ax(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(Du(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Of(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return So(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Jt();for(let p of l){let g=this.ir(B.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(ol(n,g)||i.has(g.key))&&(h=h.insert(g.key,g))}return h})}getAllFromCollectionGroup(e,n,r,i){let o=Jt(),s=Tx(n,r),a=Tx(n,bn.max());return So(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir(B.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new aw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return bx(e).get("remoteDocumentGlobalKey").next(n=>(Y(!!n),n))}rr(e,n){return bx(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){let r=QB(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ee.min())))return r}return ut.newInvalidDocument(e)}};function zM(t){return new sw(t)}var aw=class extends Uf{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new lr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Fe((o,s)=>ce(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(n.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=hx(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Lf(u);r+=l-a.size,n.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=hx(this.cr.serializer,s.convertToNoDocument(ee.min()));n.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.cr.updateMetadata(e,r)),A.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function bx(t){return gt(t,"remoteDocumentGlobal")}function So(t){return gt(t,"remoteDocumentsV14")}function Du(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Tx(t,e){let n=e.documentKey.path.toArray();return[t,Of(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ax(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=ce(n[o],r[o]),i)return i;return i=ce(n.length,r.length),i||(i=ce(n[n.length-2],r[r.length-2]),i||ce(n[n.length-1],r[r.length-1]))}var cw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Bf=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Mu(r.mutation,i,ln.empty(),Ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){let i=ir();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Tu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=ir();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Jt(),s=xu(),a=function(){return xu()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Vn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Mu(h.mutation,l,h.mutation.getFieldMask(),Ge.now())):s.set(l.key,ln.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new cw(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=xu(),i=new Be((s,a)=>s-a),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||ln.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ue()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=gM();h.forEach(g=>{if(!o.has(g)){let y=IM(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return A.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return B.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):A.resolve(ir()),a=-1,u=o;return s.next(l=>A.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?A.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ue())).next(h=>({batchId:a,changes:pM(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new B(n)).next(r=>{let i=Tu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Tu();return this.indexManager.getCollectionParents(e,o).next(a=>A.forEach(a,u=>{let l=function(p,g){return new Fn(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,ut.newInvalidDocument(h)))});let a=Tu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Mu(h.mutation,l,ln.empty(),Ge.now()),ol(n,l)&&(a=a.insert(u,l))}),a})}};var uw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return A.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:tt(i.createTime)}}(n)),A.resolve()}getNamedQuery(e,n){return A.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:wE(i.bundledQuery),readTime:tt(i.readTime)}}(n)),A.resolve()}};var lw=class{constructor(){this.overlays=new Be(B.comparator),this.Ir=new Map}getOverlay(e,n){return A.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ir();return A.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),A.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),A.resolve()}getOverlaysForCollection(e,n,r){let i=ir(),o=n.length+1,s=new B(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return A.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Be((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=ir(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ir(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return A.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Bu(n,r));let o=this.Ir.get(n);o===void 0&&(o=ue(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}};var dw=class{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return A.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,A.resolve()}};var Wu=class{constructor(){this.Tr=new Fe(st.Er),this.dr=new Fe(st.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new st(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new st(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new B(new Ee([])),r=new st(n,e),i=new st(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new B(new Ee([])),r=new st(n,e),i=new st(n,e+1),o=ue();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new st(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},st=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return B.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||B.comparator(e.key,n.key)}};var hw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Fe(st.Er)}checkEmpty(e){return A.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Uu(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new st(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return A.resolve(s)}lookupMutationBatch(e,n){return A.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),o=i<0?0:i;return A.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return A.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new st(n,0),i=new st(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),A.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(ce);return n.forEach(i=>{let o=new st(i,0),s=new st(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),A.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;B.isDocumentKey(o)||(o=o.child(""));let s=new st(new B(o),0),a=new Fe(ce);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),A.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Y(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return A.forEach(n.mutations,i=>{let o=new st(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new st(n,0),i=this.br.firstAfterOrEqual(r);return A.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,A.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var fw=class{constructor(e){this.Mr=e,this.docs=function(){return new Be(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return A.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=Jt();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ut.newInvalidDocument(i))}),A.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Jt(),s=n.path,a=new B(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||dE(zx(h),r)<=0||(i.has(h.key)||ol(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return A.resolve(o)}getAllFromCollectionGroup(e,n,r,i){K()}Or(e,n){return A.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pw(this)}getSize(e){return A.resolve(this.size)}},pw=class extends Uf{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),A.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var gw=class{constructor(e){this.persistence=e,this.Nr=new lr(n=>jo(n),rl),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wu,this.targetCount=0,this.kr=Aa.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),A.resolve()}getLastRemoteSnapshotVersion(e){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return A.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),A.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new Aa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,A.resolve()}updateTargetData(e,n){return this.Kn(n),A.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,A.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),A.waitFor(o).next(()=>i)}getTargetCount(e){return A.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return A.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),A.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),A.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),A.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return A.resolve(r)}containsKey(e,n){return A.resolve(this.Br.containsKey(n))}};var $f=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new un(0),this.Kr=!1,this.Kr=!0,this.$r=new dw,this.referenceDelegate=e(this),this.Ur=new gw(this),this.indexManager=new X_,this.remoteDocumentCache=function(i){return new fw(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Pf(n),this.Gr=new uw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new hw(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){k("MemoryPersistence","Starting transaction:",e);let i=new mw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return A.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},mw=class extends Ef{constructor(e){super(),this.currentSequenceNumber=e}},Hf=class t{constructor(e){this.persistence=e,this.Jr=new Wu,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),A.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),A.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),A.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.Xr,r=>{let i=B.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return A.or([()=>A.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var yw=class{constructor(e){this.serializer=e}O(e,n,r,i){let o=new If("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HS,{unique:!0}),u.createObjectStore("documentMutations")}(e),Sx(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=A.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),Sx(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ee.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HS,{unique:!0});let p=l.store("mutations"),g=h.map(y=>p.put(y));return A.waitFor(g)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:gB});l.createIndex("collectionPathOverlayIndex",mB,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",yB,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:iB});l.createIndex("documentKeyIndex",oB),l.createIndex("collectionGroupIndex",sB)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:dB}).createIndex("sequenceNumberIndex",hB,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:fB}).createIndex("documentKeyIndex",pB,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Lf(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>A.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>A.forEach(a,u=>{Y(u.userId===o.userId);let l=Ro(this.serializer,u);return $M(e,o.userId,l).next(()=>{})}))}))}ii(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new Ee(s),l=function(p){return[0,zt(p)]}(u);o.push(n.get(l).next(h=>h?A.resolve():(p=>n.put({targetId:0,path:zt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>A.waitFor(o))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:lB});let r=n.store("collectionParents"),i=new Gu,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:zt(u)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new Ee(s);return o(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=rr(a);return o(h.popLast())}))}oi(e){let n=e.store("targets");return n.J((r,i)=>{let o=Au(i),s=jM(this.serializer,o);return n.put(s)})}_i(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=n.store("remoteDocumentsV14"),u=function(p){return p.document?new B(Ee.fromString(p.document.name).popFirst(5)):p.noDocument?B.fromSegments(p.noDocument.path):p.unknownDocument?B.fromSegments(p.unknownDocument.path):K()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>A.waitFor(i))}ai(e,n){let r=n.store("mutations"),i=zM(this.serializer),o=new $f(Hf.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:ue();Ro(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),A.forEach(a,(u,l)=>{let h=new at(l),p=kf.lt(this.serializer,h),g=o.getIndexManager(h),y=jf.lt(h,this.serializer,g,o.referenceDelegate);return new Bf(i,y,p,g).recalculateAndSaveOverlaysForDocumentKeys(new ku(n,un.oe),u).next()})})}};function Sx(t){t.createObjectStore("targetDocuments",{keyPath:cB}).createIndex("documentTargetsIndex",uB,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",aB,{unique:!0}),t.createObjectStore("targetGlobal")}var s_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",vw=class t{constructor(e,n,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!t.D())throw new P(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ow(this,i),this.Ai=n+"main",this.serializer=new Pf(u),this.Ri=new bi(this.Ai,this.hi,new yw(this.serializer)),this.$r=new G_,this.Ur=new tw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zM(this.serializer),this.Gr=new z_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Xe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(M.FAILED_PRECONDITION,s_);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new un(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=n=>N(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(n=>N(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(ki(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return bu(e).get("owner").next(n=>A.resolve(this.vi(n)))}Ci(e){return lf(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=gt(n,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return A.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let n of e)this.Vi.removeItem(this.Oi(n.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?A.resolve(!0):bu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new P(M.FAILED_PRECONDITION,s_);return!1}}return!(!this.networkEnabled||!this.inForeground)||lf(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&k("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new ku(e,un.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()})}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>lf(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return jf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ew(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return kf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){k("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(u){return u===17?wB:u===16?_B:u===15?fE:u===14?Jx:u===13?Zx:u===12?vB:u===11?Yx:void K()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new ku(a,this.Qr?this.Qr.next():un.oe),n==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Xe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(M.FAILED_PRECONDITION,Gx);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return bu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new P(M.FAILED_PRECONDITION,s_)})}Di(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bu(e).put("owner",n)}static D(){return bi.D()}bi(e){let n=bu(e);return n.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):A.resolve())}Mi(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Xe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let n=/(?:Version|Mobile)\/1[456]/;Ag()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{let r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Xe("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function bu(t){return gt(t,"owner")}function lf(t){return gt(t,"clientMetadata")}function IE(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var _w=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ue(),i=ue();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var ww=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var qf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ag()?8:Wx(fc())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ww;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(la()<=Bn.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",da(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),A.resolve()):(la()<=Bn.DEBUG&&k("QueryEngine","Query:",da(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(la()<=Bn.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",da(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gt(n))):A.resolve())}Yi(e,n){if(tx(n))return A.resolve(null);let r=Gt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xf(n,null,"F"),r=Gt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ue(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,s,u.readTime)?this.Yi(e,xf(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return tx(n)||i.isEqual(ee.min())?A.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(n,o);return this.ns(n,s,r,i)?A.resolve(null):(la()<=Bn.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),da(n)),this.rs(e,s,n,qx(i,-1)).next(a=>a))})}ts(e,n){let r=new Fe(hM(e));return n.forEach((i,o)=>{ol(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return la()<=Bn.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",da(n)),this.Ji.getDocumentsMatchingQuery(e,n,bn.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Ew=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Be(ce),this._s=new lr(o=>jo(o),rl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function GM(t,e,n,r){return new Ew(t,e,n,r)}function WM(t,e){return N(this,null,function*(){let n=U(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ue();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function XB(t,e){let n=U(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,g=p.keys(),y=A.resolve();return g.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(S=>{let x=l.docVersions.get(C);Y(x!==null),S.version.compareTo(x)<0&&(p.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),h.addEntry(S)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function KM(t){let e=U(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function e$(t,e){let n=U(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(nt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(S,x,L){return S.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(g,y,h)&&a.push(n.Ur.updateTargetData(o,y))});let u=Jt(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(QM(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ee.min())){let h=n.Ur.getLastRemoteSnapshotVersion(o).next(p=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return A.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.os=i,o))}function QM(t,e,n){let r=ue(),i=ue();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Jt();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function t$(t,e){let n=U(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sa(t,e){let n=U(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,A.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Ta(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function xa(t,e,n){return N(this,null,function*(){let r=U(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ki(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function zf(t,e,n){let r=U(t),i=ee.min(),o=ue();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=U(u),g=p._s.get(h);return g!==void 0?A.resolve(p.os.get(g)):p.Ur.getTargetData(l,h)}(r,s,Gt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:ee.min(),n?o:ue())).next(a=>(JM(r,dM(e),a),{documents:a,Ts:o})))}function YM(t,e){let n=U(t),r=U(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function ZM(t,e){let n=U(t),r=n.us.get(e)||ee.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,qx(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(JM(n,e,i),i))}function JM(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}function n$(t,e,n,r){return N(this,null,function*(){let i=U(t),o=ue(),s=Jt();for(let l of n){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Sa(i,function(h){return Gt(Va(Ee.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>QM(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function r$(r,i){return N(this,arguments,function*(t,e,n=ue()){let o=yield Sa(t,Gt(wE(e.bundledQuery))),s=U(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=tt(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(nt.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,n,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function xx(t,e){return`firestore_clients_${t}_${e}`}function Mx(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function a_(t,e){return`firestore_targets_${t}_${e}`}var Gf=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Xe("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ru=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new t(e,r.state,i):(Xe("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Wf=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=yE();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Kx(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Xe("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},Iw=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Xe("SharedClientState",`Failed to parse online state: ${e}`),null)}},Ku=class{constructor(){this.activeTargetIds=yE()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Nu=class{constructor(e,n,r,i,o){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Be(ce),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=xx(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Ku),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(xx(this.persistenceKey,r));if(i){let o=Wf.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let n=this.storage.getItem(this.xs);if(n){let r=this.Ls(n);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(a_(this.persistenceKey,e));if(i){let o=Ru.Rs(e,i);o&&(r=o.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(a_(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return k("SharedClientState","READ",e,n),n}setItem(e,n){k("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let n=e;if(n.storageArea===this.storage){if(k("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Xe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){let r=this.Gs(n.key);return this.zs(r,null)}{let r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){let r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){let r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){let r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){let r=function(o){let s=un.oe;if(o!=null)try{let a=JSON.parse(o);Y(typeof a=="number"),s=a}catch(a){Xe("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==un.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){let r=this.Xs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){let i=new Gf(this.currentUser,e,n,r),o=Mx(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let n=Mx(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){let n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){let i=a_(this.persistenceKey,e),o=new Ru(e,n,r);this.setItem(i,o.Vs())}Ws(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){let n=this.Cs.exec(e);return n?n[1]:null}js(e,n){let r=this.Gs(e);return Wf.Rs(r,n)}Hs(e,n){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Gf.Rs(new at(o),i,n)}Ys(e,n){let r=this.Ms.exec(e),i=Number(r[1]);return Ru.Rs(i,n)}Ls(e){return Iw.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){let r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=yE();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Kf=class{constructor(){this.so=new Ku,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ku,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Cw=class{_o(e){}shutdown(){}};var Qf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var df=null;function c_(){return df===null?df=function(){return 268435456+Math.round(2147483648*Math.random())}():df++,"0x"+df.toString(16)}var i$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Dw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Nt="WebChannelConnection",bw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){let a=c_(),u=this.xo(n,r.toUriEncodedString());k("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(n,u,l,i).then(h=>(k("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Dn("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){let i=i$[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let o=c_();return new Promise((s,a)=>{let u=new Xv;u.setWithCredentials(!0),u.listenOnce(t_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Eu.NO_ERROR:let h=u.getResponseJson();k(Nt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Eu.TIMEOUT:k(Nt,`RPC '${e}' ${o} timed out`),a(new P(M.DEADLINE_EXCEEDED,"Request time out"));break;case Eu.HTTP_ERROR:let p=u.getStatus();if(k(Nt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let C=function(x){let L=x.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(L)>=0?L:M.UNKNOWN}(y.status);a(new P(C,y.message))}else a(new P(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new P(M.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{k(Nt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(Nt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=c_(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=i_(),a=r_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new e_({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");k(Nt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),g=!1,y=!1,C=new Dw({Io:x=>{y?k(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(g||(k(Nt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),k(Nt,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},To:()=>p.close()}),S=(x,L,H)=>{x.listen(L,V=>{try{H(V)}catch(Q){setTimeout(()=>{throw Q},0)}})};return S(p,oa.EventType.OPEN,()=>{y||(k(Nt,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),S(p,oa.EventType.CLOSE,()=>{y||(y=!0,k(Nt,`RPC '${e}' stream ${i} transport closed`),C.So())}),S(p,oa.EventType.ERROR,x=>{y||(y=!0,Dn(Nt,`RPC '${e}' stream ${i} transport errored:`,x),C.So(new P(M.UNAVAILABLE,"The operation could not be completed")))}),S(p,oa.EventType.MESSAGE,x=>{var L;if(!y){let H=x.data[0];Y(!!H);let V=H,Q=V.error||((L=V[0])===null||L===void 0?void 0:L.error);if(Q){k(Nt,`RPC '${e}' stream ${i} received error:`,Q);let re=Q.status,Z=function(w){let I=ot[w];if(I!==void 0)return bM(I)}(re),E=Q.message;Z===void 0&&(Z=M.INTERNAL,E="Unknown error status: "+re+" with message "+Q.message),y=!0,C.So(new P(Z,E)),p.close()}else k(Nt,`RPC '${e}' stream ${i} received:`,H),C.bo(H)}}),S(a,n_.STAT_EVENT,x=>{x.stat===af.PROXY?k(Nt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===af.NOPROXY&&k(Nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function XM(){return typeof window<"u"?window:null}function mf(){return typeof document<"u"?document:null}function sl(t){return new U_(t,!0)}var Qu=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Yf=class{constructor(e,n,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Qu(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Xe(n.toString()),Xe("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new P(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Tw=class extends Yf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=$B(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?tt(s.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=H_(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=Af(u)?{documents:PM(o,u)}:{query:OM(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=AM(o,s.resumeToken);let l=B_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=ba(o,s.snapshotVersion.toTimestamp());let l=B_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=qB(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=H_(this.serializer),n.removeTarget=e,this.a_(n)}},Aw=class extends Yf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Y(!!e.streamToken),this.lastStreamToken=e.streamToken,Y(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=HB(e.writeResults,e.commitTime),r=tt(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=H_(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>zu(this.serializer,r))};this.a_(n)}};var Sw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,$_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(M.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,$_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(M.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},xw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Xe(n),this.D_=!1):k("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Mw=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){Fi(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=U(u);l.L_.add(4),yield La(l),l.q_.set("Unknown"),l.L_.delete(4),yield al(l)})}(this))}))}),this.q_=new xw(r,i)}};function al(t){return N(this,null,function*(){if(Fi(t))for(let e of t.B_)yield e(!0)})}function La(t){return N(this,null,function*(){for(let e of t.B_)yield e(!1)})}function mp(t,e){let n=U(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),bE(n)?DE(n):Ua(n).r_()&&CE(n,e))}function Ma(t,e){let n=U(t),r=Ua(n);n.N_.delete(e),r.r_()&&e1(n,e),n.N_.size===0&&(r.r_()?r.o_():Fi(n)&&n.q_.set("Unknown"))}function CE(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ua(t).A_(e)}function e1(t,e){t.Q_.xe(e),Ua(t).R_(e)}function DE(t){t.Q_=new j_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ua(t).start(),t.q_.v_()}function bE(t){return Fi(t)&&!Ua(t).n_()&&t.N_.size>0}function Fi(t){return U(t).L_.size===0}function t1(t){t.Q_=void 0}function o$(t){return N(this,null,function*(){t.q_.set("Online")})}function s$(t){return N(this,null,function*(){t.N_.forEach((e,n)=>{CE(t,e)})})}function a$(t,e){return N(this,null,function*(){t1(t),bE(t)?(t.q_.M_(e),DE(t)):t.q_.set("Unknown")})}function c$(t,e,n){return N(this,null,function*(){if(t.q_.set("Online"),e instanceof Rf&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zf(t,r)}else if(e instanceof va?t.Q_.Ke(e):e instanceof Mf?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{let r=yield KM(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(nt.EMPTY_BYTE_STRING,h.snapshotVersion)),e1(o,u);let p=new Ta(h.target,u,l,h.sequenceNumber);CE(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield Zf(t,r)}})}function Zf(t,e,n){return N(this,null,function*(){if(!ki(e))throw e;t.L_.add(1),yield La(t),t.q_.set("Offline"),n||(n=()=>KM(t.localStore)),t.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield al(t)}))})}function n1(t,e){return e().catch(n=>Zf(t,n,e))}function ja(t){return N(this,null,function*(){let e=U(t),n=Pi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;u$(e);)try{let i=yield t$(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,l$(e,i)}catch(i){yield Zf(e,i)}r1(e)&&i1(e)})}function u$(t){return Fi(t)&&t.O_.length<10}function l$(t,e){t.O_.push(e);let n=Pi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function r1(t){return Fi(t)&&!Pi(t).n_()&&t.O_.length>0}function i1(t){Pi(t).start()}function d$(t){return N(this,null,function*(){Pi(t).p_()})}function h$(t){return N(this,null,function*(){let e=Pi(t);for(let n of t.O_)e.m_(n.mutations)})}function f$(t,e,n){return N(this,null,function*(){let r=t.O_.shift(),i=F_.from(r,e,n);yield n1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ja(t)})}function p$(t,e){return N(this,null,function*(){e&&Pi(t).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return DM(s)&&s!==M.ABORTED}(i.code)){let o=r.O_.shift();Pi(r).s_(),yield n1(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ja(r)}})}(t,e)),r1(t)&&i1(t)})}function Rx(t,e){return N(this,null,function*(){let n=U(t);n.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=Fi(n);n.L_.add(3),yield La(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield al(n)})}function Rw(t,e){return N(this,null,function*(){let n=U(t);e?(n.L_.delete(2),yield al(n)):e||(n.L_.add(2),yield La(n),n.q_.set("Unknown"))})}function Ua(t){return t.K_||(t.K_=function(n,r,i){let o=U(n);return o.w_(),new Tw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:o$.bind(null,t),Ro:s$.bind(null,t),mo:a$.bind(null,t),d_:c$.bind(null,t)}),t.B_.push(e=>N(this,null,function*(){e?(t.K_.s_(),bE(t)?DE(t):t.q_.set("Unknown")):(yield t.K_.stop(),t1(t))}))),t.K_}function Pi(t){return t.U_||(t.U_=function(n,r,i){let o=U(n);return o.w_(),new Aw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:d$.bind(null,t),mo:p$.bind(null,t),f_:h$.bind(null,t),g_:f$.bind(null,t)}),t.B_.push(e=>N(this,null,function*(){e?(t.U_.s_(),yield ja(t)):(yield t.U_.stop(),t.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var Nw=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ct,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ba(t,e){if(Xe("AsyncQueue",`${e}: ${t}`),ki(t))return new P(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Jf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||B.comparator(n.key,r.key):(n,r)=>B.comparator(n.key,r.key),this.keyedMap=Tu(),this.sortedSet=new Be(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Xf=class{constructor(){this.W_=new Be(B.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},Ra=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Jf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&il(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Pw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Ow=class{constructor(){this.queries=Nx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=U(n),o=i.queries;i.queries=Nx(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new P(M.ABORTED,"Firestore shutting down"))}};function Nx(){return new lr(t=>lM(t),il)}function TE(t,e){return N(this,null,function*(){let n=U(t),r=3,i=e.query,o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Pw,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=Ba(s,`Initialization of query '${da(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&SE(n)})}function AE(t,e){return N(this,null,function*(){let n=U(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function g$(t,e){let n=U(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&SE(n)}function m$(t,e,n){let r=U(t),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(n);r.queries.delete(e)}function SE(t){t.Y_.forEach(e=>{e.next()})}var kw,Px;(Px=kw||(kw={})).ea="default",Px.Cache="cache";var Yu=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ra(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==kw.Cache}};var Fw=class{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}};var ep=class{constructor(e){this.serializer=e}Es(e){return sr(this.serializer,e)}ds(e){return e.metadata.exists?NM(this.serializer,e.document,!1):ut.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return tt(e)}},Vw=class{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=o1(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;let r=Ee.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){let n=new Map,r=new ep(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||ue()).add(o);n.set(s,a)}}return n}complete(){return N(this,null,function*(){let e=yield n$(this.localStore,new ep(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(let r of this.queries)yield r$(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function o1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var tp=class{constructor(e){this.key=e}},np=class{constructor(e){this.key=e}},rp=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=hM(e),this.Ra=new Jf(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Xf,i=n?n.Ra:this.Ra,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=ol(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),x=!1;g&&y?g.data.isEqual(y.data)?C!==S&&(r.track({type:3,doc:y}),x=!0):this.ga(g,y)||(r.track({type:2,doc:y}),x=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),x=!0):g&&!y&&(r.track({type:1,doc:g}),x=!0,(u||l)&&(a=!0)),x&&(y?(s=s.add(y),o=S?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,C){let S=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return S(y)-S(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Ra(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Xf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new np(r))}),this.da.forEach(r=>{e.has(r)||n.push(new tp(r))}),n}ba(e){this.Ta=e.Ts,this.da=ue();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ra.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Lw=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},jw=class{constructor(e){this.key=e,this.va=!1}},Uw=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new lr(a=>lM(a),il),this.Ma=new Map,this.xa=new Set,this.Oa=new Be(B.comparator),this.Na=new Map,this.La=new Wu,this.Ba={},this.ka=new Map,this.qa=Aa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function y$(t,e,n=!0){return N(this,null,function*(){let r=yp(t),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield s1(r,e,n,!0),i})}function v$(t,e){return N(this,null,function*(){let n=yp(t);yield s1(n,e,!0,!1)})}function s1(t,e,n,r){return N(this,null,function*(){let i=yield Sa(t.localStore,Gt(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield xE(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&mp(t.remoteStore,i),a})}function xE(t,e,n,r,i){return N(this,null,function*(){t.Ka=(p,g,y)=>function(S,x,L,H){return N(this,null,function*(){let V=x.view.ma(L);V.ns&&(V=yield zf(S.localStore,x.query,!1).then(({documents:E})=>x.view.ma(E,V)));let Q=H&&H.targetChanges.get(x.targetId),re=H&&H.targetMismatches.get(x.targetId)!=null,Z=x.view.applyChanges(V,S.isPrimaryClient,Q,re);return Bw(S,x.targetId,Z.wa),Z.snapshot})}(t,p,g,y);let o=yield zf(t.localStore,e,!0),s=new rp(e,o.Ts),a=s.ma(o.documents),u=Hu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);Bw(t,n,l.wa);let h=new Lw(e,n,s);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function _$(t,e,n){return N(this,null,function*(){let r=U(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!il(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield xa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ma(r.remoteStore,i.targetId),Na(r,i.targetId)}).catch(Oi))):(Na(r,i.targetId),yield xa(r.localStore,i.targetId,!0))})}function w$(t,e){return N(this,null,function*(){let n=U(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ma(n.remoteStore,r.targetId))})}function E$(t,e,n){return N(this,null,function*(){let r=PE(t);try{let i=yield function(s,a){let u=U(s),l=Ge.now(),h=a.reduce((y,C)=>y.add(C.key),ue()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=Jt(),S=ue();return u.cs.getEntries(y,h).next(x=>{C=x,C.forEach((L,H)=>{H.isValidDocument()||(S=S.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(x=>{p=x;let L=[];for(let H of a){let V=kB(H,p.get(H.key).overlayedDocument);V!=null&&L.push(new Vn(H.key,V,rM(V.value.mapValue),Qe.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,L,a)}).next(x=>{g=x;let L=x.applyToLocalDocumentSet(p,S);return u.documentOverlayCache.saveOverlays(y,x.batchId,L)})}).then(()=>({batchId:g.batchId,changes:pM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Be(ce)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Kr(r,i.changes),yield ja(r.remoteStore)}catch(i){let o=Ba(i,"Failed to persist write");n.reject(o)}})}function a1(t,e){return N(this,null,function*(){let n=U(t);try{let r=yield e$(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Na.get(o);s&&(Y(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Y(s.va):i.removedDocuments.size>0&&(Y(s.va),s.va=!1))}),yield Kr(n,r,e)}catch(r){yield Oi(r)}})}function Ox(t,e,n){let r=U(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=U(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.j_)g.Z_(a)&&(l=!0)}),l&&SE(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function I$(t,e,n){return N(this,null,function*(){let r=U(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Be(B.comparator);s=s.insert(o,ut.newNoDocument(o,ee.min()));let a=ue().add(o),u=new $u(ee.min(),new Map,new Be(ce),s,a);yield a1(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),NE(r)}else yield xa(r.localStore,e,!1).then(()=>Na(r,e,n)).catch(Oi)})}function C$(t,e){return N(this,null,function*(){let n=U(t),r=e.batch.batchId;try{let i=yield XB(n.localStore,e);RE(n,r,null),ME(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Kr(n,i)}catch(i){yield Oi(i)}})}function D$(t,e,n){return N(this,null,function*(){let r=U(t);try{let i=yield function(s,a){let u=U(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Y(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);RE(r,e,n),ME(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Kr(r,i)}catch(i){yield Oi(i)}})}function b$(t,e){return N(this,null,function*(){let n=U(t);Fi(n.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=U(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();let i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){let i=Ba(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function ME(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function RE(t,e,n){let r=U(t),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Na(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||c1(t,r)})}function c1(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(Ma(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),NE(t))}function Bw(t,e,n){for(let r of n)r instanceof tp?(t.La.addReference(r.key,e),T$(t,r)):r instanceof np?(k("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||c1(t,r.key)):K()}function T$(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(k("SyncEngine","New document in limbo: "+n),t.xa.add(r),NE(t))}function NE(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new B(Ee.fromString(e)),r=t.qa.next();t.Na.set(r,new jw(n)),t.Oa=t.Oa.insert(n,r),mp(t.remoteStore,new Ta(Gt(Va(n.path)),r,"TargetPurposeLimboResolution",un.oe))}}function Kr(t,e,n){return N(this,null,function*(){let r=U(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=_w.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let h=U(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>A.forEach(l,g=>A.forEach(g.$i,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>A.forEach(g.Ui,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!ki(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.os.get(g),C=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(g,S)}}})}(r.localStore,o))})}function A$(t,e){return N(this,null,function*(){let n=U(t);if(!n.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield WM(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new P(M.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Kr(n,r.hs)}})}function S$(t,e){let n=U(t),r=n.Na.get(e);if(r&&r.va)return ue().add(r.key);{let i=ue(),o=n.Ma.get(e);if(!o)return i;for(let s of o){let a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function x$(t,e){return N(this,null,function*(){let n=U(t),r=yield zf(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&Bw(n,e.targetId,i.wa),i})}function M$(t,e){return N(this,null,function*(){let n=U(t);return ZM(n.localStore,e).then(r=>Kr(n,r))})}function R$(t,e,n,r){return N(this,null,function*(){let i=U(t),o=yield function(a,u){let l=U(a),h=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(g=>g?l.localDocuments.getDocuments(p,g):A.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield ja(i.remoteStore):n==="acknowledged"||n==="rejected"?(RE(i,e,r||null),ME(i,e),function(a,u){U(U(a).mutationQueue).On(u)}(i.localStore,e)):K(),yield Kr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function N$(t,e){return N(this,null,function*(){let n=U(t);if(yp(n),PE(n),e===!0&&n.Qa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield kx(n,r.toArray());n.Qa=!0,yield Rw(n.remoteStore,!0);for(let o of i)mp(n.remoteStore,o)}else if(e===!1&&n.Qa!==!1){let r=[],i=Promise.resolve();n.Ma.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Na(n,s),xa(n.localStore,s,!0))),Ma(n.remoteStore,s)}),yield i,yield kx(n,r),function(s){let a=U(s);a.Na.forEach((u,l)=>{Ma(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Be(B.comparator)}(n),n.Qa=!1,yield Rw(n.remoteStore,!1)}})}function kx(t,e,n){return N(this,null,function*(){let r=U(t),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Sa(r.localStore,Gt(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield x$(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield YM(r.localStore,s);a=yield Sa(r.localStore,l),yield xE(r,u1(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function u1(t){return uM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function P$(t){return function(n){return U(U(n).persistence).Qi()}(U(t).localStore)}function O$(t,e,n,r){return N(this,null,function*(){let i=U(t);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield ZM(i.localStore,dM(o[0])),a=$u.createSynthesizedRemoteEventForCurrentChange(e,n==="current",nt.EMPTY_BYTE_STRING);yield Kr(i,s,a);break}case"rejected":yield xa(i.localStore,e,!0),Na(i,e,r);break;default:K()}})}function k$(t,e,n){return N(this,null,function*(){let r=yp(t);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield YM(r.localStore,i),s=yield Sa(r.localStore,o);yield xE(r,u1(o),s.targetId,!1,s.resumeToken),mp(r.remoteStore,s)}for(let i of n)r.Ma.has(i)&&(yield xa(r.localStore,i,!1).then(()=>{Ma(r.remoteStore,i),Na(r,i)}).catch(Oi))}})}function yp(t){let e=U(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=a1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I$.bind(null,e),e.Ca.d_=g$.bind(null,e.eventManager),e.Ca.$a=m$.bind(null,e.eventManager),e}function PE(t){let e=U(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D$.bind(null,e),e}function F$(t,e,n){let r=U(t);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,C){let S=U(y),x=tt(C.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",L=>S.Gr.getBundleMetadata(L,C.id)).then(L=>!!L&&L.createTime.compareTo(x)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(o1(u));let l=new Vw(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let g=yield l.la(h);g&&a._updateProgress(g),h=yield s.Ua()}let p=yield l.complete();return yield Kr(o,p.Ia,void 0),yield function(y,C){let S=U(y);return S.persistence.runTransaction("Save bundle","readwrite",x=>S.Gr.saveBundleMetadata(x,C))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return Dn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Zu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){this.serializer=sl(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return GM(this.persistence,new qf,e.initialUser,this.serializer)}createPersistence(e){return new $f(Hf.Zr,this.serializer)}createSharedClientState(e){return new Kf}terminate(){return N(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var ip=class t extends Zu{constructor(e,n,r){super(),this.Wa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield bg(t.prototype,this,"initialize").call(this,e),yield this.Wa.initialize(this,e),yield PE(this.Wa.syncEngine),yield ja(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return GM(this.persistence,new qf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new rw(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new w_(n,this.persistence);return new __(e.asyncQueue,r)}createPersistence(e){let n=IE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new vw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,XM(),mf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Kf}},$w=class t extends ip{constructor(e,n){super(e,n,!1),this.Wa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield bg(t.prototype,this,"initialize").call(this,e);let n=this.Wa.syncEngine;this.sharedClientState instanceof Nu&&(this.sharedClientState.syncEngine={no:R$.bind(null,n),ro:O$.bind(null,n),io:k$.bind(null,n),Qi:P$.bind(null,n),eo:M$.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield N$(this.Wa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=XM();if(!Nu.D(n))throw new P(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=IE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Nu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Ju=class{initialize(e,n){return N(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ox(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=A$.bind(null,this.syncEngine),yield Rw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Ow}()}createDatastore(e){let n=sl(e.databaseInfo.databaseId),r=function(o){return new bw(o)}(e.databaseInfo);return function(o,s,a,u){return new Sw(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new Mw(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ox(this.syncEngine,n,0),function(){return Qf.D()?new Qf:new Cw}())}createSyncEngine(e,n){return function(i,o,s,a,u,l,h){let p=new Uw(i,o,s,a,u,l);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return N(this,null,function*(){var e,n;yield function(i){return N(this,null,function*(){let o=U(i);k("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield La(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};function Fx(t,e=10240){let n=0;return{read(){return N(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Pa=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Xe("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Hw=class{constructor(e,n){this.ja=e,this.serializer=n,this.metadata=new ct,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return N(this,null,function*(){let e=yield this.Ya();if(e===null)return null;let n=this.Ha.decode(e),r=Number(n);isNaN(r)&&this.Za(`length string (${n}) is not valid number`);let i=yield this.Xa(r);return new Fw(JSON.parse(i),e.length+r)})}eu(){return this.buffer.findIndex(e=>e===123)}Ya(){return N(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Xa(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let n=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){return N(this,null,function*(){let e=yield this.ja.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var qw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return N(this,null,function*(){let s=U(i),a={documents:o.map(p=>qu(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Ee.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let g=BB(s.serializer,p);l.set(g.key.toString(),g)});let h=[];return o.forEach(p=>{let g=l.get(p.toString());Y(!!g),h.push(g)}),h})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ni(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=B.fromPath(r);this.mutations.push(new ju(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=U(r),s={writes:i.map(a=>zu(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Ee.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw K();n=ee.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new P(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ee.min())?Qe.exists(!1):Qe.updateTime(n):Qe.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ee.min()))throw new P(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qe.updateTime(n)}return Qe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var zw=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.nu=r.maxAttempts,this.t_=new Qu(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>N(this,null,function*(){let e=new qw(this.datastore),n=this.su(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ou(i)}))}).catch(r=>{this.ou(r)})}))}su(e){try{let n=this.updateFunction(e);return!nl(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!DM(n)}return!1}};var Gw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=at.UNAUTHENTICATED,this.clientId=_f.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>N(this,null,function*(){k("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(k("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new P(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ct;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Ba(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function yf(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield WM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Ww(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield OE(t);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Rx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Rx(e.remoteStore,i)),t._onlineComponents=e})}function l1(t){return t.name==="FirebaseError"?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function OE(t){return N(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield yf(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!l1(n))throw n;Dn("Error using user provided cache. Falling back to memory cache: "+n),yield yf(t,new Zu)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield yf(t,new Zu);return t._offlineComponents})}function vp(t){return N(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ww(t,t._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield Ww(t,new Ju))),t._onlineComponents})}function d1(t){return OE(t).then(e=>e.persistence)}function kE(t){return OE(t).then(e=>e.localStore)}function h1(t){return vp(t).then(e=>e.remoteStore)}function FE(t){return vp(t).then(e=>e.syncEngine)}function V$(t){return vp(t).then(e=>e.datastore)}function Oa(t){return N(this,null,function*(){let e=yield vp(t),n=e.eventManager;return n.onListen=y$.bind(null,e.syncEngine),n.onUnlisten=_$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=v$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=w$.bind(null,e.syncEngine),n})}function L$(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield d1(t),n=yield h1(t);return e.setNetworkEnabled(!0),function(i){let o=U(i);return o.L_.delete(0),al(o)}(n)}))}function j$(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield d1(t),n=yield h1(t);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=U(i);o.L_.add(0),yield La(o),o.q_.set("Offline")})}(n)}))}function U$(t,e){let n=new ct;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let p=U(l);return p.persistence.runTransaction("read document","readonly",g=>p.localDocuments.getDocument(g,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Ba(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield kE(t),e,n)})),n.promise}function f1(t,e,n={}){let r=new ct;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new Pa({next:g=>{s.enqueueAndForget(()=>AE(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new P(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new P(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Yu(Va(a.path),h,{includeMetadataChanges:!0,_a:!0});return TE(o,p)}(yield Oa(t),t.asyncQueue,e,n,r)})),r.promise}function B$(t,e){let n=new ct;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield zf(i,o,!0),u=new rp(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=Ba(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield kE(t),e,n)})),n.promise}function p1(t,e,n={}){let r=new ct;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new Pa({next:g=>{s.enqueueAndForget(()=>AE(o,p)),g.fromCache&&u.source==="server"?l.reject(new P(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Yu(a,h,{includeMetadataChanges:!0,_a:!0});return TE(o,p)}(yield Oa(t),t.asyncQueue,e,n,r)})),r.promise}function $$(t,e){let n=new Pa(e);return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){U(i).Y_.add(o),o.next()}(yield Oa(t),n)})),()=>{n.za(),t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){U(i).Y_.delete(o)}(yield Oa(t),n)}))}}function H$(t,e,n,r){let i=function(s,a){let u;return u=typeof s=="string"?TM().encode(s):s,function(h,p){return new Hw(h,p)}(function(h,p){if(h instanceof Uint8Array)return Fx(h,p);if(h instanceof ArrayBuffer)return Fx(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,sl(e));t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){F$(yield FE(t),i,r)}))}function q$(t,e){return t.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=U(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield kE(t),e)}))}function g1(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Vx=new Map;function VE(t,e,n){if(!n)throw new P(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LE(t,e,n,r){if(e===!0&&r===!0)throw new P(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Lx(t){if(!B.isDocumentKey(t))throw new P(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jx(t){if(B.isDocumentKey(t))throw new P(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _p(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K()}function Ie(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new P(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=_p(t);throw new P(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function m1(t,e){if(e<=0)throw new P(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var op=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ho=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new op({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new P(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new P(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new op(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new u_;switch(r.type){case"firstParty":return new f_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=Vx.get(n);r&&(k("ComponentProvider","Removing Datastore"),Vx.delete(n),r.terminate())}(this),Promise.resolve()}};function wp(t,e,n,r={}){var i;let o=(t=Ie(t,Ho))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Dn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=at.MOCK_USER;else{a=XI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new at(l)}t._authCredentials=new l_(new vf(a,u))}}var Ct=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Le=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},ar=class t extends Ct{constructor(e,n,r){super(e,n,Va(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new B(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function cl(t,e,...n){if(t=ze(t),VE("collection","path",e),t instanceof Ho){let r=Ee.fromString(e,...n);return jx(r),new ar(t,null,r)}{if(!(t instanceof Le||t instanceof ar))throw new P(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ee.fromString(e,...n));return jx(r),new ar(t.firestore,null,r)}}function jE(t,e){if(t=Ie(t,Ho),VE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ct(t,null,function(r){return new Fn(Ee.emptyPath(),r)}(e))}function $a(t,e,...n){if(t=ze(t),arguments.length===1&&(e=_f.newId()),VE("doc","path",e),t instanceof Ho){let r=Ee.fromString(e,...n);return Lx(r),new Le(t,null,new B(r))}{if(!(t instanceof Le||t instanceof ar))throw new P(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ee.fromString(e,...n));return Lx(r),new Le(t.firestore,t instanceof ar?t.converter:null,new B(r))}}function Ep(t,e){return t=ze(t),e=ze(e),(t instanceof Le||t instanceof ar)&&(e instanceof Le||e instanceof ar)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Ip(t,e){return t=ze(t),e=ze(e),t instanceof Ct&&e instanceof Ct&&t.firestore===e.firestore&&il(t._query,e._query)&&t.converter===e.converter}var Kw=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Qu(this,"async_queue_retry"),this.Eu=()=>{let n=mf();n&&k("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=mf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=mf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new ct;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return N(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!ki(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Xe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=Nw.createAndSchedule(this,e,n,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&K()}verifyOperationInProgress(){}mu(){return N(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function Qw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Yw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new ct,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var y1=-1,qe=class extends Ho{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Kw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||_1(this),this._firestoreClient.terminate()}};function v1(t,e){let n=typeof t=="object"?t:gc(),r=typeof t=="string"?t:e||"(default)",i=xg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=JI("firestore");o&&wp(i,...o)}return i}function mt(t){return t._firestoreClient||_1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function _1(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new E_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,g1(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Gw(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function UE(t,e){E1(t=Ie(t,qe));let n=mt(t);if(n._uninitializedComponentsProvider)throw new P(M.FAILED_PRECONDITION,"SDK cache is already specified.");Dn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Ju;return w1(n,i,new ip(i,r.cacheSizeBytes,e?.forceOwnership))}function BE(t){E1(t=Ie(t,qe));let e=mt(t);if(e._uninitializedComponentsProvider)throw new P(M.FAILED_PRECONDITION,"SDK cache is already specified.");Dn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Ju;return w1(e,r,new $w(r,n.cacheSizeBytes))}function w1(t,e,n){let r=new ct;return t.asyncQueue.enqueue(()=>N(this,null,function*(){try{yield yf(t,n),yield Ww(t,e),r.resolve()}catch(i){let o=i;if(!l1(o))throw o;Dn("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function $E(t){if(t._initialized&&!t._terminated)throw new P(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new ct;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!bi.D())return Promise.resolve();let i=r+"main";yield bi.delete(i)})}(IE(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function HE(t){return function(n){let r=new ct;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return b$(yield FE(n),r)})),r.promise}(mt(t=Ie(t,qe)))}function qE(t){return L$(mt(t=Ie(t,qe)))}function zE(t){return j$(mt(t=Ie(t,qe)))}function GE(t,e){let n=mt(t=Ie(t,qe)),r=new Yw;return H$(n,t._databaseId,e,r),r}function WE(t,e){return q$(mt(t=Ie(t,qe)),e).then(n=>n?new Ct(t,null,n.query):null)}function E1(t){if(t._initialized||t._terminated)throw new P(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var dr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(nt.fromBase64String(e))}catch(n){throw new P(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ln=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new P(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Gr=class{constructor(e){this._methodName=e}};var qo=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new P(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new P(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}};var Xu=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var z$=/^__.*__$/,Zw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ri(e,this.data,n,this.fieldTransforms)}},sp=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Vn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function I1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var ap=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return cp(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(I1(this.wu)&&z$.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},Jw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sl(e)}Nu(e,n,r,i=!1){return new ap({wu:e,methodName:n,Ou:r,path:et.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ko(t){let e=t._freezeSettings(),n=sl(t._databaseId);return new Jw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Cp(t,e,n,r,i,o={}){let s=t.Nu(o.merge||o.mergeFields?2:0,e,n,i);YE("Data must be an object, but it was:",s,r);let a=b1(r,s),u,l;if(o.merge)u=new ln(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=rE(e,p,n);if(!s.contains(g))throw new P(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);A1(h,g)||h.push(g)}u=new ln(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Zw(new Pt(a),u,l)}var el=class t extends Gr{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function C1(t,e,n){return new ap({wu:3,Ou:e.settings.Ou,methodName:t._methodName,Du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Xw=class t extends Gr{_toFieldTransform(e){return new Uo(e.path,new xi)}isEqual(e){return e instanceof t}},eE=class t extends Gr{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=C1(this,e,!0),r=this.Lu.map(o=>Qo(o,n)),i=new qr(r);return new Uo(e.path,i)}isEqual(e){return e instanceof t&&Sg(this.Lu,e.Lu)}},tE=class t extends Gr{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=C1(this,e,!0),r=this.Lu.map(o=>Qo(o,n)),i=new zr(r);return new Uo(e.path,i)}isEqual(e){return e instanceof t&&Sg(this.Lu,e.Lu)}},nE=class t extends Gr{constructor(e,n){super(e),this.Bu=n}_toFieldTransform(e){let n=new Mi(e.serializer,yM(e.serializer,this.Bu));return new Uo(e.path,n)}isEqual(e){return e instanceof t&&this.Bu===e.Bu}};function KE(t,e,n,r){let i=t.Nu(1,e,n);YE("Data must be an object, but it was:",i,r);let o=[],s=Pt.empty();Wo(r,(u,l)=>{let h=ZE(e,u,n);l=ze(l);let p=i.Cu(h);if(l instanceof el)o.push(h);else{let g=Qo(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new ln(o);return new sp(s,a,i.fieldTransforms)}function QE(t,e,n,r,i,o){let s=t.Nu(1,e,n),a=[rE(e,r,n)],u=[i];if(o.length%2!=0)throw new P(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(rE(e,o[g])),u.push(o[g+1]);let l=[],h=Pt.empty();for(let g=a.length-1;g>=0;--g)if(!A1(l,a[g])){let y=a[g],C=u[g];C=ze(C);let S=s.Cu(y);if(C instanceof el)l.push(y);else{let x=Qo(C,S);x!=null&&(l.push(y),h.set(y,x))}}let p=new ln(l);return new sp(h,p,s.fieldTransforms)}function D1(t,e,n,r=!1){return Qo(n,t.Nu(r?4:3,e))}function Qo(t,e){if(T1(t=ze(t)))return YE("Unsupported field value:",e,t),b1(t,e);if(t instanceof Gr)return function(r,i){if(!I1(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Qo(a,i.Fu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ge.fromDate(r);return{timestampValue:ba(i.serializer,o)}}if(r instanceof Ge){let o=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ba(i.serializer,o)}}if(r instanceof qo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dr)return{bytesValue:AM(i.serializer,r._byteString)};if(r instanceof Le){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:_E(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return vE(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${_p(r)}`)}(t,e)}function b1(t,e){let n={};return Xx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wo(t,(r,i)=>{let o=Qo(i,e.bu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function T1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof qo||t instanceof dr||t instanceof Le||t instanceof Gr||t instanceof Xu)}function YE(t,e,n){if(!T1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=_p(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function rE(t,e,n){if((e=ze(e))instanceof Ln)return e._internalPath;if(typeof e=="string")return ZE(t,e);throw cp("Field path arguments must be of type string or ",t,!1,void 0,n)}var G$=new RegExp("[~\\*/\\[\\]]");function ZE(t,e,n){if(e.search(G$)>=0)throw cp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ln(...e.split("."))._internalPath}catch{throw cp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cp(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new P(M.INVALID_ARGUMENT,a+t+u)}function A1(t,e){return t.some(n=>n.isEqual(e))}var zo=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new iE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Dp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},iE=class extends zo{data(){return super.data()}};function Dp(t,e){return typeof e=="string"?ZE(t,e):e instanceof Ln?e._internalPath:e._delegate._internalPath}function S1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new P(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var tl=class{},Go=class extends tl{};function hr(t,e,...n){let r=[];e instanceof tl&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof oE).length,a=o.filter(u=>u instanceof up).length;if(s>1||s>0&&a>0)throw new P(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var up=class t extends Go{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return M1(e._query,n),new Ct(e.firestore,e.converter,O_(e._query,n))}_parse(e){let n=Ko(e.firestore);return function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Bx(p,h);let y=[];for(let C of p)y.push(Ux(u,o,C));g={arrayValue:{values:y}}}else g=Ux(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Bx(p,h),g=D1(a,s,p,h==="in"||h==="not-in");return _e.create(l,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function JE(t,e,n){let r=e,i=Dp("where",t);return up._create(i,r,n)}var oE=class t extends tl{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Re.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)M1(s,u),s=O_(s,u)}(e._query,n),new Ct(e.firestore,e.converter,O_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var sE=class t extends Go{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new P(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lo(o,s)}(e._query,this._field,this._direction);return new Ct(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Fn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function XE(t,e="asc"){let n=e,r=Dp("orderBy",t);return sE._create(r,n)}var lp=class t extends Go{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Ct(e.firestore,e.converter,xf(e._query,this._limit,this._limitType))}};function e0(t){return m1("limit",t),lp._create("limit",t,"F")}function t0(t){return m1("limitToLast",t),lp._create("limitToLast",t,"L")}var dp=class t extends Go{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=x1(e,this.type,this._docOrFields,this._inclusive);return new Ct(e.firestore,e.converter,function(i,o){return new Fn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function n0(...t){return dp._create("startAt",t,!0)}function r0(...t){return dp._create("startAfter",t,!1)}var hp=class t extends Go{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=x1(e,this.type,this._docOrFields,this._inclusive);return new Ct(e.firestore,e.converter,function(i,o){return new Fn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function i0(...t){return hp._create("endBefore",t,!1)}function o0(...t){return hp._create("endAt",t,!0)}function x1(t,e,n,r){if(n[0]=ze(n[0]),n[0]instanceof zo)return function(o,s,a,u,l){if(!u)throw new P(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of ya(o))if(p.field.isKeyField())h.push(Vo(s,u.key));else{let g=u.data.field(p.field);if(pp(g))throw new P(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=p.field.canonicalString();throw new P(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(g)}return new ur(h,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Ko(t.firestore);return function(s,a,u,l,h,p){let g=s.explicitOrderBy;if(h.length>g.length)throw new P(M.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let C=0;C<h.length;C++){let S=h[C];if(g[C].field.isKeyField()){if(typeof S!="string")throw new P(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof S}`);if(!mE(s)&&S.indexOf("/")!==-1)throw new P(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${S}' contains a slash.`);let x=s.path.child(Ee.fromString(S));if(!B.isDocumentKey(x))throw new P(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);let L=new B(x);y.push(Vo(a,L))}else{let x=D1(u,l,S);y.push(x)}}return new ur(y,p)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Ux(t,e,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new P(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mE(e)&&n.indexOf("/")!==-1)throw new P(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ee.fromString(n));if(!B.isDocumentKey(r))throw new P(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vo(t,new B(r))}if(n instanceof Le)return Vo(t,n._key);throw new P(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_p(n)}.`)}function Bx(t,e){if(!Array.isArray(t)||t.length===0)throw new P(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function M1(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new P(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var ka=class{convertValue(e,n="none"){switch(Fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Wo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>He(s.doubleValue));return new Xu(o)}convertGeoPoint(e){return new qo(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=pE(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){let n=Hr(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ee.fromString(e);Y(LM(r));let i=new Ai(r.get(1),r.get(3)),o=new B(r.popFirst(5));return i.isEqual(n)||Xe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function bp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var aE=class extends ka{constructor(e){super(),this.firestore=e}convertBytes(e){return new dr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}};var $r=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Tn=class extends zo{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ci(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Dp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ci=class extends Tn{data(e={}){return super.data(e)}},jn=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new $r(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ci(this._firestore,this._userDataWriter,r.key,r,new $r(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new P(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ci(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $r(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ci(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $r(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:W$(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function W$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function Tp(t,e){return t instanceof Tn&&e instanceof Tn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof jn&&e instanceof jn&&t._firestore===e._firestore&&Ip(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function s0(t){t=Ie(t,Le);let e=Ie(t.firestore,qe);return f1(mt(e),t._key).then(n=>p0(e,t,n))}var Wr=class extends ka{constructor(e){super(),this.firestore=e}convertBytes(e){return new dr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}};function a0(t){t=Ie(t,Le);let e=Ie(t.firestore,qe),n=mt(e),r=new Wr(e);return U$(n,t._key).then(i=>new Tn(e,r,t._key,i,new $r(i!==null&&i.hasLocalMutations,!0),t.converter))}function c0(t){t=Ie(t,Le);let e=Ie(t.firestore,qe);return f1(mt(e),t._key,{source:"server"}).then(n=>p0(e,t,n))}function u0(t){t=Ie(t,Ct);let e=Ie(t.firestore,qe),n=mt(e),r=new Wr(e);return S1(t._query),p1(n,t._query).then(i=>new jn(e,r,t,i))}function l0(t){t=Ie(t,Ct);let e=Ie(t.firestore,qe),n=mt(e),r=new Wr(e);return B$(n,t._query).then(i=>new jn(e,r,t,i))}function d0(t){t=Ie(t,Ct);let e=Ie(t.firestore,qe),n=mt(e),r=new Wr(e);return p1(n,t._query,{source:"server"}).then(i=>new jn(e,r,t,i))}function Ap(t,e,n){t=Ie(t,Le);let r=Ie(t.firestore,qe),i=bp(t.converter,e,n);return Ha(r,[Cp(Ko(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Qe.none())])}function Sp(t,e,n,...r){t=Ie(t,Le);let i=Ie(t.firestore,qe),o=Ko(i),s;return s=typeof(e=ze(e))=="string"||e instanceof Ln?QE(o,"updateDoc",t._key,e,n,r):KE(o,"updateDoc",t._key,e),Ha(i,[s.toMutation(t._key,Qe.exists(!0))])}function h0(t){return Ha(Ie(t.firestore,qe),[new Ni(t._key,Qe.none())])}function xp(t,e){let n=Ie(t.firestore,qe),r=$a(t),i=bp(t.converter,e);return Ha(n,[Cp(Ko(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Qe.exists(!1))]).then(()=>r)}function Mp(t,...e){var n,r,i;t=ze(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Qw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Qw(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof Le)l=Ie(t.firestore,qe),h=Va(t._key.path),u={next:p=>{e[s]&&e[s](p0(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Ie(t,Ct);l=Ie(p.firestore,qe),h=p._query;let g=new Wr(l);u={next:y=>{e[s]&&e[s](new jn(l,g,p,y))},error:e[s+1],complete:e[s+2]},S1(t._query)}return function(g,y,C,S){let x=new Pa(S),L=new Yu(y,x,C);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return TE(yield Oa(g),L)})),()=>{x.za(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return AE(yield Oa(g),L)}))}}(mt(l),h,a,u)}function f0(t,e){return $$(mt(t=Ie(t,qe)),Qw(e)?e:{next:e})}function Ha(t,e){return function(r,i){let o=new ct;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return E$(yield FE(r),i,o)})),o.promise}(mt(t),e)}function p0(t,e,n){let r=n.docs.get(e._key),i=new Wr(t);return new Tn(t,i,e._key,r,new $r(n.hasPendingWrites,n.fromCache),e.converter)}var K$={maxAttempts:5};var fp=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ko(e)}set(e,n,r){this._verifyNotCommitted();let i=Ei(e,this._firestore),o=bp(i.converter,n,r),s=Cp(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Qe.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=Ei(e,this._firestore),s;return s=typeof(n=ze(n))=="string"||n instanceof Ln?QE(this._dataReader,"WriteBatch.update",o._key,n,r,i):KE(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Qe.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Ei(e,this._firestore);return this._mutations=this._mutations.concat(new Ni(n._key,Qe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ei(t,e){if((t=ze(t)).firestore!==e)throw new P(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var cE=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ko(n)}get(n){let r=Ei(n,this._firestore),i=new aE(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return K();let s=o[0];if(s.isFoundDocument())return new zo(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new zo(this._firestore,i,r._key,null,r.converter);throw K()})}set(n,r,i){let o=Ei(n,this._firestore),s=bp(o.converter,r,i),a=Cp(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=Ei(n,this._firestore),a;return a=typeof(r=ze(r))=="string"||r instanceof Ln?QE(this._dataReader,"Transaction.update",s._key,r,i,o):KE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=Ei(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Ei(e,this._firestore),r=new Wr(this._firestore);return super.get(e).then(i=>new Tn(this._firestore,r,n._key,i._document,new $r(!1,!1),n.converter))}};function g0(t,e,n){t=Ie(t,qe);let r=Object.assign(Object.assign({},K$),n);return function(o){if(o.maxAttempts<1)throw new P(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new ct;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield V$(o);new zw(o.asyncQueue,l,a,s,u).ru()})),u.promise}(mt(t),i=>e(new cE(t,i)),r)}function m0(){return new el("deleteField")}function y0(){return new Xw("serverTimestamp")}function v0(...t){return new eE("arrayUnion",t)}function _0(...t){return new tE("arrayRemove",t)}function w0(t){return new nE("increment",t)}(function(e,n=!0){(function(i){Fa=i})(nC),pc(new $i("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new qe(new d_(r.getProvider("auth-internal")),new g_(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ai(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),St(US,"4.7.2",e),St(US,"4.7.2","esm2017")})();var Qr=class{constructor(e){return e}},R1="firestore",E0=class{constructor(){return _u(R1)}};var I0=new W("angularfire2.firestore-instances");function Q$(t,e){let n=rf(R1,t,e);return n&&new Qr(n)}function Y$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Qr(r)}}var Z$={provide:E0,deps:[[new Mt,I0]]},J$={provide:Qr,useFactory:Q$,deps:[[new Mt,I0],Lr]};function N1(t,...e){return St("angularfire",Vr.full,"fst"),Zn([J$,Z$,{provide:I0,useFactory:Y$(t),multi:!0,deps:[De,Yt,tr,Ao,[new Mt,wu],[new Mt,kn],...e]}])}var Rp=nr(xp,!0);var Np=nr(cl,!0);var P1=nr(v1,!0);var X$=()=>["/yo"],e4=()=>["/registro"],Pp=class t{constructor(e,n,r){this.firestore=e;this.router=n;this.auth=r}loginsCollection=[];userMail="";userPass="";mensajeError="";loggedUser="";LogIn(){return N(this,null,function*(){if(!this.userMail||!this.userPass){this.mensajeError="Por favor completa los campos.";return}FS(this.auth,this.userMail,this.userPass).then(e=>{this.router.navigate(["/home"]);let n=Np(this.firestore,"logins");return Rp(n,{fecha:new Date,email:this.userMail})}).then(()=>{console.log("Registro de inicio de sesi\xF3n guardado en Firestore.")}).catch(e=>{switch(e.code){case"auth/invalid-email":this.mensajeError="Email inv\xE1lido";break;case"auth/invalid-credential":this.mensajeError="Contrase\xF1a incorrecta";break;case"auth/user-not-found":this.mensajeError="Usuario no encontrado";break;case"auth/missing-password":this.mensajeError="Faltan completar campos";break;default:this.mensajeError="Ocurri\xF3 un error: "+e.message;break}})})}AutoComplete(){this.userMail="sofiadorbe@gmail.com",this.userPass="hola123"}static \u0275fac=function(n){return new(n||t)(oe(Qr),oe(Co),oe(jr))};static \u0275cmp=yt({type:t,selectors:[["app-login"]],standalone:!0,features:[vt],decls:51,vars:7,consts:[["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1"],["name","author","content","Yinka Enoch Adedokun"],[1,"container"],[1,"navbar"],["href","#"],[3,"routerLink"],[1,"container-fluid"],[1,"row","main-content","bg-success","text-center"],[1,"col-md-4","text-center","company__info"],[1,"company__logo"],[1,"fa","fa-android"],[1,"col-md-8","col-xs-12","col-sm-12","login_form"],[1,"row"],["control","",1,"form-group"],["type","text","name","username","id","username","placeholder","Username",1,"form__input",3,"ngModelChange","ngModel"],["type","password","name","password","id","password","placeholder","Password",1,"form__input",3,"ngModelChange","ngModel"],[1,"error-mensaje"],["type","button","value","JUGAR!",1,"btn",3,"click"],["type","button","value","Autocompletar",1,"btn",3,"click"],[1,"container-fluid","text-center","footer"]],template:function(n,r){n&1&&(O(0,"head"),be(1,"meta",0)(2,"meta",1)(3,"meta",2),O(4,"title"),z(5,"Login Page"),F()(),O(6,"body")(7,"div",3)(8,"nav",4)(9,"ul")(10,"li")(11,"a",5),z(12,"Home"),F()(),O(13,"li")(14,"a",5),z(15,"Chat"),F()(),O(16,"li")(17,"a",6),z(18,"Sobre Mi"),F()(),O(19,"li")(20,"a",5),z(21,"Log Out"),F()()()()(),O(22,"div",7)(23,"div",8)(24,"div",9)(25,"span",10)(26,"h2"),be(27,"span",11),F()()(),O(28,"div",12)(29,"div",7)(30,"div",13)(31,"h2"),z(32,"Log In"),F()(),O(33,"div",13)(34,"form",14)(35,"div",13)(36,"input",15),Xn("ngModelChange",function(o){return Mr(r.userMail,o)||(r.userMail=o),o}),F()(),O(37,"div",13)(38,"input",16),Xn("ngModelChange",function(o){return Mr(r.userPass,o)||(r.userPass=o),o}),F()(),O(39,"div",13)(40,"p",17),z(41),F(),O(42,"input",18),Je("click",function(){return r.LogIn()}),F(),O(43,"input",19),Je("click",function(){return r.AutoComplete()}),F()()()(),O(44,"div",13)(45,"p"),z(46,"No tienes una cuenta? "),O(47,"a",6),z(48,"Reg\xEDstrate aqu\xED"),F()()()()()()(),O(49,"div",20),z(50," Coded with \u2665 by Sofia Dorbessan "),F()()),n&2&&(ne(17),fe("routerLink",pt(5,X$)),ne(19),Jn("ngModel",r.userMail),ne(2),Jn("ngModel",r.userPass),ne(3),lo(r.mensajeError),ne(6),fe("routerLink",pt(6,e4)))},dependencies:[In,Ht,ra,tf,mi,na,Xh,bo,vu],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;background-color:#000;height:100%;overflow:hidden}body[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.container-fluid[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{margin:0;padding:0}.navbar[_ngcontent-%COMP%]{background-color:#000;padding:10px 300px 10px 20px;position:fixed;width:100%;display:flex;justify-content:center}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:30px}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:20px;padding:10px;display:inline-block}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#a3ae3a;border-radius:4px}.main-content[_ngcontent-%COMP%]{width:50%;border-radius:20px;box-shadow:0 5px 5px #0006;margin:7em auto 2.5em;display:flex;background-color:#fff;overflow:hidden}.company__info[_ngcontent-%COMP%]{background-image:url(https://i.pinimg.com/736x/dc/19/53/dc1953322fa3946096ff13800e2de799.jpg);display:flex;flex-direction:column;justify-content:center;background-size:cover;height:60vh;background-position:center}.fa-android[_ngcontent-%COMP%]{font-size:3em}@media screen and (max-width: 640px){.main-content[_ngcontent-%COMP%]{width:90%}.company__info[_ngcontent-%COMP%]{display:none}.login_form[_ngcontent-%COMP%]{border-top-left-radius:20px;border-bottom-left-radius:20px}}@media screen and (min-width: 642px) and (max-width:800px){.main-content[_ngcontent-%COMP%]{width:70%}}.row[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{color:#fff;font-size:60px;font-weight:700;text-shadow:2px 2px 0px #e5ff00,-2px 2px 0px #e5ff00,2px -2px 0px #e5ff00,-2px -2px 0px #e5ff00}.login_form[_ngcontent-%COMP%]{background-color:#fff;border-top-right-radius:20px;border-bottom-right-radius:20px;border-top:1px solid #ccc;border-right:1px solid #ccc}form[_ngcontent-%COMP%]{padding:0 2em}.form__input[_ngcontent-%COMP%]{width:100%;border:0px solid transparent;border-radius:0;border-bottom:1px solid #aaa;padding:1em .5em .5em 2em;outline:none;margin:1.5em auto;transition:all .5s ease}.form__input[_ngcontent-%COMP%]:focus{border-bottom-color:#dee81f;box-shadow:0 0 5px #07070766;border-radius:4px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.btn[_ngcontent-%COMP%]{transition:all .5s ease;width:40%;border-radius:30px;color:#dee81f;font-weight:600;background-color:#fff;border:1px solid #dee81f;margin-top:1.5em;margin-bottom:1em;text-align:center}.btn[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:focus{background-color:#dee81f;color:#fff}.footer[_ngcontent-%COMP%]{text-align:center;padding:10px 0;color:#fff;background-color:#000;margin-top:6em}.error-mensaje[_ngcontent-%COMP%]{color:red}"]})};var t4=()=>["/login"],n4=()=>["/"],k1="*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;line-height:1.6;margin:0;padding:0;background:#f4f4f4;text-align:center}header[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:flex-start;height:100vh;background:#333;color:#fff;padding-top:100px}.container-nav[_ngcontent-%COMP%]{text-align:center}.navbar[_ngcontent-%COMP%]{background-color:#000;padding:10px 20px;position:fixed;top:0;left:0;right:0;width:100%;display:flex;justify-content:center;z-index:1000}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:30px}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:20px;padding:10px;display:inline-block}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#a3ae3a;border-radius:4px}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;text-align:left}.bio[_ngcontent-%COMP%]{margin-left:20px;padding:20px;border-radius:8px;max-width:500px;text-align:left;margin-top:110px}.mi-foto[_ngcontent-%COMP%]{width:200px;height:auto;border-radius:10%;margin-top:120px}.bio[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;font-size:18px;line-height:1.8}.game-section[_ngcontent-%COMP%]{margin-top:50px;padding:20px;border-radius:8px;max-width:500px;text-align:left}.game-description[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10px}.game-description[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;margin-left:20px;text-align:left}.game-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;line-height:1.8}footer[_ngcontent-%COMP%]{background:#333;color:#fff;text-align:center;position:fixed;bottom:0;width:100%;display:flex;justify-content:space-between;align-items:center;padding:10px 40px}.social-media-footer[_ngcontent-%COMP%]{display:flex;margin-left:660px}.social-logo[_ngcontent-%COMP%]{width:40px;height:40px;margin-left:20px}",Op=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=yt({type:t,selectors:[["app-yo"]],standalone:!0,features:[vt],decls:51,vars:4,consts:[["lang","es"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"container-nav"],[1,"navbar"],[3,"routerLink"],["href","#"],[1,"header-content"],["src","yo.png","alt","Sofia Dorbessan",1,"mi-foto"],[1,"bio"],[1,"game-section"],[1,"game-description"],[1,"social-media-footer"],["href","https://www.linkedin.com/in/sofia-dorbessan-24a669210/","target","_blank"],["src","linkedin.png","alt","LinkedIn",1,"social-logo"],["href","https://github.com/sofidor","target","_blank"],["src","github.png","alt","GitHub",1,"social-logo"]],template:function(n,r){n&1&&(O(0,"html",0)(1,"head"),be(2,"meta",1)(3,"meta",2),O(4,"title"),z(5,"Sobre M\xED - Sofia Dorbessan"),F()(),O(6,"body")(7,"div",3)(8,"nav",4)(9,"ul")(10,"li")(11,"a",5),z(12,"Log in"),F()(),O(13,"li")(14,"a",6),z(15,"Chat"),F()(),O(16,"li")(17,"a",5),z(18,"Home"),F()(),O(19,"li")(20,"a",6),z(21,"Log Out"),F()()()()(),O(22,"header")(23,"div",7),be(24,"img",8),O(25,"div",9)(26,"h2"),z(27,"Sofia Dorbessan"),F(),O(28,"p"),z(29,"Soy estudiante de la Tecnicatura Universitaria en Programacion en la UTN (Universidad Tecnologica Nacional). Donde aprendi diferentes lenguaje como: C , C++ , Java Scrip , Python , PHP ,HTML, CSS, entre otros."),F()()(),O(30,"div",10)(31,"h2"),z(32,"Mi Juego - Pacman"),F(),O(33,"div",11)(34,"p"),z(35,"Pacman es un juego de arcade cl\xE1sico lanzado en 1980. El objetivo del juego es controlar a Pacman, una figura circular amarilla, y moverlo a trav\xE9s de un laberinto comiendo todos los puntos mientras se evitan los fantasmas. Si un fantasma toca a Pacman, perder\xE1s una vida."),F(),O(36,"h3"),z(37,"C\xF3mo jugar Pacman"),F(),O(38,"ul")(39,"li"),z(40,"Usa las teclas de flechas para mover a Pacman por el laberinto."),F(),O(41,"li"),z(42,"Colecciona todos los puntos peque\xF1os para avanzar de nivel."),F(),O(43,"li"),z(44,"Evita a los fantasmas: si te tocan, perder\xE1s una vida."),F()()()()(),O(45,"footer")(46,"div",12)(47,"a",13),be(48,"img",14),F(),O(49,"a",15),be(50,"img",16),F()()()()()),n&2&&(ne(11),fe("routerLink",pt(2,t4)),ne(6),fe("routerLink",pt(3,n4)))},dependencies:[In,Ht],styles:[k1,k1]})};var r4=()=>["/login"],i4=()=>["/home"];function o4(t,e){if(t&1&&be(0,"div",7),t&2){let n=e.$implicit,r=e.index,i=rn().index,o=rn();fe("ngClass",o.getCellClass(n,i,r))}}function s4(t,e){if(t&1&&(O(0,"div"),nn(1,o4,1,1,"div",6),F()),t&2){let n=e.$implicit;ne(),fe("ngForOf",n)}}var kp=class t{board=[];pacmanPosition={x:1,y:1};ghostPositions=[{x:9,y:9},{x:11,y:9},{x:13,y:9}];ngOnInit(){this.initializeBoard()}initializeBoard(){this.board=[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,2,2,1],[1,2,1,2,2,2,2,2,1,2,1,2,2,2,2,2,1,2,2,1],[1,2,1,2,1,1,1,2,1,2,1,2,1,1,1,2,1,2,2,1],[1,2,1,2,1,2,1,2,2,2,2,2,1,2,1,2,1,2,2,1],[1,2,1,2,1,2,1,2,1,1,1,2,1,2,1,2,1,2,2,1],[1,2,2,2,2,2,1,2,1,2,2,2,1,2,2,2,2,2,2,1],[1,2,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,2,1,1,1,2,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,1,2,2,2,2,2,1,2,2,2,2,2,2,1],[1,2,1,1,1,2,1,2,1,1,1,2,1,2,1,1,1,2,1,1],[1,2,2,2,1,2,2,2,2,2,2,2,2,2,1,2,2,2,2,1],[1,1,1,2,1,1,1,1,1,2,1,1,1,1,1,2,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]}movePacman(e,n){let r=this.pacmanPosition.x+e,i=this.pacmanPosition.y+n;r>=0&&r<this.board[0].length&&i>=0&&i<this.board.length&&this.board[i][r]!==1&&(this.pacmanPosition={x:r,y:i},this.board[i][r]===2&&(this.board[i][r]=0))}handleKeyDown(e){switch(e.key){case"ArrowUp":this.movePacman(-1,0);break;case"ArrowDown":this.movePacman(1,0);break;case"ArrowLeft":this.movePacman(0,-1);break;case"ArrowRight":this.movePacman(0,1);break}}getCellClass(e,n,r){if(n===this.pacmanPosition.y&&r===this.pacmanPosition.x)return"pacman";for(let i of this.ghostPositions)if(n===i.y&&r===i.x)return"ghost";return e===0?"coin":e===1?"wall":"path"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=yt({type:t,selectors:[["app-pacman"]],hostBindings:function(n,r){n&1&&Je("keydown",function(o){return r.handleKeyDown(o)},!1,Jb)},standalone:!0,features:[vt],decls:18,vars:5,consts:[[1,"container-nav"],[1,"navbar"],[3,"routerLink"],["href","#"],[1,"game-board"],[4,"ngFor","ngForOf"],["class","cell",3,"ngClass",4,"ngFor","ngForOf"],[1,"cell",3,"ngClass"]],template:function(n,r){n&1&&(O(0,"body")(1,"div",0)(2,"nav",1)(3,"ul")(4,"li")(5,"a",2),z(6,"Log in"),F()(),O(7,"li")(8,"a",3),z(9,"Chat"),F()(),O(10,"li")(11,"a",2),z(12,"Home"),F()(),O(13,"li")(14,"a",3),z(15,"Log Out"),F()()()()(),O(16,"div",4),nn(17,s4,2,1,"div",5),F()()),n&2&&(ne(5),fe("routerLink",pt(3,r4)),ne(6),fe("routerLink",pt(4,i4)),ne(6),fe("ngForOf",r.board))},dependencies:[In,Ht,dA,$s],styles:['body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;width:100%;display:flex;justify-content:center;align-items:center;background-color:#000;overflow:hidden}.container-nav[_ngcontent-%COMP%]{text-align:center}.navbar[_ngcontent-%COMP%]{background-color:#000;padding:10px 20px;position:fixed;top:0;left:0;right:0;width:100%;display:flex;justify-content:center;z-index:1000}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:30px}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:20px;padding:10px;display:inline-block}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#a3ae3a;border-radius:4px}.game-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(20,1fr);grid-template-rows:repeat(20,1fr);width:min(100vw,100vh);height:min(100vw,100vh);gap:2px;background-color:#000;margin-top:70px}.cell[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.wall[_ngcontent-%COMP%]{background-color:#00f}.path[_ngcontent-%COMP%]{background-color:#000;position:relative}.path[_ngcontent-%COMP%]:after{content:"";display:block;background-color:gold;width:30%;height:30%;border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.pacman[_ngcontent-%COMP%]{background-color:#ff0;border-radius:50%}.ghost[_ngcontent-%COMP%]{background-color:red;border-radius:50%}']})};var a4=()=>["/login"],c4=()=>["/yo"],Fp=class t{constructor(e,n,r){this.auth=e;this.firestore=n;this.router=r}newUserMail="";newUsername="";newUserPass="";newUserRepeatPass="";msjError="";Register(){if(this.newUserPass.length<6){this.msjError="La contrase\xF1a debe tener al menos 6 caracteres";return}this.newUserPass===this.newUserRepeatPass?OS(this.auth,this.newUserMail,this.newUserPass).then(e=>{console.log("Usuario creado correctamente");let n=Np(this.firestore,"users");Rp(n,{fecha:new Date,email:this.newUserMail}).then(()=>{this.router.navigate(["/home"])}).catch(r=>{this.msjError="Error al agregar usuario a la base de datos",console.error("Error al agregar documento:",r)})}).catch(e=>{switch(e.code){case"auth/invalid-email":this.msjError="Email inv\xE1lido";break;case"auth/email-already-in-use":this.msjError="Email ya en uso";break;case"auth/missing-password":this.msjError="Faltan completar campos";break;case"auth/weak-password":this.msjError="La contrase\xF1a es demasiado d\xE9bil";break;default:this.msjError="Ocurri\xF3 un error";break}}):this.msjError="Las contrase\xF1as no coinciden"}static \u0275fac=function(n){return new(n||t)(oe(jr),oe(Qr),oe(Co))};static \u0275cmp=yt({type:t,selectors:[["app-registro"]],standalone:!0,features:[vt],decls:48,vars:8,consts:[["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1"],["name","author","content","Yinka Enoch Adedokun"],[1,"container-nav"],[1,"navbar"],[3,"routerLink"],["href","#"],[1,"container-fluid"],[1,"row","main-content","bg-success","text-center"],[1,"col-md-4","text-center","company__info"],[1,"company__logo"],[1,"fa","fa-android"],[1,"col-md-8","col-xs-12","col-sm-12","login_form"],[1,"row"],["control","",1,"form-group"],["type","text","name","username","id","username","placeholder","Email",1,"form__input",3,"ngModelChange","ngModel"],["type","password","name","password","id","password","placeholder","Contrase\xF1a",1,"form__input",3,"ngModelChange","ngModel"],["type","password","name","repeatpassword","id","repeatpassword","placeholder","Repita la contrase\xF1a",1,"form__input",3,"ngModelChange","ngModel"],["type","button",1,"btn",3,"click"],[1,"error-mensaje"],[1,"container-fluid","text-center","footer"]],template:function(n,r){n&1&&(O(0,"head"),be(1,"meta",0)(2,"meta",1)(3,"meta",2),O(4,"title"),z(5,"Registrarme"),F()(),O(6,"body")(7,"div",3)(8,"nav",4)(9,"ul")(10,"li")(11,"a",5),z(12,"Log in"),F()(),O(13,"li")(14,"a",6),z(15,"Chat"),F()(),O(16,"li")(17,"a",5),z(18,"Sobre Mi"),F()(),O(19,"li")(20,"a",6),z(21,"Log Out"),F()()()()(),O(22,"div",7)(23,"div",8)(24,"div",9)(25,"span",10)(26,"h2"),be(27,"span",11),F()()(),O(28,"div",12)(29,"div",7)(30,"div",13)(31,"h2"),z(32,"Registrate"),F()(),O(33,"div",13)(34,"form",14)(35,"div",13)(36,"input",15),Xn("ngModelChange",function(o){return Mr(r.newUserMail,o)||(r.newUserMail=o),o}),F()(),O(37,"div",13)(38,"input",16),Xn("ngModelChange",function(o){return Mr(r.newUserPass,o)||(r.newUserPass=o),o}),F()(),O(39,"div",13)(40,"input",17),Xn("ngModelChange",function(o){return Mr(r.newUserRepeatPass,o)||(r.newUserRepeatPass=o),o}),F()(),O(41,"div",13)(42,"button",18),Je("click",function(){return r.Register()}),z(43,"Registrarme!"),F(),O(44,"p",19),z(45),F()()()()()()()(),O(46,"div",20),z(47," Coded with \u2665 by Sofia Dorbessan "),F()()),n&2&&(ne(11),fe("routerLink",pt(6,a4)),ne(6),fe("routerLink",pt(7,c4)),ne(19),Jn("ngModel",r.newUserMail),ne(2),Jn("ngModel",r.newUserPass),ne(2),Jn("ngModel",r.newUserRepeatPass),ne(5),lo(r.msjError))},dependencies:[In,Ht,ra,tf,mi,na,Xh,bo,vu],styles:[".container-fluid[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{margin:0;padding:0}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;background-color:#000;height:100%;overflow:hidden}body[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.container-nav[_ngcontent-%COMP%]{text-align:center}.navbar[_ngcontent-%COMP%]{background-color:#000;padding:10px 20px;position:fixed;top:0;left:0;right:0;width:100%;display:flex;justify-content:center}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:30px}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:20px;padding:10px;display:inline-block}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#a3ae3a;border-radius:4px}.main-content[_ngcontent-%COMP%]{width:50%;border-radius:20px;box-shadow:0 5px 5px #0006;margin:7em auto 2.5em;display:flex;background-color:#fff;overflow:hidden}.company__info[_ngcontent-%COMP%]{background-image:url(https://i.pinimg.com/736x/dc/19/53/dc1953322fa3946096ff13800e2de799.jpg);display:flex;flex-direction:column;justify-content:center;background-size:cover;height:60vh;background-position:center}.fa-android[_ngcontent-%COMP%]{font-size:3em}@media screen and (max-width: 640px){.main-content[_ngcontent-%COMP%]{width:90%}.company__info[_ngcontent-%COMP%]{display:none}.login_form[_ngcontent-%COMP%]{border-top-left-radius:20px;border-bottom-left-radius:20px}}@media screen and (min-width: 642px) and (max-width:800px){.main-content[_ngcontent-%COMP%]{width:70%}}.row[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{color:#fff;font-size:60px;font-weight:700;text-shadow:2px 2px 0px #e5ff00,-2px 2px 0px #e5ff00,2px -2px 0px #e5ff00,-2px -2px 0px #e5ff00}.login_form[_ngcontent-%COMP%]{background-color:#fff;border-top-right-radius:20px;border-bottom-right-radius:20px;border-top:1px solid #ccc;border-right:1px solid #ccc}form[_ngcontent-%COMP%]{padding:0 2em}.form__input[_ngcontent-%COMP%]{width:100%;border:0px solid transparent;border-radius:0;border-bottom:1px solid #aaa;padding:1em .5em .5em 2em;outline:none;margin:1.5em auto;transition:all .5s ease}.form__input[_ngcontent-%COMP%]:focus{border-bottom-color:#dee81f;box-shadow:0 0 5px #07070766;border-radius:4px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.btn[_ngcontent-%COMP%]{transition:all .5s ease;width:40%;border-radius:30px;color:#dee81f;font-weight:600;background-color:#fff;border:1px solid #dee81f;text-align:center}.btn[_ngcontent-%COMP%]:hover, .btn[_ngcontent-%COMP%]:focus{background-color:#dee81f;color:#fff}.footer[_ngcontent-%COMP%]{text-align:center;padding:10px 0;color:#fff;background-color:#000;margin-top:6em}.error-mensaje[_ngcontent-%COMP%]{color:red}"]})};var u4=()=>["/login"],l4=()=>["/home"];function d4(t,e){if(t&1&&(O(0,"span",30),z(1),F()),t&2){let n=e.$implicit;ne(),_n(" ",n," ")}}function h4(t,e){t&1&&(ui(),be(0,"circle",31))}function f4(t,e){t&1&&(ui(),be(0,"line",32))}function p4(t,e){t&1&&(ui(),be(0,"line",33))}function g4(t,e){t&1&&(ui(),be(0,"line",34))}function m4(t,e){t&1&&(ui(),be(0,"line",35))}function y4(t,e){t&1&&(ui(),be(0,"line",36))}function v4(t,e){if(t&1){let n=Us();O(0,"button",37),Je("click",function(){let i=ks(n).$implicit,o=rn();return Fs(o.intentarLetra(i))}),z(1),F()}if(t&2){let n=e.$implicit,r=rn();fe("disabled",r.letrasIntentadas.includes(n)),ne(),_n(" ",n," ")}}function _4(t,e){if(t&1){let n=Us();O(0,"button",37),Je("click",function(){let i=ks(n).$implicit,o=rn();return Fs(o.intentarLetra(i))}),z(1),F()}if(t&2){let n=e.$implicit,r=rn();fe("disabled",r.letrasIntentadas.includes(n)),ne(),_n(" ",n," ")}}function w4(t,e){if(t&1){let n=Us();O(0,"button",37),Je("click",function(){let i=ks(n).$implicit,o=rn();return Fs(o.intentarLetra(i))}),z(1),F()}if(t&2){let n=e.$implicit,r=rn();fe("disabled",r.letrasIntentadas.includes(n)),ne(),_n(" ",n," ")}}function E4(t,e){if(t&1){let n=Us();O(0,"div")(1,"p",38),z(2,"\xA1Felicitaciones! Has adivinado la palabra."),F(),O(3,"button",39),Je("click",function(){ks(n);let i=rn();return Fs(i.reiniciarJuego())}),z(4,"Volver a Jugar"),F()()}}function I4(t,e){if(t&1){let n=Us();O(0,"div")(1,"p",38),z(2,"Lo siento, has perdido. La palabra era: "),O(3,"strong"),z(4),F()(),O(5,"button",39),Je("click",function(){ks(n);let i=rn();return Fs(i.reiniciarJuego())}),z(6,"Volver a Jugar"),F()()}if(t&2){let n=rn();ne(4),lo(n.palabra)}}var Vp=class t{palabras=["ANGULAR","PROGRAMACION","ELEFANTE","DESARROLLO","HELADO","MIEDO","DEDOS","CELULAR","BICICLETA","NUMEROS","CARAMELOS","DULCE","COMPUTADORA","AUTOMOVIL","MUSICA","LENGUAJE","TELEVISOR","AVION","PERRO","GATO","VENTANA","LIBRO","ESCALERA","FUTBOL","PLANTA","CAMISA","CAF\xC9","SILLA","MOCHILA"];palabra="";alfabeto="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");letrasIntentadas=[];intentosRestantes=6;palabraMostrada=[];ganaste=!1;perdiste=!1;ngOnInit(){this.inicializarJuego()}inicializarJuego(){this.seleccionarPalabraAleatoria(),this.palabraMostrada=Array(this.palabra.length).fill("_"),this.letrasIntentadas=[],this.intentosRestantes=6,this.ganaste=!1,this.perdiste=!1}seleccionarPalabraAleatoria(){let e=Math.floor(Math.random()*this.palabras.length);this.palabra=this.palabras[e]}intentarLetra(e){this.letrasIntentadas.push(e),this.palabra.includes(e)?this.actualizarPalabraMostrada(e):this.intentosRestantes--,this.intentosRestantes===0&&(this.perdiste=!0),this.palabraMostrada.includes("_")||(this.ganaste=!0)}actualizarPalabraMostrada(e){for(let n=0;n<this.palabra.length;n++)this.palabra[n]===e&&(this.palabraMostrada[n]=e)}reiniciarJuego(){this.inicializarJuego()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=yt({type:t,selectors:[["app-ahorcado"]],standalone:!0,features:[vt],decls:52,vars:17,consts:[["lang","es"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["http-equiv","X-UA-Compatible","content","ie=edge"],[1,"container-nav"],[1,"navbar"],[3,"routerLink"],["href","#"],[1,"container"],[1,"palabra-contenedor"],[1,"palabra-titulo"],["class","letra",4,"ngFor","ngForOf"],[1,"ahorcado-dibujo"],["width","200","height","250"],["x1","10","y1","230","x2","150","y2","230","stroke","black","stroke-width","5"],["x1","80","y1","230","x2","80","y2","30","stroke","black","stroke-width","5"],["x1","80","y1","30","x2","150","y2","30","stroke","black","stroke-width","5"],["x1","150","y1","30","x2","150","y2","50","stroke","black","stroke-width","5"],["cx","150","cy","70","r","20","stroke","black","stroke-width","5","fill","none",4,"ngIf"],["x1","150","y1","90","x2","150","y2","150","stroke","black","stroke-width","5",4,"ngIf"],["x1","150","y1","110","x2","120","y2","130","stroke","black","stroke-width","5",4,"ngIf"],["x1","150","y1","110","x2","180","y2","130","stroke","black","stroke-width","5",4,"ngIf"],["x1","150","y1","150","x2","120","y2","180","stroke","black","stroke-width","5",4,"ngIf"],["x1","150","y1","150","x2","180","y2","180","stroke","black","stroke-width","5",4,"ngIf"],[1,"botones-letras"],[1,"fila-teclado"],[3,"disabled","click",4,"ngFor","ngForOf"],[1,"contenedor-oportunidades"],[1,"oportunidades"],[4,"ngIf"],[1,"letra"],["cx","150","cy","70","r","20","stroke","black","stroke-width","5","fill","none"],["x1","150","y1","90","x2","150","y2","150","stroke","black","stroke-width","5"],["x1","150","y1","110","x2","120","y2","130","stroke","black","stroke-width","5"],["x1","150","y1","110","x2","180","y2","130","stroke","black","stroke-width","5"],["x1","150","y1","150","x2","120","y2","180","stroke","black","stroke-width","5"],["x1","150","y1","150","x2","180","y2","180","stroke","black","stroke-width","5"],[3,"click","disabled"],[1,"btn-p"],[1,"btn",3,"click"]],template:function(n,r){n&1&&(O(0,"html",0)(1,"head"),be(2,"meta",1)(3,"meta",2)(4,"meta",3),O(5,"title"),z(6,"Juego del Ahorcado"),F()(),O(7,"body")(8,"div",4)(9,"nav",5)(10,"ul")(11,"li")(12,"a",6),z(13,"Log in"),F()(),O(14,"li")(15,"a",7),z(16,"Chat"),F()(),O(17,"li")(18,"a",6),z(19,"Home"),F()(),O(20,"li")(21,"a",7),z(22,"Log Out"),F()()()()(),O(23,"div",8)(24,"div",9)(25,"p",10),z(26," Palabra: "),F(),nn(27,d4,2,1,"span",11),F(),O(28,"div",12),ui(),O(29,"svg",13),be(30,"line",14)(31,"line",15)(32,"line",16)(33,"line",17),nn(34,h4,1,0,"circle",18)(35,f4,1,0,"line",19)(36,p4,1,0,"line",20)(37,g4,1,0,"line",21)(38,m4,1,0,"line",22)(39,y4,1,0,"line",23),F()(),bb(),O(40,"div",24)(41,"div",25),nn(42,v4,2,2,"button",26),F(),O(43,"div",25),nn(44,_4,2,2,"button",26),F(),O(45,"div",25),nn(46,w4,2,2,"button",26),F()(),O(47,"div",27)(48,"p",28),z(49),F()(),nn(50,E4,5,0,"div",29)(51,I4,7,1,"div",29),F()()()),n&2&&(ne(12),fe("routerLink",pt(15,u4)),ne(6),fe("routerLink",pt(16,l4)),ne(9),fe("ngForOf",r.palabraMostrada),ne(7),fe("ngIf",r.intentosRestantes<=5),ne(),fe("ngIf",r.intentosRestantes<=4),ne(),fe("ngIf",r.intentosRestantes<=3),ne(),fe("ngIf",r.intentosRestantes<=2),ne(),fe("ngIf",r.intentosRestantes<=1),ne(),fe("ngIf",r.intentosRestantes===0),ne(3),fe("ngForOf",r.alfabeto.slice(0,10)),ne(2),fe("ngForOf",r.alfabeto.slice(10,19)),ne(2),fe("ngForOf",r.alfabeto.slice(19)),ne(3),_n("Oportunidades restantes: ",r.intentosRestantes,""),ne(),fe("ngIf",r.ganaste),ne(),fe("ngIf",r.perdiste))},dependencies:[Ht,$s,hA,In],styles:["body[_ngcontent-%COMP%]{background-image:url(https://www.creativefabrica.com/wp-content/uploads/2022/11/28/Hangmans-Noose-Tree-Background-49132024-1.png);background-size:cover;background-position:center;background-repeat:no-repeat;min-height:100vh;margin:0}.container[_ngcontent-%COMP%]{text-align:center;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;margin-top:20px;padding:20px}.container-nav[_ngcontent-%COMP%]{text-align:center}.navbar[_ngcontent-%COMP%]{background-color:#000;padding:10px 20px;position:fixed;top:0;left:0;right:0;width:100%;display:flex;justify-content:center;z-index:1000}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:30px}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:20px;padding:10px;display:inline-block}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#a3ae3a;border-radius:4px}.palabra-contenedor[_ngcontent-%COMP%]{background-color:#000000a5;padding:15px;border-radius:5px;display:inline-block;margin-top:70px}.palabra-titulo[_ngcontent-%COMP%]{display:inline-block;font-size:24px;font-weight:700;margin-right:10px;border-radius:5px;color:#efef1c}.letra[_ngcontent-%COMP%]{padding:5px;margin:0 5px;font-size:24px;display:inline-block;text-align:center;color:#efef1c}.palabraMostrada[_ngcontent-%COMP%]{font-size:30px;font-weight:700;color:#4caf50;margin-bottom:20px}.ahorcado-dibujo[_ngcontent-%COMP%]{margin:20px auto}svg[_ngcontent-%COMP%]{background-color:#dde81da4;border:1px solid #0b0a0a;border-radius:8px;box-shadow:0 4px 10px #0000001a;padding:10px}.botones-letras[_ngcontent-%COMP%]{margin:20px 0;display:inline-block}.fila-teclado[_ngcontent-%COMP%]{margin-bottom:10px}button[_ngcontent-%COMP%]{margin:5px;padding:10px;font-size:24px;width:50px;height:50px;border-radius:5px;border:1px solid #000000;cursor:pointer;background-color:#ebecb448;transition:background-color .3s ease,box-shadow .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#c6cb289d;box-shadow:0 4px 6px #0000001a}button[_ngcontent-%COMP%]:active{background-color:#d5d5d5;box-shadow:inset 0 4px 6px #0003}button[_ngcontent-%COMP%]:disabled{background-color:#ddd;cursor:not-allowed}.btn[_ngcontent-%COMP%]{margin-top:20px;padding:15px 25px;font-size:24px;width:150px;height:auto;border-radius:8px;border:1px solid #f97272;background-color:#f44336;color:#fff;cursor:pointer;transition:background-color .3s ease,transform .2s ease}.btn[_ngcontent-%COMP%]:hover{background-color:#e53935}.btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.btn-p[_ngcontent-%COMP%]{font-size:28px;color:#333;margin-bottom:20px}p[_ngcontent-%COMP%]{font-size:30px;color:#555}p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#f44336}.contenedor-oportunidades[_ngcontent-%COMP%]{position:relative}.oportunidades[_ngcontent-%COMP%]{position:absolute;transform:translateY(-750%);padding:10px;font-size:20px;color:#000;background-color:#d3e91262}@media (max-width: 768px){button[_ngcontent-%COMP%]{width:50px;height:50px;font-size:18px}.btn[_ngcontent-%COMP%]{width:120px;padding:12px 20px;font-size:20px}h1[_ngcontent-%COMP%]{font-size:28px}}"]})};var C4=new Map,D4={activated:!1,tokenObservers:[]},b4={initialized:!1,enabled:!1};function Un(t){return C4.get(t)||Object.assign({},D4)}function U1(){return b4}var T4="https://content-firebaseappcheck.googleapis.com/v1";var A4="exchangeDebugToken",F1={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},QK=24*60*60*1e3;var D0=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Tg,this.pending.promise.catch(n=>{}),yield S4(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Tg,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function S4(t){return new Promise(e=>{setTimeout(e,t)})}var x4={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Vi=new tC("appCheck","AppCheck",x4);function B1(t){if(!Un(t).activated)throw Vi.create("use-before-activation",{appName:t.name})}function $1(r,i){return N(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw Vi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Vi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Vi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Vi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function H1(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${T4}/projects/${n}/apps/${r}:${A4}?key=${i}`,body:{debug_token:e}}}var M4="firebase-app-check-database",R4=1,b0="firebase-app-check-store";var Lp=null;function N4(){return Lp||(Lp=new Promise((t,e)=>{try{let n=indexedDB.open(M4,R4);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Vi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(b0,{keyPath:"compositeKey"})}}}catch(n){e(Vi.create("storage-open",{originalErrorMessage:n?.message}))}}),Lp)}function P4(t,e){return O4(k4(t),e)}function O4(t,e){return N(this,null,function*(){let r=(yield N4()).transaction(b0,"readwrite"),o=r.objectStore(b0).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Vi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function k4(t){return`${t.options.appId}-${t.name}`}var T0=new Ml("@firebase/app-check");function C0(t,e){return xl()?P4(t,e).catch(n=>{T0.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function q1(){return U1().enabled}function z1(){return N(this,null,function*(){let t=U1();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var F4={error:"UNKNOWN_ERROR"};function V4(t){return ZI.encodeString(JSON.stringify(t),!1)}function A0(t,e=!1){return N(this,null,function*(){let n=t.app;B1(n);let r=Un(n),i=r.token,o;if(i&&!ul(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(ul(u)?i=u:yield C0(n,void 0))}if(!e&&i&&ul(i))return{token:i.token};let s=!1;if(q1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=$1(H1(n,yield z1()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield C0(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Un(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?T0.warn(u.message):T0.error(u),o=u}let a;return i?o?ul(i)?a={token:i.token,internalError:o}:a=L1(o):(a={token:i.token},r.token=i,yield C0(n,i)):a=L1(o),s&&B4(n,a),a})}function L4(t){return N(this,null,function*(){let e=t.app;B1(e);let{provider:n}=Un(e);if(q1()){let r=yield z1(),{token:i}=yield $1(H1(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function j4(t,e,n,r){let{app:i}=t,o=Un(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ul(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),V1(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>V1(t))}function G1(t,e){let n=Un(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function V1(t){let{app:e}=t,n=Un(e),r=n.tokenRefresher;r||(r=U4(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function U4(t){let{app:e}=t;return new D0(()=>N(this,null,function*(){let n=Un(e),r;if(n.token?r=yield A0(t,!0):r=yield A0(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Un(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},F1.RETRIAL_MIN_WAIT,F1.RETRIAL_MAX_WAIT)}function B4(t,e){let n=Un(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ul(t){return t.expireTimeMillis-Date.now()>0}function L1(t){return{token:V4(F4),error:t}}var S0=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Un(this.app);for(let n of e)G1(this.app,n.next);return Promise.resolve()}};function $4(t,e){return new S0(t,e)}function H4(t){return{getToken:e=>A0(t,e),getLimitedUseToken:()=>L4(t),addTokenListener:e=>j4(t,"INTERNAL",e),removeTokenListener:e=>G1(t.app,e)}}var q4="@firebase/app-check",z4="0.8.8";var G4="app-check",j1="app-check-internal";function W4(){pc(new $i(G4,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return $4(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(j1).initialize()})),pc(new $i(j1,t=>{let e=t.getProvider("app-check").getImmediate();return H4(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),St(q4,z4)}W4();var K4=["localhost","0.0.0.0","127.0.0.1"],aQ=typeof window<"u"&&K4.includes(window.location.hostname);var Q4="firebase",Y4="10.13.2";$n.registerVersion(Q4,Y4,"app-compat");var Z4=["ngOnDestroy"],Q1=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(Z4.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>n.run(()=>l)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var x0=class{constructor(e){return e}},jp=new W("angularfire2.app.options"),Up=new W("angularfire2.app.name");function Bp(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=$n.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>$n.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;J4("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new x0(s)}var J4=(t,...e)=>{Hy()&&typeof console<"u"&&console[t](...e)};function $p(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return X4(i,s)||(K1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${eH?" You may need to reload as Firebase is not HMR aware.":""}`),K1("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function X4(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var eH=typeof module<"u"&&!!module.hot,K1=(t,...e)=>{Hy()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var M0=new W("angularfire2.auth.use-emulator"),R0=new W("angularfire2.auth.settings"),N0=new W("angularfire2.auth.tenant-id"),P0=new W("angularfire2.auth.langugage-code"),O0=new W("angularfire2.auth.use-device-language"),k0=new W("angularfire.auth.persistence"),F0=(t,e,n,r,i,o,s,a)=>$p(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]),qa=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,l,h,p,g,y){let C=new $e,S=ie(void 0).pipe(en(s.outsideAngular),Ye(()=>o.runOutsideAngular(()=>import("./chunk-OQ2GWXHO.js"))),te(()=>Bp(n,o,r)),te(x=>F0(x,o,a,l,h,p,u,g)),ld({bufferSize:1,refCount:!1}));if(yo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ie(null);else{S.pipe(hn()).subscribe();let x=S.pipe(Ye(V=>V.getRedirectResult().then(Q=>Q,()=>null)),qt,ld({bufferSize:1,refCount:!1})),L=S.pipe(Ye(V=>new pe(Q=>({unsubscribe:o.runOutsideAngular(()=>V.onAuthStateChanged(re=>Q.next(re),re=>Q.error(re),()=>Q.complete()))})))),H=S.pipe(Ye(V=>new pe(Q=>({unsubscribe:o.runOutsideAngular(()=>V.onIdTokenChanged(re=>Q.next(re),re=>Q.error(re),()=>Q.complete()))}))));this.authState=x.pipe(dd(L),dn(s.outsideAngular),en(s.insideAngular)),this.user=x.pipe(dd(H),dn(s.outsideAngular),en(s.insideAngular)),this.idToken=this.user.pipe(Ye(V=>V?Ae(V.getIdToken()):ie(null))),this.idTokenResult=this.user.pipe(Ye(V=>V?Ae(V.getIdTokenResult()):ie(null))),this.credential=Xg(x,C,this.authState.pipe(xt(V=>!V))).pipe(te(V=>V?.user?V:null),dn(s.outsideAngular),en(s.insideAngular))}return Q1(this,S,o,{spy:{apply:(x,L,H)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&H.then(V=>C.next(V))}}})}static \u0275fac=function(r){return new(r||t)(q(jp),q(Up,8),q(tn),q(De),q(tr),q(M0,8),q(R0,8),q(N0,8),q(P0,8),q(O0,8),q(k0,8),q(kn,8))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var tH="@firebase/firestore-compat",nH="0.3.37";function H0(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function Y1(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function Z1(){if(!eM())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Hp=class t{constructor(e){this._delegate=e}static fromBase64String(e){return Z1(),new t(dr.fromBase64String(e))}static fromUint8Array(e){return Y1(),new t(dr.fromUint8Array(e))}toBase64(){return Z1(),this._delegate.toBase64()}toUint8Array(){return Y1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function L0(t){return rH(t,["next","error","complete"])}function rH(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var j0=class{enableIndexedDbPersistence(e,n){return UE(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return BE(e._delegate)}clearIndexedDbPersistence(e){return $E(e._delegate)}},qp=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ai||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Dn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){wp(this._delegate,e,n,r)}enableNetwork(){return qE(this._delegate)}disableNetwork(){return zE(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,LE("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return HE(this._delegate)}onSnapshotsInSync(e){return f0(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Wa(this,cl(this._delegate,e))}catch(n){throw Wt(n,"collection()","Firestore.collection()")}}doc(e){try{return new fr(this,$a(this._delegate,e))}catch(n){throw Wt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xo(this,jE(this._delegate,e))}catch(n){throw Wt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return g0(this._delegate,n=>e(new zp(this,n)))}batch(){return mt(this._delegate),new Gp(new fp(this._delegate,e=>Ha(this._delegate,e)))}loadBundle(e){return GE(this._delegate,e)}namedQuery(e){return WE(this._delegate,e).then(n=>n?new Xo(this,n):null)}},za=class extends ka{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hp(new dr(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return fr.forKey(n,this.firestore,null)}};function iH(t){uE(t)}var zp=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new za(e)}get(e){let n=Yo(e);return this._delegate.get(n).then(r=>new Zo(this._firestore,new Tn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=Yo(e);return r?(H0("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Yo(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Yo(e);return this._delegate.delete(n),this}},Gp=class{constructor(e){this._delegate=e}set(e,n,r){let i=Yo(e);return r?(H0("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Yo(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Yo(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Ga=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Ci(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jo(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new za(e),n),i.set(n,o)),o}};Ga.INSTANCES=new WeakMap;var fr=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new za(e)}static forPath(e,n,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Le(n._delegate,r,new B(e)))}static forKey(e,n,r){return new t(n,new Le(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Wa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Wa(this.firestore,cl(this._delegate,e))}catch(n){throw Wt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ze(e),e instanceof Le?Ep(this._delegate,e):!1}set(e,n){n=H0("DocumentReference.set",n);try{return n?Ap(this._delegate,e,n):Ap(this._delegate,e)}catch(r){throw Wt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Sp(this._delegate,e):Sp(this._delegate,e,n,...r)}catch(i){throw Wt(i,"updateDoc()","DocumentReference.update()")}}delete(){return h0(this._delegate)}onSnapshot(...e){let n=J1(e),r=X1(e,i=>new Zo(this.firestore,new Tn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Mp(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=a0(this._delegate):e?.source==="server"?n=c0(this._delegate):n=s0(this._delegate),n.then(r=>new Zo(this.firestore,new Tn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ga.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Wt(t,e,n){return t.message=t.message.replace(e,n),t}function J1(t){for(let e of t)if(typeof e=="object"&&!L0(e))return e;return{}}function X1(t,e){var n,r;let i;return L0(t[0])?i=t[0]:L0(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Zo=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new fr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Tp(this._delegate,e._delegate)}},Jo=class extends Zo{data(e){let n=this._delegate.data(e);return this._delegate._converter||$x(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Xo=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new za(e)}where(e,n,r){try{return new t(this.firestore,hr(this._delegate,JE(e,n,r)))}catch(i){throw Wt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,hr(this._delegate,XE(e,n)))}catch(r){throw Wt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,hr(this._delegate,e0(e)))}catch(n){throw Wt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,hr(this._delegate,t0(e)))}catch(n){throw Wt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,hr(this._delegate,n0(...e)))}catch(n){throw Wt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,hr(this._delegate,r0(...e)))}catch(n){throw Wt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,hr(this._delegate,i0(...e)))}catch(n){throw Wt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,hr(this._delegate,o0(...e)))}catch(n){throw Wt(n,"endAt()","Query.endAt()")}}isEqual(e){return Ip(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=l0(this._delegate):e?.source==="server"?n=d0(this._delegate):n=u0(this._delegate),n.then(r=>new ll(this.firestore,new jn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=J1(e),r=X1(e,i=>new ll(this.firestore,new jn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Mp(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ga.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},U0=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Jo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},ll=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Xo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new U0(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Jo(this._firestore,r))})}isEqual(e){return Tp(this._delegate,e._delegate)}},Wa=class t extends Xo{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new fr(this.firestore,e):null}doc(e){try{return e===void 0?new fr(this.firestore,$a(this._delegate)):new fr(this.firestore,$a(this._delegate,e))}catch(n){throw Wt(n,"doc()","CollectionReference.doc()")}}add(e){return xp(this._delegate,e).then(n=>new fr(this.firestore,n))}isEqual(e){return Ep(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Ga.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Yo(t){return Ie(t,Le)}var B0=class t{constructor(...e){this._delegate=new Ln(...e)}static documentId(){return new t(et.keyField().canonicalString())}isEqual(e){return e=ze(e),e instanceof Ln?this._delegate._internalPath.isEqual(e._internalPath):!1}};var $0=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=y0();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=m0();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=v0(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=_0(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=w0(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var oH={Firestore:qp,GeoPoint:qo,Timestamp:Ge,Blob:Hp,Transaction:zp,WriteBatch:Gp,DocumentReference:fr,DocumentSnapshot:Zo,Query:Xo,QueryDocumentSnapshot:Jo,QuerySnapshot:ll,CollectionReference:Wa,FieldPath:B0,FieldValue:$0,setLogLevel:iH,CACHE_SIZE_UNLIMITED:y1};function sH(t,e){t.INTERNAL.registerComponent(new $i("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},oH)))}function aH(t){sH(t,(e,n)=>new qp(e,n,new j0)),t.registerVersion(tH,nH)}aH($n);function cH(t,e=Ec){return new pe(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function eR(t,e){return cH(t,e)}function uH(t,e){return eR(t,e).pipe(Wi(void 0),Dc(),te(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function G0(t,e){return eR(t,e).pipe(te(n=>({payload:n,type:"query"})))}var Wp=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=rR(r,n);return new Qp(i,o,this.afs)}snapshotChanges(){return uH(this.ref,this.afs.schedulers.outsideAngular).pipe(qt)}valueChanges(e={}){return this.snapshotChanges().pipe(te(({payload:n})=>e.idField?ye($({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return Ae(this.ref.get(e)).pipe(qt)}};function Kp(t,e){return G0(t,e).pipe(Wi(void 0),Dc(),te(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function tR(t,e,n){return Kp(t,n).pipe(Gi((r,i)=>lH(r,i.map(o=>o.payload),e),[]),tm(),te(r=>r.map(i=>({type:i.type,payload:i}))))}function lH(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=dH(t,r))}),t}function q0(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function dH(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return q0(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return q0(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return q0(t,e.oldIndex,1);break}return t}function nR(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Qp=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Kp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(te(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Wi(void 0),Dc(),xt(([r,i])=>i.length>0||!r),te(([,r])=>r),qt)}auditTrail(e){return this.stateChanges(e).pipe(Gi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=nR(e);return tR(this.query,n,this.afs.schedulers.outsideAngular).pipe(qt)}valueChanges(e={}){return G0(this.query,this.afs.schedulers.outsideAngular).pipe(te(n=>n.payload.docs.map(r=>e.idField?ye($({},r.data()),{[e.idField]:r.id}):r.data())),qt)}get(e){return Ae(this.query.get(e)).pipe(qt)}add(e){return this.ref.add(e)}doc(e){return new Wp(this.ref.doc(e),this.afs)}},z0=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Kp(this.query,this.afs.schedulers.outsideAngular).pipe(qt):Kp(this.query,this.afs.schedulers.outsideAngular).pipe(te(n=>n.filter(r=>e.indexOf(r.type)>-1)),xt(n=>n.length>0),qt)}auditTrail(e){return this.stateChanges(e).pipe(Gi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=nR(e);return tR(this.query,n,this.afs.schedulers.outsideAngular).pipe(qt)}valueChanges(e={}){return G0(this.query,this.afs.schedulers.outsideAngular).pipe(te(r=>r.payload.docs.map(i=>e.idField?$({[e.idField]:i.id},i.data()):i.data())),qt)}get(e){return Ae(this.query.get(e)).pipe(qt)}},hH=new W("angularfire2.enableFirestorePersistence"),fH=new W("angularfire2.firestore.persistenceSettings"),pH=new W("angularfire2.firestore.settings"),gH=new W("angularfire2.firestore.use-emulator");function rR(t,e=n=>n){return{query:e(t),ref:t}}var iR=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,l,h,p,g,y,C,S,x,L,H){this.schedulers=u;let V=Bp(n,a,r),Q=h;p&&F0(V,a,g,C,S,x,y,L),[this.firestore,this.persistenceEnabled$]=$p(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{let re=a.runOutsideAngular(()=>V.firestore());if(o&&re.settings(o),Q&&re.useEmulator(...Q),i&&!yo(s)){let Z=()=>{try{return Ae(re.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),ie(!1)}};return[re,a.runOutsideAngular(Z)]}else return[re,ie(!1)]},[o,Q,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=rR(i,r),a=this.schedulers.ngZone.run(()=>o);return new Qp(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new z0(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Wp(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(q(jp),q(Up,8),q(hH,8),q(pH,8),q(tn),q(De),q(tr),q(fH,8),q(gH,8),q(qa,8),q(M0,8),q(R0,8),q(N0,8),q(P0,8),q(O0,8),q(k0,8),q(kn,8))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Yp=class t{constructor(e,n){this.firestore=e;this.auth=n}sendMessage(e,n){this.firestore.collection("messages").add({text:e,email:n,timestamp:new Date})}getMessages(){return this.firestore.collection("messages",e=>e.orderBy("timestamp")).valueChanges()}static \u0275fac=function(n){return new(n||t)(q(iR),q(qa))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})};var Zp=class t{constructor(e){this.afAuth=e}getCurrentUser(){return this.afAuth.authState}static \u0275fac=function(n){return new(n||t)(q(qa))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})};function _H(t,e){if(t&1&&(O(0,"div",7)(1,"p")(2,"strong"),z(3),F(),z(4),O(5,"span",8),z(6),LT(7,"date"),F()()()),t&2){let n=e.$implicit;ne(3),_n("",n.email,":"),ne(),_n(" ",n.text," "),ne(2),_n("(",jT(7,3,n.timestamp.toDate(),"shortTime"),")")}}var Jp=class t{constructor(e,n){this.chatService=e;this.authService=n}message="";messages=[];userEmail=null;ngOnInit(){this.authService.getCurrentUser().subscribe(e=>{e&&(this.userEmail=e.email)}),this.chatService.getMessages().subscribe(e=>{this.messages=e})}sendMessage(){this.message.trim()&&(this.chatService.sendMessage(this.message,this.userEmail||"An\xF3nimo"),this.message="")}static \u0275fac=function(n){return new(n||t)(oe(Yp),oe(Zp))};static \u0275cmp=yt({type:t,selectors:[["app-chat"]],standalone:!0,features:[vt],decls:10,vars:2,consts:[[1,"chat-container"],[1,"chat-header"],[1,"chat-messages"],["class","message-item",4,"ngFor","ngForOf"],[1,"chat-input"],["placeholder","Escribe un mensaje...",3,"ngModelChange","ngModel"],[3,"click"],[1,"message-item"],[1,"time"]],template:function(n,r){n&1&&(O(0,"div",0)(1,"div",1)(2,"h2"),z(3,"Chat en Vivo"),F()(),O(4,"div",2),nn(5,_H,8,6,"div",3),F(),O(6,"div",4)(7,"input",5),Xn("ngModelChange",function(o){return Mr(r.message,o)||(r.message=o),o}),F(),O(8,"button",6),Je("click",function(){return r.sendMessage()}),z(9,"Enviar"),F()()()),n&2&&(ne(5),fe("ngForOf",r.messages),ne(2),Jn("ngModel",r.message))},dependencies:[Ht,$s,fA,ra,mi,na,bo],styles:[".chat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;width:100%;max-width:600px;margin:0 auto;border:1px solid #ccc;background-color:#f9f9f9}.chat-header[_ngcontent-%COMP%]{background-color:#4caf50;padding:10px;color:#fff;text-align:center}.chat-messages[_ngcontent-%COMP%]{flex:1;padding:10px;overflow-y:auto;background-color:#fff}.chat-messages[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:5px 10px;border-radius:10px;background-color:#e4e4e4;margin-bottom:10px;max-width:80%}.chat-input[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #ccc}.chat-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:10px;border:none;border-radius:5px}.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:10px 15px;border:none;border-radius:5px;cursor:pointer}.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#45a049}"]})};var oR=[{path:"login",component:Pp},{path:"home",component:zh},{path:"registro",component:Fp},{path:"yo",component:Op},{path:"pacman",component:kp},{path:"ahorcado",component:Vp},{path:"chat",component:Jp},{path:"",redirectTo:"/login",pathMatch:"full"}];var sR={providers:[zT({eventCoalescing:!0}),oS(oR),MS(()=>RS({projectId:"salajuegos-4ae7b",appId:"1:503761293861:web:ab3251c9869b57c5df25cc",storageBucket:"salajuegos-4ae7b.appspot.com",apiKey:"AIzaSyA4ILBSXBbhBV67ikiunUgSE08pFJX5aMc",authDomain:"salajuegos-4ae7b.firebaseapp.com",messagingSenderId:"503761293861"})),PS(()=>kS()),N1(()=>P1())]};var Xp=class t{title="ejercicio1";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=yt({type:t,selectors:[["app-root"]],standalone:!0,features:[vt],decls:1,vars:0,template:function(n,r){n&1&&be(0,"router-outlet")},dependencies:[Vv]})};IA(Xp,sR).catch(t=>console.error(t));
